function _defineProperties(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,n){return!n||"object"!=typeof n&&"function"!=typeof n?_assertThisInitialized(e):n}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&_setPrototypeOf(e,n)}function _setPrototypeOf(e,n){return(_setPrototypeOf=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{RyY7:function(e,n,t){"use strict";t.r(n);var i,o,r=t("ofXK"),a=t("3Pt+"),c=t("tyNb"),s=t("CcG0"),l=t("5f3J"),d=t("fXoL"),b=t("47y3"),f=function(){return{name:"Engine Admin"}},u=function(){return{class:"backoffice-info"}},p=function(e){return{id:"about",name:"About",icon:e}},h=function(){return{class:"backoffice-database"}},g=function(e){return{id:"database",name:"Database",icon:e}},m=function(e,n){return[e,n]},_=((i=function(e){function n(){return _classCallCheck(this,n),_possibleConstructorReturn(this,_getPrototypeOf(n).apply(this,arguments))}return _inherits(n,e),n}(l.a)).\u0275fac=function(e){return w(e||i)},i.\u0275cmp=d.Kb({type:i,selectors:[["app-engine"]],features:[d.zb],decls:3,vars:13,consts:[[1,"container"],["name","test","route","engine",3,"item","has_change","tabs"]],template:function(e,n){1&e&&(d.Wb(0,"div",0),d.Wb(1,"main"),d.Rb(2,"item-display",1),d.Vb(),d.Vb()),2&e&&(d.Cb(2),d.oc("item",d.pc(3,f))("has_change",!1)("tabs",d.rc(10,m,d.qc(5,p,d.pc(4,u)),d.qc(8,g,d.pc(7,h)))))},directives:[b.a],styles:[".container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;height:100%;width:100%}@media only screen and (orientation:portrait) and (max-width:450px){.container[_ngcontent-%COMP%]{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}}@media only screen and (orientation:landscape) and (max-width:800px){.container[_ngcontent-%COMP%]{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}}@media only screen and (orientation:portrait) and (max-width:450px){.container.show[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{height:100%}}@media only screen and (orientation:landscape) and (max-width:800px){.container.show[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{height:100%}}@media only screen and (orientation:portrait) and (max-width:450px){.container.show[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{height:0%}}@media only screen and (orientation:landscape) and (max-width:800px){.container.show[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{height:0%}}.sidebar[_ngcontent-%COMP%]{height:100%;width:20em}@media only screen and (orientation:portrait) and (max-width:450px){.sidebar[_ngcontent-%COMP%]{height:3em;min-height:3em;width:100%;-webkit-transition:height .3s;transition:height .3s}}@media only screen and (orientation:landscape) and (max-width:800px){.sidebar[_ngcontent-%COMP%]{height:3em;min-height:3em;width:100%;-webkit-transition:height .3s;transition:height .3s}}main[_ngcontent-%COMP%]{position:relative;height:100%;overflow:hidden;-webkit-box-flex:1;flex:1;background-color:#f0f0f0}@media only screen and (orientation:portrait) and (max-width:450px){main[_ngcontent-%COMP%]{-webkit-transition:height .3s;transition:height .3s;width:100%}}@media only screen and (orientation:landscape) and (max-width:800px){main[_ngcontent-%COMP%]{-webkit-transition:height .3s;transition:height .3s;width:100%}}.about[_ngcontent-%COMP%]{padding:1.25em;font-size:1.2em}.user[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;margin-bottom:1em}.user[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.user[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%], .user[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]{font-size:.8em;color:rgba(0,0,0,.54);margin-top:.25em}.avatar[_ngcontent-%COMP%]{height:4em;width:4em;min-width:4em;border-radius:100%;background-color:#f8f8f8;border:1px solid #ccc;background-position:50%;background-size:cover;background-repeat:no-repeat;margin-right:1.5em}.field[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;flex-wrap:wrap;margin:.5em 0}.field[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:12em;min-width:10em;font-size:.8em;font-weight:400;margin:.5em 0}.field[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{-webkit-box-flex:3;flex:3;min-width:16em}.field[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1;margin:.5em 0}"]}),i),w=d.Yb(_),x=t("mrSG"),C=t("VBRG"),k=((o=function(e){function n(e){var t;return _classCallCheck(this,n),(t=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this)))._composer=e,t}return _inherits(n,e),_createClass(n,[{key:"reindex",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Object(x.b)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this._composer.http.post("".concat(this._composer.auth.api_endpoint,"/reindex").concat(e?"?backfill=true":""),null).toPromise());case 1:case"end":return n.stop()}}),n,this)})))}},{key:"backfill",value:function(){return Object(x.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._composer.http.post("".concat(this._composer.auth.api_endpoint,"/backfill"),null).toPromise());case 1:case"end":return e.stop()}}),e,this)})))}}]),n}(C.a)).\u0275fac=function(e){return new(e||o)(d.ac(s.c))},o.\u0275prov=d.Mb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),y=t("OaWH"),v=t("bTqV"),O=t("m6yr"),P=t("Xa2L");function M(e,n){1&e&&(d.Ub(0),d.Ic(1,"Re-index"),d.Tb())}function V(e,n){1&e&&(d.Ub(0),d.Ic(1,"Backfill"),d.Tb())}function I(e,n){1&e&&(d.Wb(0,"div",4),d.Rb(1,"mat-spinner",5),d.Vb())}var E,R,W=((E=function(){function e(n,t){_classCallCheck(this,e),this._service=n,this._engine_service=t}return _createClass(e,[{key:"reindex",value:function(){var e=this;this.reindexing=!0,this._engine_service.reindex().then((function(){return e.reindexing=!1}),(function(n){e.reindexing=!1,e._service.notifyError("Error reindexing database. Error: ".concat(n.message|n))}))}},{key:"backfill",value:function(){var e=this;this.backfilling=!0,this._engine_service.backfill().then((function(){return e.backfilling=!1}),(function(n){e.backfilling=!1,e._service.notifyError("Error reindexing database. Error: ".concat(n.message|n))}))}}]),e}()).\u0275fac=function(e){return new(e||E)(d.Qb(y.a),d.Qb(k))},E.\u0275cmp=d.Kb({type:E,selectors:[["app-database-details"]],decls:8,vars:6,consts:[[1,""],["mat-button","",3,"disabled","tapped"],[4,"ngIf","ngIfElse"],["spinner",""],[1,"spinner"],["diameter","32"]],template:function(e,n){if(1&e&&(d.Wb(0,"div",0),d.Wb(1,"button",1),d.ec("tapped",(function(){return n.reindex()})),d.Gc(2,M,2,0,"ng-container",2),d.Vb(),d.Vb(),d.Wb(3,"div",0),d.Wb(4,"button",1),d.ec("tapped",(function(){return n.backfill()})),d.Gc(5,V,2,0,"ng-container",2),d.Vb(),d.Vb(),d.Gc(6,I,2,0,"ng-template",null,3,d.Hc)),2&e){var t=d.vc(7);d.Cb(1),d.oc("disabled",n.reindexing),d.Cb(1),d.oc("ngIf",!n.reindexing)("ngIfElse",t),d.Cb(2),d.oc("disabled",n.backfilling),d.Cb(1),d.oc("ngIf",!n.backfilling)("ngIfElse",t)}},directives:[v.b,O.b,r.m,P.b],styles:["[_nghost-%COMP%]{padding:1em}button[_ngcontent-%COMP%]{min-width:10em;margin:.25em}.spinner[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;width:100%;margin:.25em 0}"]}),E),j=t("lUOg"),z=t("4z9b"),T=t("0IaG"),G=((R=function(e){function n(e,t){var i;return _classCallCheck(this,n),(i=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this)))._service=e,i._dialog=t,i}return _inherits(n,e),_createClass(n,[{key:"changelog",value:function(e){this._dialog.open(z.a,{data:{changelog:e}})}},{key:"user",get:function(){return this._service.Users.current()}},{key:"backoffice_version",get:function(){return j.c}},{key:"backoffice_build",get:function(){return j.a.format("DD MMM YYYY [at] h:mma")}}]),n}(l.a)).\u0275fac=function(e){return new(e||R)(d.Qb(y.a),d.Qb(T.b))},R.\u0275cmp=d.Kb({type:R,selectors:[["app-engine-details"]],features:[d.zb],decls:10,vars:2,consts:[[1,"field"],["for","version"],[1,"value"]],template:function(e,n){1&e&&(d.Wb(0,"div",0),d.Wb(1,"label",1),d.Ic(2,"Backoffice Version:"),d.Vb(),d.Wb(3,"div",2),d.Ic(4),d.Vb(),d.Vb(),d.Wb(5,"div",0),d.Wb(6,"label",1),d.Ic(7,"Backoffice Build:"),d.Vb(),d.Wb(8,"div",2),d.Ic(9),d.Vb(),d.Vb()),2&e&&(d.Cb(4),d.Jc(n.backoffice_version),d.Cb(5),d.Jc(n.backoffice_build))},styles:["[_nghost-%COMP%]{padding:1em}.field[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;font-size:1.25em;margin:0 0 .5em}label[_ngcontent-%COMP%]{font-size:.8em;font-weight:600;width:10em;margin-bottom:.25em}"]}),R),Y=[{path:"",component:_,canActivate:[t("QZVP").a],children:[{path:"about",component:G},{path:"database",component:W},{path:"**",redirectTo:"about"}]},{path:"**",redirectTo:""}],B=t("PCNd");t.d(n,"AppEngineModule",(function(){return Q}));var J,Q=((J=function e(){_classCallCheck(this,e)}).\u0275mod=d.Ob({type:J}),J.\u0275inj=d.Nb({factory:function(e){return new(e||J)},imports:[[r.c,a.g,s.b,c.g.forChild(Y),B.a]]}),J)}}]);