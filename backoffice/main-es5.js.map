{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/overlays/auth-source-modal/auth-source-modal.component.ts","webpack:///src/app/overlays/auth-source-modal/auth-source-modal.component.html","webpack:///src/app/overlays/changelog-modal/changelog-modal.component.ts","webpack:///src/app/overlays/changelog-modal/changelog-modal.template.html","webpack:///src/app/overlays/confirm-modal/confirm-modal.component.ts","webpack:///src/app/overlays/confirm-modal/confirm-modal.component.html","webpack:///src/app/overlays/item-modal/item-modal.component.html","webpack:///src/app/overlays/item-modal/item-modal.component.ts","webpack:///src/app/overlays/metadata-details-modal/metadata-details-modal.component.ts","webpack:///src/app/overlays/metadata-details-modal/metadata-details-modal.component.html","webpack:///src/app/overlays/overlays.module.ts","webpack:///src/app/overlays/select-item-modal/select-item-modal.component.ts","webpack:///src/app/overlays/select-item-modal/select-item-modal.component.html","webpack:///src/app/overlays/system-log-modal/system-log-modal.component.ts","webpack:///src/app/overlays/system-log-modal/system-log-modal.component.html","webpack:///src/app/overlays/trigger-action-modal/trigger-action-modal.component.ts","webpack:///src/app/overlays/trigger-action-modal/trigger-action-modal.template.html","webpack:///src/app/overlays/trigger-condition-modal/trigger-condition-modal.component.ts","webpack:///src/app/overlays/trigger-condition-modal/trigger-condition-modal.template.html","webpack:///src/app/overlays/view-module-state/view-module-state.component.ts","webpack:///src/app/overlays/view-module-state/view-module-state.template.html","webpack:///src/app/overlays/view-response-modal/view-response-modal.component.ts","webpack:///src/app/overlays/view-response-modal/view-response-modal.component.html","webpack:///src/app/services/app.service.ts","webpack:///src/app/services/data/base.service.ts","webpack:///src/app/services/data/comments.service.ts","webpack:///src/app/services/data/logs.service.ts","webpack:///src/app/services/data/search.service.ts","webpack:///src/app/services/data/stats.service.ts","webpack:///src/app/services/data/system_logs.service.ts","webpack:///src/app/services/data/users.service.ts","webpack:///src/app/services/debug.service.ts","webpack:///src/app/services/hotkeys.service.ts","webpack:///src/app/services/sentry.service.ts","webpack:///src/app/services/settings.service.ts","webpack:///src/app/shared/components/base-root.component.ts","webpack:///src/app/shared/components/context-menu/context-menu.component.ts","webpack:///src/app/shared/components/context-menu/context-menu.template.html","webpack:///src/app/shared/components/custom-fields/date-field/date-field.component.ts","webpack:///src/app/shared/components/custom-fields/date-field/date-field.component.html","webpack:///src/app/shared/components/custom-fields/item-search-field/item-search-field.component.ts","webpack:///src/app/shared/components/custom-fields/item-search-field/item-search-field.component.html","webpack:///src/app/shared/components/custom-fields/object-list-field/object-list-field.component.ts","webpack:///src/app/shared/components/custom-fields/object-list-field/object-list-field.component.html","webpack:///src/app/shared/components/custom-fields/settings-field/settings-field.component.ts","webpack:///src/app/shared/components/custom-fields/settings-field/settings-field.component.html","webpack:///src/app/shared/components/custom-fields/system-exec-field/system-exec-field.component.ts","webpack:///src/app/shared/components/custom-fields/system-exec-field/system-exec-field.template.html","webpack:///src/app/shared/components/custom-fields/time-field/time-field.component.ts","webpack:///src/app/shared/components/custom-fields/time-field/time-field.component.html","webpack:///src/app/shared/components/debug-output/debug-output.component.ts","webpack:///src/app/shared/components/debug-output/debug-output.component.html","webpack:///src/app/shared/components/forms/application-form/application-form.component.ts","webpack:///src/app/shared/components/forms/application-form/application-form.component.html","webpack:///src/app/shared/components/forms/domain-form/domain-form.component.ts","webpack:///src/app/shared/components/forms/domain-form/domain-form.component.html","webpack:///src/app/shared/components/forms/driver-form/driver-form.component.html","webpack:///src/app/shared/components/forms/driver-form/driver-form.component.ts","webpack:///src/app/shared/components/forms/ldap-source-form/ldap-source-form.component.ts","webpack:///src/app/shared/components/forms/ldap-source-form/ldap-source-form.component.html","webpack:///src/app/shared/components/forms/module-form/module-form.component.ts","webpack:///src/app/shared/components/forms/module-form/module-form.component.html","webpack:///src/app/shared/components/forms/oauth-source-form/oauth-source-form.component.ts","webpack:///src/app/shared/components/forms/oauth-source-form/oauth-source-form.component.html","webpack:///src/app/shared/components/forms/repository-form/repository-form.component.ts","webpack:///src/app/shared/components/forms/repository-form/repository-form.component.html","webpack:///src/app/shared/components/forms/saml-source-form/saml-source-form.component.ts","webpack:///src/app/shared/components/forms/saml-source-form/saml-source-form.component.html","webpack:///src/app/shared/components/forms/settings-form/settings-form.component.ts","webpack:///src/app/shared/components/forms/settings-form/settings-form.component.html","webpack:///src/app/shared/components/forms/system-form/system-form.component.ts","webpack:///src/app/shared/components/forms/system-form/system-form.component.html","webpack:///src/app/shared/components/forms/system-trigger-form/system-trigger-form.component.ts","webpack:///src/app/shared/components/forms/system-trigger-form/system-trigger-form.component.html","webpack:///src/app/shared/components/forms/trigger-action-form/trigger-action-form.component.ts","webpack:///src/app/shared/components/forms/trigger-action-form/trigger-action-form.component.html","webpack:///src/app/shared/components/forms/trigger-condition-form/comparison-form/comparison-form.component.ts","webpack:///src/app/shared/components/forms/trigger-condition-form/comparison-form/comparison-form.component.html","webpack:///src/app/shared/components/forms/trigger-condition-form/time-form/time-form.component.ts","webpack:///src/app/shared/components/forms/trigger-condition-form/time-form/time-form.component.html","webpack:///src/app/shared/components/forms/trigger-condition-form/trigger-condition-form.component.ts","webpack:///src/app/shared/components/forms/trigger-condition-form/trigger-condition-form.component.html","webpack:///src/app/shared/components/forms/trigger-form/trigger-form.component.ts","webpack:///src/app/shared/components/forms/trigger-form/trigger-form.component.html","webpack:///src/app/shared/components/forms/user-form/user-form.component.ts","webpack:///src/app/shared/components/forms/user-form/user-form.component.html","webpack:///src/app/shared/components/forms/zone-form/zone-form.component.html","webpack:///src/app/shared/components/forms/zone-form/zone-form.component.ts","webpack:///src/app/shared/components/icon/icon.component.ts","webpack:///src/app/shared/components/icon/icon.component.html","webpack:///src/app/shared/components/item-display/item-display.component.ts","webpack:///src/app/shared/components/item-display/item-display.template.html","webpack:///src/app/shared/components/login/forgot-pass-form/forgot-pass-form.component.ts","webpack:///src/app/shared/components/login/index.ts","webpack:///src/app/shared/components/login/login-form/login-form.component.ts","webpack:///src/app/shared/components/login/login-form/login-form.template.html","webpack:///src/app/shared/components/login/login.component.ts","webpack:///src/app/shared/components/login/login.template.html","webpack:///src/app/shared/components/login/register-form/register-form.component.ts","webpack:///src/app/shared/components/searchbar/searchbar.component.ts","webpack:///src/app/shared/components/searchbar/searchbar.template.html","webpack:///src/app/shared/components/sidebar/sidebar.component.ts","webpack:///src/app/shared/components/sidebar/sidebar.template.html","webpack:///src/app/shared/components/terminal/terminal.component.ts","webpack:///src/app/shared/components/terminal/terminal.component.html","webpack:///src/app/shared/globals/angular-animations.ts","webpack:///src/app/shared/globals/base.class.ts","webpack:///src/app/shared/globals/base.directive.ts","webpack:///src/app/shared/guards/authorised-admin.guard.ts","webpack:///src/app/shared/mocks/backend.mock.ts","webpack:///src/app/shared/mocks/backend/applications.mock.ts","webpack:///src/app/shared/mocks/backend/auth-sources.mock.ts","webpack:///src/app/shared/mocks/backend/base.mock.ts","webpack:///src/app/shared/mocks/backend/discovery.mock.ts","webpack:///src/app/shared/mocks/backend/domains.mock.ts","webpack:///src/app/shared/mocks/backend/driver.mock.ts","webpack:///src/app/shared/mocks/backend/modules.mock.ts","webpack:///src/app/shared/mocks/backend/nodes.mock.ts","webpack:///src/app/shared/mocks/backend/repositories.mock.ts","webpack:///src/app/shared/mocks/backend/settings.mock.ts","webpack:///src/app/shared/mocks/backend/stats.mock.ts","webpack:///src/app/shared/mocks/backend/systems-triggers.mock.ts","webpack:///src/app/shared/mocks/backend/systems.mock.ts","webpack:///src/app/shared/mocks/backend/tests.mock.ts","webpack:///src/app/shared/mocks/backend/triggers.mock.ts","webpack:///src/app/shared/mocks/backend/users.mock.ts","webpack:///src/app/shared/mocks/backend/zones.mock.ts","webpack:///src/app/shared/mocks/common.mock.ts","webpack:///src/app/shared/mocks/index.ts","webpack:///src/app/shared/mocks/system.mockup.ts","webpack:///src/app/shared/pipes/date-from.pipe.ts","webpack:///src/app/shared/pipes/driver-format.pipe.ts","webpack:///src/app/shared/pipes/format-list.pipe.ts","webpack:///src/app/shared/shared.module.ts","webpack:///src/app/shared/utilities/api.utilities.ts","webpack:///src/app/shared/utilities/data/applications.utilities.ts","webpack:///src/app/shared/utilities/data/auth-sources.utilities.ts","webpack:///src/app/shared/utilities/data/domains.utilities.ts","webpack:///src/app/shared/utilities/data/drivers.utilities.ts","webpack:///src/app/shared/utilities/data/modules.utilities.ts","webpack:///src/app/shared/utilities/data/repositories.utilities.ts","webpack:///src/app/shared/utilities/data/systems.utilities.ts","webpack:///src/app/shared/utilities/data/triggers.utilities.ts","webpack:///src/app/shared/utilities/data/users.utilities.ts","webpack:///src/app/shared/utilities/data/zones.utilites.ts","webpack:///src/app/shared/utilities/general.utilities.ts","webpack:///src/app/shared/utilities/validation.utilities.ts","webpack:///src/app/shell/components/global-search/global-search.component.ts","webpack:///src/app/shell/components/global-search/global-search.template.html","webpack:///src/app/shell/components/index.ts","webpack:///src/app/shell/components/sidebar-menu/sidebar-menu.component.ts","webpack:///src/app/shell/components/sidebar-menu/sidebar-menu.template.html","webpack:///src/app/shell/components/topbar-header/topbar-header.component.ts","webpack:///src/app/shell/components/topbar-header/topbar-header.template.html","webpack:///src/app/shell/index.ts","webpack:///src/app/shell/shell.component.ts","webpack:///src/app/shell/shell.template.html","webpack:///src/environments/environment.ts","webpack:///src/environments/version.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","routes","path","component","children","loadChildren","m","AppModulesModule","AppDomainsModule","AppDriversModule","AppMetricsModule","AppSystemsModule","AppRepositoriesModule","AppTriggersModule","AppUsersModule","AppZonesModule","AppEngineModule","canLoad","redirectTo","AppRoutingModule","forRoot","useHash","imports","AppComponent","_service","title","selector","templateUrl","styleUrls","encapsulation","None","AppModule","provide","useClass","register","enabled","production","declarations","providers","bootstrap","AuthSourceModalComponent","_dialog","_data","event","source_types","name","auth_source","item","active_type","type","initialiseForm","data","authority_id","domain","SAMLAuthSources","LDAPAuthSources","OAuthSources","form","markAllAsTouched","valid","loading","save","emit","reason","metadata","trigger","notifySuccess","is_new","close","err","notifyError","message","ChangelogModalComponent","changelog","CONFIRM_METADATA","height","width","maxHeight","maxWidth","ConfirmModalComponent","content","action","icon","ItemCreateUpdateModalComponent","_dialog_ref","details","external_save","subscriptions","forEach","sub","index","subscription","edit","generateFormData","Hotkeys","listen","submit","disableClose","value","result","controls","settings","newSettings","setting_string","new_settings","EngineSettings","parent_id","encryption_level","storePendingChange","service","_name","readonly","MetadataDetailsModalComponent","validator","description","setValue","updateDetails","OVERLAYS","SharedOverlaysModule","SelectItemModalComponent","service_name","SystemLogModalComponent","sys_id","SystemLogs","query","limit","list","logs","sort","a","b","created","TriggerActionModalComponent","action_type","method_call","updateMailers","updateFunctions","clearPendingChanges","mailers","actions","new_mailer","emails","old_mailer","JSON","stringify","findIndex","a_mailer","splice","push","functions","old_function","fn","system","TriggerConditionModalComponent","condition","condition_type","updateComparisons","updateTimeDependents","old_values","conditions","comparisons","new_value","left","operator","right","old_value","cmp","updated_conditions","time_dependents","time_type","time","toFixed","cron","ViewModuleStateModalComponent","device_classes","generateModuleBindings","updateState","counter","devices","device","custom_name","class_name","class_parts","split","Systems","state","pre_state","parse","Object","key","undefined","ViewResponseModalComponent","ApplicationService","_app_ref","_zone","_title","_router","_cache","_settings","_composer","_analytics","_hotkeys","_engine_comments","_engine_logs","_engine_search","_engine_stats","_engine_system_logs","_users","_snackbar","_route_trail","_subjects","_observers","parent","set","isStable","pipe","_","subscribe","run","_stable","log","setupCache","waitForSettings","get","on_action","duration","snackbar_ref","open","panelClass","afterDismissed","unsub","dismiss","onAction","msg","console","debug","notify","error","warn","info","args","stream","force","route","Array","url","navigate","queryParams","length","pop","getValue","next","asObservable","initialised","setup","init","setupComposer","setting","load","dsn","auth","authority","sentry_dsn","loadActiveUser","_initialised","window","application","protocol","location","host","hostname","port","use_domain","origin","mock","login_locally","search","indexOf","config","scope","auth_uri","token_uri","redirect_uri","handle_login","local_login","Users","isEnabled","activateUpdate","available","current","hash","setInterval","checkForUpdate","notifyInfo","reload","applications","oauth_sources","saml_sources","ldap_sources","domains","clusters","drivers","modules","repositories","systems","triggers","zones","app_name","title_suffix","setTitle","getTitle","api_endpoint","providedIn","BaseAPIService","http","listing","_subscribers","_promises","_compare","_list_filter","_singular","_api_route","timeout","engine","endpoint","engine_endpoint","toLowerCase","filterFn","reduce","i","find","email","query_params","update_list","cache","reject","d","map","process","results","new_item","updateList","prefill","form_data","post","analyticsEvent","task_name","post_data","_task","delay","stopPoll","_poll","show","interval","complete","put","removeItem","remove_ids","label","Analytics","raw_item","old_list","compareFn","new_list","mixed_list","found","BackofficeCommentsService","unsubscribe","fields","task","output_list","processReplies","cmt","comment","channel_id","user_id","user","master_id","reply_to_id","in_reply_to_id","replies","likes","other","dislikes","created_at","updated_at","q","cmt_list","BackofficeLogsService","notes","suspected","persisted","installed_device","ip","system_id","display","started","format","ended","ended_at","last_checked","BackofficeSearchService","rs","rj","BackofficeStatsService","period","period_name","histogram","start","period_start","BackofficeSystemLogsService","Logs","BackofficeUsersService","http_unauth","singular","can_create","can_edit","_filter_fn","predicate","filter","setUser","dark_mode","token","expiry","add","valueOf","localStorage","client_id","hashStr","setItem","headers","append","res","sessionStorage","clientId","authorise","status","logout","ref","componentInstance","ui_theme","getItem","matchMedia","matches","document","body","classList","remove","TERMINAL_COLOURS","fatal","EngineDebugService","_events","_event_obs","_bound_modules","_module_names","realtime","debug_events","mod","mod_id","event_list","module_name","parts","options","sys","_enabled","ignore","level","toUpperCase","join","INVALID_STANDALONE_KEYS","HotkeysService","keydown_states","keydown_observers","combo_end","registered_combos","addEventListener","activeElement","tagName","mapKey","last_down","setKeyState","preventDefault","combo","combination","validCombination","last_key","updateCombinationEndList","count","presses","total","v","replace","key_list","non_meta","SentryService","originalError","SettingsService","api","local","session","_app_name","now","build","built","isSame","core_version","version","loadFromFile","loadStore","app","colors","shift","store","file","tries","file_name","BaseRootComponent","_route","paramMap","params","has","loading_item","decodeURIComponent","loadItem","setActiveItem","show_sidebar","newItem","editItem","deleteItem","toggleSidebar","relativeTo","tab","queryParamsHandling","changeEvents","loadValues","loadSettings","template","styles","ContextMenuComponent","_element","offset_x","offset_y","position","top","clientY","clientX","openMenu","updatePosition","setTimeout","container","nativeElement","box","getBoundingClientRect","innerHeight","bottom","innerWidth","DateFieldComponent","from_time","date","_onChange","show_tooltip","_onTouch","clearTimeout","startOf","to_time","endOf","useExisting","multi","ItemSearchFieldComponent","min_length","search$","search_results$","search_str","match","exclude","item_list","changes","active_item","resetSearchString","detail","role","Service","uri","Logic","control_system_id","ObjectListFieldComponent","active_list","SettingsFieldComponent","lang","settings_string","createEditor","editor","updateOptions","readOnly","language","resize","resizeEditor","dispose","element","monaco","create","fontFamily","lineNumbers","roundedSelection","scrollBeyondLastLine","theme","onDidChangeModelContent","SystemExecFieldComponent","executable","methods","param_list","loadModules","offset","Modules","running","active_module","unshift","functionList","setMethod","active_method","checkFields","fields_valid","arg","arg_list","toArray","active_field","field_pos","selectionEnd","field_value","function_value","right_arrow","last_location","el","focus","selectionStart","backspace","left_arrow","processArguments","method","execute","viewDetails","response","order","arity","len","Math","abs","argument_list","a_method","TimeFieldComponent","step","no_past_times","show_select","_time_options","generateAvailableTimes","hour","minute","select_field","openedChange","datestamp","show_past","blocks","isAfter","ceil","end","isBefore","option","localeCompare","DebugOutputComponent","_renderer","show_content","events","terminal_string","clearEvents","dir","_resize_start","MouseEvent","resizeMove","_content_el","point","diff","x","y","is_listening","animations","ApplicationFormComponent","DomainFormComponent","DriverFormComponent","role_types","SSH","Device","Websocket","driver_list","commit_list","repo$","driver$","driver_list$","repo_id","loading_drivers","Repositories","listDrivers","driver","commit_list$","driver_id","loading_commits","listCommits","base_repo","commit","base_commit","subject","extra","subtract","fromNow","initDriver","repo","repository_id","promise","toPromise","base_driver","driverDetails","descriptive_name","generic_name","default_port","tcp_port","udp_port","default_uri","uri_base","default_settings","discovery_service","updateDriverList","updateCommitList","LdapSourceFormComponent","auth_methods","ModuleFormComponent","Drivers","OauthSourceFormComponent","token_methods","auth_schemes","info_mapping_list","info_mappings","Engine","Remote","mappings","pair","RepositoryFormComponent","repo_types","Driver","Interface","SamlSourceFormComponent","attribute_statement_mappings","runtime_param_list","attribute_statements","idp_sso_target_url_runtime_params","mapping","SettingsFormComponent","saving","used_settings","available_levels","levels","Support","Admin","saveAll","clearChanges","merge","NeverDisplay","processSettings","initForm","has_errors","promises","all","edited_count","settings0","settings1","settings2","settings3","settings4","valueChanges","processed_settings","processSetting","generateMergedSettings","is_admin","is_support","obj","toJSON","local_settings","remote_settings","merge_settings","merged_settings","concat","strict","sys_admin","support","errors","active","SystemFormComponent","encryption_levels","separators","feature_list","input","trim","existing_feature","Zones","SystemTriggerFormComponent","TriggerActionFormComponent","new_email","action_types","email_list","chip_list","errorState","$event","TriggerConditionComparisonFormComponent","module_list","left_status_variables","right_status_variables","rhs_type","left_side","right_side","right_var_type","compare_types","EQ","NEQ","GT","GTE","LT","LTE","AND","OR","XOR","loadSystemModules","side","mod_name","var_map","connected","addExistingStatusVariables","mod_list","module_class","addExistingModules","loadSystemStatusVariables","TriggerConditionTimeFormComponent","repeat_period","cron_period","minutes_in_hour","hours_in_day","days_of_week","fill","day","days_of_month","months_of_year","month","cron_minute","cron_hour","cron_hour_period","cron_day","cron_date","cron_month","is_cron","loadCronTab","current_cron","day_of_week","cron_str","cron_tab","TriggerConditionFormComponent","condition_types","TriggerFormComponent","UserFormComponent","ZoneFormComponent","zone","updateZone","tag_list","existing_tag","parent_zone","IconComponent","ItemDisplayComponent","has_change","tabs","changeTab","direction","execCommand","content_el","scrollTop","ForgotPassFormComponent","LOGIN_COMPONENTS","forgot","submitted","LoginFormComponent","LoginComponent","remembered_name","login_form","username","password","remember","env","logo","form_values","login","setErrors","invalid","RegisterFormComponent","SearchbarComponent","dictation","clearable","placeholder","filterChange","blur","model","win","speech","SpeechRecognition","webkitSpeechRecognition","recognition","stop","dictate","self","continuous","interimResults","onresult","transcript","onerror","checkLimitations","substr","focusInput","SidebarComponent","heading","searchChange","items","replaceActiveItem","changeSelected","atBottom","is_initialised","last_check","previousValue","currentValue","searching","is_stale","viewport","getRenderedRange","getDataLength","last_total","scrollIntoView","constructor","elementRef","TerminalComponent","terminal","ngOnDestroy","background","terminal_element","resizeTerminal","updateTerminalContents","clear","container_el","font_size","getOption","line_height","floor","new_content","lines","line","writeln","scrollToBottom","ANIMATION_SHOW_ENTER_LEAVE","opacity","ANIMATION_SHOW_CONTRACT_EXPAND","ANIMATION_SHOW_CONTRACT_EXPAND_BIDIR","BaseClass","_timers","_intervals","_subscriptions","Function","clearInterval","BaseDirective","hasOwnProperty","AuthorisedAdminGuard","can_activate","segments","can_load","MockBackend","api_route","DESK_OFFSET","scale","city","predefined_users","backend","control","handlers","out","color","dstate","nodes","nstate","update","astate","authsources","asstate","users","ustate","zstate","sysstate","tstate","system_triggers","depstate","mstate","loaded","loadSearch","stats","stat_state","tests","tests_state","discovery","discovery_state","clr","COLOURS","hasColours","doc","documentMode","test","navigator","userAgent","handler","callback","fragment","min","slice","k","MockApplicationsBackend","loadList","random","jobDescriptor","owner_id","dom","jobTitle","scopes","secret","skip_authorization","uid","unix","setupBasicHandlers","owner","MockAuthSourcesBackend","generateOAuthAuthSource","auth_sources","generateSAMLAuthSource","generateLDAPAuthSource","domain_list","idx","client_secret","site","authorize_url","token_method","auth_scheme","token_url","raw_info_url","num","auth_method","base","bind_dn","issuer","name_identifier_format","uid_attribute","assertion_consumer_service_url","idp_sso_target_url","idp_cert","idp_cert_fingerprint","attribute_service_name","request_attributes","idp_slo_target_url","slo_default_relay_state","initialiseGlobals","BaseMockBackend","state_obs","base_url","id_prefix","route_params","handleUpdate","updateOtherEndpoints","xhr","XMLHttpRequest","onload","statusText","send","MockDiscoveryBackend","loadDrivers","department","paragraph","ignore_connected","generateSettings","types","sentence","MockDomainsBackend","domainName","login_url","logout_url","internals","MockDriversBackend","funcs","fcount","acount","optional","j","MockModulesBackend","generateIP","firstName","control_system","edge_id","edge","tls","udp","makebreak","setActiveState","address","selected_module","mod_class","MockNodesBackend","admins","failover","failover_active","failover_time","host_origin","online","server_port","startup_time","window_length","window_start","generateMockRepository","overrides","company","companyName","product","productName","folder_name","commit_hash","MOCK_REPOSITORIES","MOCK_DRIVERS","commits","updated_item","a_repo","a_driver","author","lastName","MOCK_SETTINGS","handlerCreateEdit","old_version","MockStatsBackend","loadData","createHistogram","avg","max","sum","important","debounce_period","states","MockSystemTriggersBackend","binding","trigger_id","override","trigger_count","triggered","zone_id","webhook_secret","MockSystemsBackend","zone_list","c","bookable","capacity","features","installed_ui_devices","support_url","generateMockSystem","opt","module_id","output","indent","System","MockTestsBackend","loadTests","documentation","klass","MockTriggersBackend","generateTriggerComparison","generateTriggerTimeDependant","generateTriggerFunction","generateTriggerMailer","OP_MAP","n","CRON","AT","MockUsersBackend","loadUsers","phone","toString","avatar_url","organisation_id","organisation_name","MockZonesBackend","loadZones","tags","trigger_data","DOMAIN","API","systemData","Demo","volume","mute","views","$play","$stop","$volume","$mute","$state","initMessages","messages","Slack","threads","text","ts","DateFromPipe","hours","days","months","years","DriverFormatPipe","FormatListPipe","FORM_COMPONENTS","COMPONENTS","PIPES","ENTRY_COMPONENT","MATERIAL_MODULES","SharedContentModule","forChild","toQueryString","str","calculateModuleIndex","modules_with_class","generateApplicationFormFields","required","generateOAuthSourceForm","generateSAMLSourceForm","generateLDAPSourceForm","generateDomainFormFields","generateDriverFormFields","generateModuleFormFields","resetModuleFormValidators","setValidators","pattern","generateRepositoryFormFields","repository","validateYAML","yaml","URL_PATTERN","generateSystemsFormFields","map_id","generateTriggerFormFields","enable_webhook","generateTriggerSettingsFormFields","activated_count","validateCompare","generateTriggerConditionForm","validateEmailList","generateTriggerActionForm","validateMatch","group","generateUserFormFields","staff_id","confirm_password","updateValueAndValidity","generateZoneFormFields","getItemWithKeys","isMobileModule","r","isMobileSafari","agent","isAndroidChrome","randomInt","padZero","unique","array","humaniseDuration","short","h","filterList","filters","f","word","regex","RegExp","match_count","match_index","field_list","matched","field","changed","tokens","matchToHighlight","timeToDate","mergeYAMLSettings","dest","source","dest_obj","source_obj","merged_obj","timeFormatString","is24HourTime","Date","localeString","toLocaleTimeString","numberToPosition","mod_ten","copyToClipboard","createElement","setAttribute","style","appendChild","selected","getSelection","rangeCount","getRangeAt","select","removeChild","removeAllRanges","addRange","eventToPoint","touches","validateIpAddress","ctrl","validateURI","validateURL","validateJSONString","json","GlobalSearchComponent","route_map","query_string","queryEndpoints","apply","itemType","afterNavigate","change","results_list","query_str","list_el","scrollHeight","clientHeight","loadMoreItems","transform","SHELL_COMPONENTS","SidebarMenuComponent","showChange","menu_items","metrics","needs_role","new_index","TopbarHeaderComponent","show_menu_change","extra_action_list","link","show_menu","toggleMenu","stopPropagation","APP_COMPONENTS","APP_ENTRY_COMPONENTS","AppShellComponent","year","environment","VERSION","bootstrapModule"],"mappings":"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;AADJ,S;AAGqB,Q;;;;;;;;;;;;;;;;;;ACJ3B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { AppShellComponent } from './shell/shell.component';\nimport { AuthorisedAdminGuard } from './shared/guards/authorised-admin.guard';\n\nconst routes: Routes = [\n    {\n        path: '',\n        component: AppShellComponent,\n        children: [\n            {\n                path: 'modules',\n                loadChildren: () =>\n                    import('./shell/modules/modules.module').then(m => m.AppModulesModule)\n            },\n            {\n                path: 'domains',\n                loadChildren: () =>\n                    import('./shell/domains/domains.module').then(m => m.AppDomainsModule)\n            },\n            {\n                path: 'drivers',\n                loadChildren: () =>\n                    import('./shell/drivers/drivers.module').then(m => m.AppDriversModule)\n            },\n            {\n                path: 'metrics',\n                loadChildren: () =>\n                    import('./shell/metrics/metrics.module').then(m => m.AppMetricsModule)\n            },\n            {\n                path: 'systems',\n                loadChildren: () =>\n                    import('./shell/systems/systems.module').then(m => m.AppSystemsModule)\n            },\n            {\n                path: 'repositories',\n                loadChildren: () =>\n                    import('./shell/repositories/repositories.module').then(\n                        m => m.AppRepositoriesModule\n                    )\n            },\n            {\n                path: 'triggers',\n                loadChildren: () =>\n                    import('./shell/triggers/triggers.module').then(m => m.AppTriggersModule)\n            },\n            {\n                path: 'users',\n                loadChildren: () => import('./shell/users/users.module').then(m => m.AppUsersModule)\n            },\n            {\n                path: 'zones',\n                loadChildren: () => import('./shell/zones/zones.module').then(m => m.AppZonesModule)\n            },\n            {\n                path: 'admin',\n                loadChildren: () =>\n                    import('./shell/engine/engine.module').then(m => m.AppEngineModule),\n                canLoad: [AuthorisedAdminGuard]\n            },\n            { path: '**', redirectTo: 'systems' }\n        ]\n    },\n    { path: '**', redirectTo: 'systems' }\n];\n\n@NgModule({\n    imports: [RouterModule.forRoot(routes, { useHash: true })],\n    exports: [RouterModule]\n})\nexport class AppRoutingModule {}\n","import { Component, ViewEncapsulation, OnInit } from '@angular/core';\nimport { ApplicationService } from './services/app.service';\n\n@Component({\n    selector: 'app-root',\n    templateUrl: './app.component.html',\n    styleUrls: ['./styles/app.component.scss', './styles/custom-element.styles.scss', './styles/native-element.styles.scss'],\n    encapsulation: ViewEncapsulation.None\n})\nexport class AppComponent implements OnInit {\n\n    constructor(private _service: ApplicationService) {\n\n    }\n\n    public ngOnInit(): void {\n        this._service.title = 'Loading...';\n    }\n}\n","<div class=\"app\">\n    <router-outlet></router-outlet>\n</div>\n","import { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { NgModule, ErrorHandler } from '@angular/core';\nimport { HttpClientModule } from '@angular/common/http';\nimport { ServiceWorkerModule } from '@angular/service-worker';\nimport { FormsModule } from '@angular/forms';\n\nimport { AGoogleAnalyticsModule } from '@acaprojects/ngx-google-analytics';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { environment } from '../environments/environment';\n\nimport { SharedOverlaysModule } from './overlays/overlays.module';\nimport { SharedContentModule } from './shared/shared.module';\nimport { SentryService } from './services/sentry.service';\n\nimport { APP_COMPONENTS } from './shell';\n\nimport './shared/mocks';\n\n@NgModule({\n    declarations: [\n        AppComponent,\n        ...APP_COMPONENTS\n\n    ],\n    imports: [\n        BrowserModule,\n        BrowserAnimationsModule,\n        AppRoutingModule,\n        ServiceWorkerModule.register('ngsw-worker.js', { enabled: environment.production }),\n        HttpClientModule,\n        FormsModule,\n        AGoogleAnalyticsModule,\n        SharedOverlaysModule,\n        SharedContentModule\n    ],\n    providers: [{ provide: ErrorHandler, useClass: SentryService }],\n    bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Component, OnInit, Inject, Output, EventEmitter } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { FormGroup } from '@angular/forms';\nimport {\n    EngineDomain,\n    EngineOAuthSource,\n    EngineLDAPSource,\n    EngineSAMLSource\n} from '@placeos/ts-client';\n\nimport { BaseDirective } from 'src/app/shared/globals/base.directive';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { DialogEvent, Identity } from 'src/app/shared/utilities/types.utilities';\nimport {\n    generateOAuthSourceForm,\n    generateLDAPSourceForm,\n    generateSAMLSourceForm\n} from 'src/app/shared/utilities/data/auth-sources.utilities';\n\nexport interface AuthSourceModalData {\n    /** Domain the auth source is associated with */\n    domain: EngineDomain;\n    /** Item to add/update the trigger on */\n    auth_source?: EngineOAuthSource | EngineLDAPSource | EngineSAMLSource;\n}\n\nexport type AuthSourceTypes = 'oauth' | 'saml' | 'ldap';\n\n@Component({\n    selector: 'app-auth-source-modal',\n    templateUrl: './auth-source-modal.component.html',\n    styleUrls: ['./auth-source-modal.component.scss']\n})\nexport class AuthSourceModalComponent extends BaseDirective implements OnInit {\n    /** Emitter for events on the modal */\n    @Output() public event = new EventEmitter<DialogEvent>();\n    /** Whether actions are loading */\n    public loading: boolean;\n    /** Form fields for trigger condition */\n    public form: FormGroup;\n    /** Item */\n    public item: EngineOAuthSource | EngineLDAPSource | EngineSAMLSource;\n    /** List of available authentication sources */\n    public source_types: Identity[] = [\n        { id: 'oauth', name: 'OAuth' },\n        { id: 'ldap', name: 'LDAP' },\n        { id: 'saml', name: 'SAML2' }\n    ];\n\n    public active_type: AuthSourceTypes;\n\n    /** Whether the triggers is new or not */\n    public get is_new(): boolean {\n        return !this._data.auth_source;\n    }\n\n    public get type(): AuthSourceTypes {\n        return this.item instanceof EngineSAMLSource\n            ? 'saml'\n            : this.item instanceof EngineLDAPSource\n            ? 'ldap'\n            : 'oauth';\n    }\n\n    constructor(\n        private _dialog: MatDialogRef<AuthSourceModalComponent>,\n        @Inject(MAT_DIALOG_DATA) private _data: AuthSourceModalData,\n        private _service: ApplicationService\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        if (this._data.auth_source) {\n            this.item = this._data.auth_source;\n            this.active_type = this.type;\n        }\n        this.initialiseForm();\n    }\n\n    /**\n     * Set the type of auth source to create\n     * @param type Type of auth source\n     */\n    public setType(type: AuthSourceTypes) {\n        const data = { authority_id: this._data.domain.id };\n        switch (type) {\n            case 'saml':\n                this.item = new EngineSAMLSource(this._service.SAMLAuthSources, data);\n                break;\n            case 'ldap':\n                this.item = new EngineLDAPSource(this._service.LDAPAuthSources, data);\n                break;\n            default:\n                this.item = new EngineOAuthSource(this._service.OAuthSources, data);\n                break;\n        }\n        this.initialiseForm();\n    }\n\n    /**\n     * Create item if new or update if exsiting\n     */\n    public save() {\n        this.form.markAllAsTouched();\n        if (!this.form.valid) {\n            return;\n        }\n        this.loading = true;\n        (this.item as any).save().then(\n            item => {\n                this.event.emit({ reason: 'done', metadata: { trigger: item } });\n                this._service.notifySuccess(\n                    `Successfully ${this.is_new ? 'added' : 'updated'} auth source`\n                );\n                this._dialog.close();\n            },\n            err => {\n                this.loading = false;\n                this._service.notifyError(\n                    `Error ${\n                        this.is_new ? 'adding' : 'updating'\n                    } auth source. Error: ${err.message || err}`\n                );\n            }\n        );\n    }\n\n    /**\n     * Generate the form fields for the active item type\n     */\n    private initialiseForm() {\n        if (!this.item) {\n            return;\n        }\n        if (this.item instanceof EngineOAuthSource) {\n            this.form = generateOAuthSourceForm(this.item).form;\n        } else if (this.item instanceof EngineSAMLSource) {\n            this.form = generateSAMLSourceForm(this.item).form;\n        } else if (this.item instanceof EngineLDAPSource) {\n            this.form = generateLDAPSourceForm(this.item).form;\n        }\n    }\n}\n","<header>\n    <h3 mat-dialog-title>{{!is_new ? 'Edit' : 'New'}} Auth Source</h3>\n    <button mat-icon-button mat-dialog-close>\n        <app-icon [icon]=\"{ type: 'icon', class: 'backoffice-cross' }\"></app-icon>\n    </button>\n</header>\n<mat-dialog-content>\n    <div class=\"body\" *ngIf=\"!loading; else load_state\">\n        <div class=\"field type\" *ngIf=\"is_new\">\n            <label for=\"type\">Auth Source Type: </label>\n            <mat-form-field appearance=\"outline\">\n                <mat-select name=\"type\" [(ngModel)]=\"active_type\" (ngModelChange)=\"setType($event)\" placeholder=\"Select auth type\">\n                    <mat-option *ngFor=\"let type of source_types\" [value]=\"type.id\">\n                        {{ type.name }}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n        </div>\n        <ng-container *ngIf=\"item\">\n            <ng-container [ngSwitch]=\"type\">\n                <ng-container *ngSwitchCase=\"'saml'\">\n                    <saml-source-form [form]=\"form\"></saml-source-form>\n                </ng-container>\n                <ng-container *ngSwitchCase=\"'ldap'\">\n                    <ldap-source-form [form]=\"form\"></ldap-source-form>\n                </ng-container>\n                <ng-container *ngSwitchDefault>\n                    <oauth-source-form [form]=\"form\"></oauth-source-form>\n                </ng-container>\n            </ng-container>\n        </ng-container>\n    </div>\n</mat-dialog-content>\n<mat-dialog-actions *ngIf=\"!loading\">\n    <button mat-button class=\"inverse\" mat-dialog-close>Cancel</button>\n    <button mat-button type=\"button\" [disabled]=\"!active_type\" (tapped)=\"save()\">\n        {{ is_new ? 'Save' : 'Add' }}\n    </button>\n</mat-dialog-actions>\n<ng-template #load_state>\n    <div class=\"body\">\n        <div class=\"info-block\">\n            <div class=\"icon\">\n                <a-spinner circle-ring color=\"#000\"></a-spinner>\n            </div>\n            <div class=\"text\">Processing request...</div>\n        </div>\n    </div>\n</ng-template>\n","import { Component, Inject } from '@angular/core';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\n\nimport { BaseDirective } from 'src/app/shared/globals/base.directive';\n\nexport interface ChangelogModalData {\n    changelog: string;\n}\n\n@Component({\n    selector: 'changelog-modal',\n    templateUrl: './changelog-modal.template.html',\n    styleUrls: ['./changelog-modal.styles.scss']\n})\nexport class ChangelogModalComponent extends BaseDirective {\n    /** Whether the changelog is loading */\n    public loading: boolean;\n    /** Changelog Markdown */\n    public item: string;\n\n    constructor(@Inject(MAT_DIALOG_DATA) private _data: ChangelogModalData) {\n        super();\n    }\n\n    /** HTML string for rendering the change log */\n    public get changelog(): string {\n        return this._data.changelog || '';\n    }\n}\n","<header>\n    <h3 mat-dialog-title>Changelog</h3>\n    <button mat-icon-button mat-dialog-close>\n        <app-icon [icon]=\"{ type: 'icon', class: 'backoffice-cross' }\"></app-icon>\n    </button>\n</header>\n<mat-dialog-content>\n    <div\n        class=\"body markdown\"\n        *ngIf=\"changelog; else empty_state\"\n        [innerHTML]=\"changelog | safe:'html'\"\n    ></div>\n    <ng-template #empty_state>\n        <div class=\"body\">\n            <div class=\"info-block\">\n                <div class=\"icon\">\n                    <i class=\"backoffice-cross\"></i>\n                </div>\n                <div class=\"text\">No changelog</div>\n            </div>\n        </div>\n    </ng-template>\n</mat-dialog-content>\n","import { Component, OnInit, Output, EventEmitter, Inject } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\n\nimport { ApplicationIcon } from '../../shared/utilities/settings.interfaces';\nimport { DialogEvent } from '../../shared/utilities/types.utilities';\nimport { BaseDirective } from 'src/app/shared/globals/base.directive';\n\nexport interface ConfirmModalData {\n    /** Title of the modal */\n    title: string;\n    /** Contents of the modal */\n    content: string;\n    /** Text displaed on the confirmation button */\n    action?: string;\n    /** Icon to display on the modal */\n    icon: ApplicationIcon;\n}\n\nexport const CONFIRM_METADATA = {\n    height: 'auto',\n    width: '24em',\n    maxHeight: 'calc(100vh - 2em)',\n    maxWidth: 'calc(100vw - 2em)'\n};\n\n@Component({\n    selector: 'confirm-modal',\n    templateUrl: './confirm-modal.component.html',\n    styleUrls: ['./confirm-modal.component.scss']\n})\nexport class ConfirmModalComponent extends BaseDirective implements OnInit {\n    /** Emitter for user action on the modal */\n    @Output() public event = new EventEmitter<DialogEvent>();\n    /** Title of the confirm modal */\n    public title: string;\n    /** Body of the confirm modal */\n    public content: string;\n    /** Display text on the confirm button */\n    public action: string;\n    /** Display icon properties */\n    public icon: ApplicationIcon;\n    /** Loading state */\n    public loading: string;\n\n    constructor(\n        private _dialog: MatDialogRef<ConfirmModalComponent>,\n        @Inject(MAT_DIALOG_DATA) private _data: ConfirmModalData\n    ) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        const data = this._data;\n        if (data) {\n            this.title = data.title || 'Confirm';\n            this.content = data.content || 'Confirm';\n            this.action = data.action || 'Ok';\n            this.icon = data.icon;\n        }\n    }\n\n    /**\n     * User confirmation of the content of the modal\n     */\n    public accept() {\n        this.event.emit({ reason: 'done' });\n    }\n}\n","<header>\n    <h3 mat-dialog-title>{{ title || 'Confirm' }}</h3>\n</header>\n<mat-dialog-content>\n    <div class=\"body\" *ngIf=\"!loading; else load_state\">\n        <app-icon [icon]=\"icon\"></app-icon>\n        <div class=\"content\">\n            <p [innerHTML]=\"content || 'Are you sure?'\"></p>\n        </div>\n    </div>\n</mat-dialog-content>\n<mat-dialog-actions *ngIf=\"!loading\">\n    <button mat-button class=\"inverse\" mat-dialog-close>Cancel</button>\n    <button mat-button name=\"accept\" (tapped)=\"accept()\">{{ action || 'Ok' }}</button>\n</mat-dialog-actions>\n<ng-template #load_state>\n    <div class=\"body\">\n        <div class=\"info-block\">\n            <div class=\"icon\">\n                <a-spinner circle-ring></a-spinner>\n            </div>\n            <div class=\"text\">{{ loading }}</div>\n        </div>\n    </div>\n</ng-template>\n","<header>\n    <h3 mat-dialog-title>{{ item && edit ? 'Edit' : 'New' }} {{ name }}</h3>\n    <button mat-icon-button mat-dialog-close *ngIf=\"!loading\">\n        <app-icon [icon]=\"{ type: 'icon', class: 'backoffice-cross' }\"></app-icon>\n    </button>\n</header>\n<mat-dialog-content>\n    <div class=\"body\" *ngIf=\"!loading; else load_state\">\n        <ng-container [ngSwitch]=\"item_type\">\n            <ng-container *ngSwitchCase=\"'repository'\">\n                <repository-form [form]=\"form\"></repository-form>\n            </ng-container>\n            <ng-container *ngSwitchCase=\"'trigger'\">\n                <trigger-form [form]=\"form\"></trigger-form>\n            </ng-container>\n            <ng-container *ngSwitchCase=\"'system-trigger'\">\n                <system-trigger-form [form]=\"form\"></system-trigger-form>\n            </ng-container>\n            <ng-container *ngSwitchCase=\"'application'\">\n                <application-form [form]=\"form\"></application-form>\n            </ng-container>\n            <ng-container *ngSwitchCase=\"'domain'\">\n                <domain-form [form]=\"form\"></domain-form>\n            </ng-container>\n            <ng-container *ngSwitchCase=\"'user'\">\n                <user-form [form]=\"form\"></user-form>\n            </ng-container>\n            <ng-container *ngSwitchCase=\"'driver'\">\n                <driver-form [form]=\"form\"></driver-form>\n            </ng-container>\n            <ng-container *ngSwitchCase=\"'zone'\">\n                <zone-form [form]=\"form\"></zone-form>\n            </ng-container>\n            <ng-container *ngSwitchCase=\"'module'\">\n                <module-form [form]=\"form\" [readonly]=\"readonly\"></module-form>\n            </ng-container>\n            <ng-container *ngSwitchDefault>\n                <system-form [form]=\"form\"></system-form>\n            </ng-container>\n        </ng-container>\n    </div>\n</mat-dialog-content>\n<mat-dialog-actions *ngIf=\"!loading\">\n    <button mat-button class=\"inverse\" mat-dialog-close>Cancel</button>\n    <button mat-button type=\"submit\" (tapped)=\"submit()\">{{ item ? 'Save' : 'Add' }} [S]</button>\n</mat-dialog-actions>\n<ng-template #load_state>\n    <div class=\"body\">\n        <div class=\"info-block\">\n            <div class=\"icon\">\n                <a-spinner circle-ring color=\"#000\"></a-spinner>\n            </div>\n            <div class=\"text\">Processing request...</div>\n        </div>\n    </div>\n</ng-template>\n","import { Component, Inject, EventEmitter, Output, OnInit } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport {\n    EngineResource,\n    EngineSystem,\n    EngineModule,\n    EngineZone,\n    EngineDriver,\n    EngineUser,\n    EngineDomain,\n    EngineApplication,\n    EngineSettings,\n    EngineTrigger,\n    EngineRepository,\n    EncryptionLevel\n} from '@placeos/ts-client';\nimport { FormGroup } from '@angular/forms';\n\nimport { BaseDirective } from 'src/app/shared/globals/base.directive';\nimport { DialogEvent, EngineServiceLike, Identity } from 'src/app/shared/utilities/types.utilities';\nimport {\n    generateSystemsFormFields,\n    FormDetails\n} from 'src/app/shared/utilities/data/systems.utilities';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { generateModuleFormFields } from 'src/app/shared/utilities/data/modules.utilities';\nimport { generateZoneFormFields } from 'src/app/shared/utilities/data/zones.utilites';\nimport { generateDriverFormFields } from 'src/app/shared/utilities/data/drivers.utilities';\nimport { generateUserFormFields } from 'src/app/shared/utilities/data/users.utilities';\nimport { generateDomainFormFields } from 'src/app/shared/utilities/data/domains.utilities';\nimport { generateApplicationFormFields } from 'src/app/shared/utilities/data/applications.utilities';\nimport {\n    generateTriggerFormFields,\n    generateTriggerSettingsFormFields\n} from 'src/app/shared/utilities/data/triggers.utilities';\nimport { generateRepositoryFormFields } from 'src/app/shared/utilities/data/repositories.utilities';\n\nexport interface CreateEditModalData<T extends Identity = any> {\n    /** Service associated with the item being created/edited */\n    service: EngineServiceLike;\n    /** Item being worked on */\n    item: T;\n    /** Form fields for item */\n    form?: any[];\n    /** Name of the type of item being worked on */\n    name?: string;\n    /** Whether parts of the form are readonly */\n    readonly?: string;\n    /** Whether saving the form details will be handled outside the modal */\n    external_save?: boolean;\n}\n\n@Component({\n    selector: 'item-modal',\n    templateUrl: './item-modal.component.html',\n    styleUrls: ['./item-modal.component.scss']\n})\nexport class ItemCreateUpdateModalComponent extends BaseDirective implements OnInit {\n    /** Emitter for user action on the modal */\n    @Output() public event = new EventEmitter<DialogEvent>();\n    /** Whether the item is being editing */\n    public edit: boolean;\n    /** Item to edit */\n    public item: EngineResource<any>;\n    /** Saved version of the item */\n    public result: any;\n    /** List of the form fields needed for the item */\n    public form: FormGroup;\n    /** Loading status for the item request is being processed */\n    public loading: string;\n\n    public get name(): string {\n        return this._data.service.name || this._data.service._name;\n    }\n\n    public get readonly(): boolean {\n        return !!this._data.readonly;\n    }\n\n    public get item_type(): string {\n        if (this.item instanceof EngineSystem) {\n            return 'system';\n        } else if (this.item instanceof EngineModule) {\n            return 'module';\n        } else if (this.item instanceof EngineZone) {\n            return 'zone';\n        } else if (this.item instanceof EngineDriver) {\n            return 'driver';\n        } else if (this.item instanceof EngineUser) {\n            return 'user';\n        } else if (this.item instanceof EngineDomain) {\n            return 'domain';\n        } else if (this.item instanceof EngineApplication) {\n            return 'application';\n        } else if (this.item instanceof EngineTrigger && this._data.external_save) {\n            return 'system-trigger';\n        } else if (this.item instanceof EngineTrigger) {\n            return 'trigger';\n        } else if (this.item instanceof EngineRepository) {\n            return 'repository';\n        }\n    }\n\n    constructor(\n        private _dialog_ref: MatDialogRef<ItemCreateUpdateModalComponent>,\n        @Inject(MAT_DIALOG_DATA) private _data: CreateEditModalData,\n        private _service: ApplicationService\n    ) {\n        super();\n    }\n\n    /**\n     * Generate the form fields for the item being handled\n     */\n    public generateFormData(): FormGroup {\n        let details: FormDetails = null;\n        if (this.item instanceof EngineSystem) {\n            details = generateSystemsFormFields(this.item);\n        } else if (this.item instanceof EngineModule) {\n            details = generateModuleFormFields(this.item);\n        } else if (this.item instanceof EngineZone) {\n            details = generateZoneFormFields(this.item);\n        } else if (this.item instanceof EngineDriver) {\n            details = generateDriverFormFields(this.item);\n        } else if (this.item instanceof EngineUser) {\n            details = generateUserFormFields(this.item);\n        } else if (this.item instanceof EngineDomain) {\n            details = generateDomainFormFields(this.item);\n        } else if (this.item instanceof EngineApplication) {\n            details = generateApplicationFormFields(this.item);\n        } else if (this.item instanceof EngineTrigger && this._data.external_save) {\n            details = generateTriggerSettingsFormFields(this.item);\n        } else if (this.item instanceof EngineTrigger) {\n            details = generateTriggerFormFields(this.item);\n        } else if (this.item instanceof EngineRepository) {\n            details = generateRepositoryFormFields(this.item);\n        }\n        if (details) {\n            details.subscriptions.forEach((sub, index) =>\n                this.subscription(`form_field_${index}`, sub)\n            );\n            return details.form;\n        }\n        return new FormGroup({});\n    }\n\n    public ngOnInit(): void {\n        this.item = this._data.item;\n        this.edit = !!this._data.item.id;\n        this.form = this.generateFormData();\n        this.subscription(\n            'delete_item',\n            this._service.Hotkeys.listen(['KeyS'], () => this.submit())\n        );\n    }\n\n    /**\n     * Save changes and create item if it does not exist\n     */\n    public submit() {\n        this.form.markAllAsTouched();\n        if (this.item && this.form.valid) {\n            this.loading = `${this.item.id ? 'Updating' : 'Creating'} ${this.name}...`;\n            this._dialog_ref.disableClose = true;\n            if (this._data.external_save) {\n                this.event.emit({ reason: 'action', metadata: this.form.value });\n                return;\n            }\n            this.item.save().then(\n                item => {\n                    this.result = item;\n                    this._dialog_ref.disableClose = false;\n                    this.event.emit({ reason: 'done', metadata: { item } });\n                    this._service.notifySuccess(\n                        `Successfully ${this.item.id ? 'updated' : 'added'} ${this.name}`\n                    );\n                    if (!this.form.value.id && this.form.controls.settings) {\n                        this.newSettings(item, this.form.controls.settings.value).then(() =>\n                            this._dialog_ref.close()\n                        );\n                    } else {\n                        this._dialog_ref.close();\n                    }\n                },\n                err => {\n                    this.loading = null;\n                    this._dialog_ref.disableClose = false;\n                    this._service.notifyError(\n                        `Error ${this.item.id ? 'editing' : 'adding new'} ${\n                            this.name\n                        }. Error: ${err.message || err}`\n                    );\n                }\n            );\n        }\n    }\n\n    /**\n     * Save initial settings for resources\n     */\n    private async newSettings(item: EngineResource<any>, setting_string: string) {\n        const new_settings = new EngineSettings(this._service.EngineSettings, {\n            parent_id: item.id,\n            setting_string: '',\n            encryption_level: EncryptionLevel.None\n        });\n        new_settings.storePendingChange('settings_string', setting_string);\n        const settings = await new_settings.save().catch(err => {\n            this.loading = null;\n            this._service.notifyError(\n                `Error saving settings for ${item.name || item.id}. Error: ${err.message || err}`\n            );\n        });\n        (item as any).settings[EncryptionLevel.None] = settings;\n    }\n\n    /**\n     * Close the modal\n     */\n    public close() {\n        this._dialog_ref.close();\n    }\n}\n","import { Component, OnInit, Inject } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { FormGroup, FormControl } from '@angular/forms';\n\nexport interface MetadataDetailsModalData {\n    form: FormGroup;\n}\n\n@Component({\n    selector: 'app-metadata-details-modal',\n    templateUrl: './metadata-details-modal.component.html',\n    styleUrls: ['./metadata-details-modal.component.scss']\n})\nexport class MetadataDetailsModalComponent implements OnInit {\n    public form: FormGroup;\n\n    constructor(\n        private _dialog_ref: MatDialogRef<MetadataDetailsModalComponent>,\n        @Inject(MAT_DIALOG_DATA) private _data: MetadataDetailsModalData\n    ) {}\n\n    ngOnInit() {\n        this.form = new FormGroup({\n            name: new FormControl(\n                this._data.form.controls.name.value,\n                this._data.form.controls.name.validator\n            ),\n            description: new FormControl(this._data.form.controls.description.value)\n        });\n    }\n\n    public updateDetails() {\n        this._data.form.controls.name.setValue(this.form.controls.name.value);\n        this._data.form.controls.description.setValue(this.form.controls.description.value);\n        this._dialog_ref.close();\n    }\n}\n","<header>\n    <div class=\"heading\">Update metadata details</div>\n    <button mat-icon-button mat-dialog-close>\n        <app-icon [icon]=\"{ type: 'icon', class: 'backoffice-cross' }\"></app-icon>\n    </button>\n</header>\n<mat-dialog-content>\n    <main [formGroup]=\"form\">\n        <div class=\"field\" *ngIf=\"form.controls.name\">\n            <label\n                for=\"property-name\"\n                [class.error]=\"form.controls.name.invalid && form.controls.name.touched\"\n                >Name<span>*</span>:</label\n            >\n            <mat-form-field appearance=\"outline\">\n                <input\n                    matInput\n                    name=\"property-name\"\n                    placeholder=\"Property Name\"\n                    formControlName=\"name\"\n                    required\n                />\n                <mat-error *ngIf=\"form.controls.name.invalid\">{{\n                    form.controls.name.errors.name\n                        ? 'Property name must be unique'\n                        : 'Property name is required'\n                }}</mat-error>\n            </mat-form-field>\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.description\">\n            <label for=\"description\">Description:</label>\n            <mat-form-field appearance=\"outline\">\n                <textarea\n                    matInput\n                    name=\"description\"\n                    placeholder=\"Description\"\n                    formControlName=\"description\"\n                ></textarea>\n            </mat-form-field>\n        </div>\n    </main>\n</mat-dialog-content>\n<mat-dialog-actions>\n    <footer>\n        <button [disabled]=\"!form.controls.name.valid\" mat-button (tapped)=\"updateDetails()\">\n            Update\n        </button>\n    </footer>\n</mat-dialog-actions>\n","\nimport { NgModule, Type } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { SharedContentModule } from '../shared/shared.module';\n\nimport { ConfirmModalComponent } from './confirm-modal/confirm-modal.component';\nimport { ChangelogModalComponent } from './changelog-modal/changelog-modal.component';\nimport { ItemCreateUpdateModalComponent } from './item-modal/item-modal.component';\nimport { SelectItemModalComponent } from './select-item-modal/select-item-modal.component';\nimport { SystemLogModalComponent } from './system-log-modal/system-log-modal.component';\nimport { TriggerActionModalComponent } from './trigger-action-modal/trigger-action-modal.component';\nimport { TriggerConditionModalComponent } from './trigger-condition-modal/trigger-condition-modal.component';\nimport { ViewModuleStateModalComponent } from './view-module-state/view-module-state.component';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { AuthSourceModalComponent } from './auth-source-modal/auth-source-modal.component';\nimport { ViewResponseModalComponent } from './view-response-modal/view-response-modal.component';\nimport { MetadataDetailsModalComponent } from './metadata-details-modal/metadata-details-modal.component';\n\n\nconst OVERLAYS: Type<any>[] = [\n    ConfirmModalComponent,\n    ChangelogModalComponent,\n    ItemCreateUpdateModalComponent,\n    SelectItemModalComponent,\n    SystemLogModalComponent,\n    TriggerActionModalComponent,\n    TriggerConditionModalComponent,\n    ViewModuleStateModalComponent,\n    AuthSourceModalComponent,\n    ViewResponseModalComponent,\n    MetadataDetailsModalComponent\n];\n\n@NgModule({\n    declarations: [\n        ...OVERLAYS\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n        SharedContentModule\n    ],\n    exports: [\n        ...OVERLAYS\n    ]\n})\nexport class SharedOverlaysModule {}\n","import { Component, OnInit, Output, EventEmitter, Inject } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\n\nimport { BaseDirective } from 'src/app/shared/globals/base.directive';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { DialogEvent } from 'src/app/shared/utilities/types.utilities';\n\nexport interface SelectItemModalData {\n    service_name: string;\n}\n\n@Component({\n    selector: 'select-item-modal',\n    templateUrl: './select-item-modal.component.html',\n    styleUrls: ['./select-item-modal.component.scss']\n})\nexport class SelectItemModalComponent extends BaseDirective implements OnInit {\n    /** Emitter for user action on the modal */\n    @Output() public event = new EventEmitter<DialogEvent>();\n    /** Whether the item is being editing */\n    public edit: boolean;\n    /** Item to edit */\n    public item: any;\n    /** Whether the item request is being processed */\n    public loading: boolean;\n\n    constructor(\n        private _dialog: MatDialogRef<SelectItemModalComponent>,\n        @Inject(MAT_DIALOG_DATA) private _data: SelectItemModalData,\n        private _service: ApplicationService\n    ) {\n        super();\n    }\n\n    public get name(): string {\n        return this.service.name || this.service._name;\n    }\n\n    public get service() {\n        return this._service[this._data.service_name];\n    }\n\n    public ngOnInit(): void {\n        if (!this.service) {\n            this._dialog.close();\n        }\n    }\n\n    public submit() {\n        this.loading = true;\n        this.event.emit({ reason: 'action', metadata: this.item });\n    }\n}\n","<header>\n    <h3 mat-dialog-title>Add {{ name }}</h3>\n    <button mat-icon-button mat-dialog-close>\n        <app-icon [icon]=\"{ type: 'icon', class: 'backoffice-cross' }\"></app-icon>\n    </button>\n</header>\n<mat-dialog-content>\n    <div class=\"body\" *ngIf=\"!loading; else load_state\">\n        <div class=\"content\">\n            <item-search-field [service]=\"service\" [(ngModel)]=\"item\"></item-search-field>\n        </div>\n    </div>\n</mat-dialog-content>\n<mat-dialog-actions *ngIf=\"!loading\">\n    <button mat-button class=\"inverse\" mat-dialog-close>Cancel</button>\n    <button mat-button type=\"submit\" (tapped)=\"submit()\" [disabled]=\"!item\">Add</button>\n</mat-dialog-actions>\n<ng-template #load_state>\n    <div class=\"info-block\">\n        <div class=\"icon\">\n            <a-spinner circle-ring color=\"rgba(0,0,0, .54)\"></a-spinner>\n        </div>\n        <div class=\"text\">Processing request...</div>\n    </div>\n</ng-template>\n","import { Component, OnInit, Inject } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\n\nimport { BaseDirective } from 'src/app/shared/globals/base.directive';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { IEngineLogEntry } from 'src/app/services/data/logs.service';\n\nexport interface SystemLogModalData {\n    /** ID of the system to show the logs for */\n    sys_id: string;\n}\n\n@Component({\n    selector: 'system-log-modal',\n    templateUrl: './system-log-modal.component.html',\n    styleUrls: ['./system-log-modal.component.scss']\n})\nexport class SystemLogModalComponent extends BaseDirective implements OnInit {\n    /** ID of the system to get logs for */\n    public id: string;\n    /** List of the available log entries for the set system */\n    public logs: IEngineLogEntry[];\n    /** Whether the system's logs are loading */\n    public loading: boolean;\n    /**  */\n    public name: string;\n    /** Whether the modal is closing */\n    public closing: boolean;\n\n    constructor(\n        private _dialog: MatDialogRef<SystemLogModalComponent>,\n        @Inject(MAT_DIALOG_DATA) private _data: SystemLogModalData,\n        private _service: ApplicationService\n    ) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this.id = this._data.sys_id;\n        if (this.id) {\n            this.loading = true;\n            this._service.SystemLogs.query({ limit: 500, id: this.id }).then(\n                (list: IEngineLogEntry[]) => {\n                    this.logs = list.sort((a, b) => b.created - a.created);\n                },\n                () => {\n                    this._dialog.close();\n                    this._service.notifyError('Error loading logs for system');\n                }\n            );\n        } else {\n            this._dialog.close();\n        }\n    }\n}\n","<header>\n    <h3 mat-dialog-title>System Logs</h3>\n    <button mat-icon-button mat-dialog-close>\n        <app-icon [icon]=\"{ type: 'icon', class: 'backoffice-cross' }\"></app-icon>\n    </button>\n</header>\n<mat-dialog-content>\n    <div class=\"body\" *ngIf=\"!loading; else load_state\">\n        <table>\n            <thead>\n                <td>User</td>\n                <td>Date/Time</td>\n                <td></td>\n            </thead>\n            <tbody>\n                <tr class=\"item\" *ngFor=\"let item of logs\">\n                    <td>{{ item?.user?.name }}</td>\n                    <td>{{ item?.created_at | date }}</td>\n                    <td>{{ item?.installed_device }}</td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</mat-dialog-content>\n<ng-template #load_state>\n    <div class=\"body\">\n        <div class=\"info-block\">\n            <div class=\"icon\">\n                <a-spinner circle-ring color=\"#000\"></a-spinner>\n            </div>\n            <div class=\"text\">Processing request...</div>\n        </div>\n    </div>\n</ng-template>\n","import { Component, OnInit, Output, EventEmitter, Inject } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\n\nimport { BaseDirective } from 'src/app/shared/globals/base.directive';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { DialogEvent } from 'src/app/shared/utilities/types.utilities';\nimport { generateTriggerActionForm } from 'src/app/shared/utilities/data/triggers.utilities';\nimport { EngineTrigger, EngineSystem, TriggerMailer, TriggerFunction } from '@placeos/ts-client';\nimport { FormGroup } from '@angular/forms';\n\nexport interface TriggerActionModalData {\n    /** Item to add/update the trigger on */\n    system: EngineSystem;\n    /** Trigger to add/update */\n    trigger: EngineTrigger;\n    /** Trigger Condition to edit */\n    action?: TriggerMailer | TriggerFunction;\n}\n\n@Component({\n    selector: 'trigger-action-modal',\n    templateUrl: './trigger-action-modal.template.html',\n    styleUrls: ['./trigger-action-modal.styles.scss']\n})\nexport class TriggerActionModalComponent extends BaseDirective implements OnInit {\n    /** Emitter for events on the modal */\n    @Output() public event = new EventEmitter<DialogEvent>();\n    /** Whether actions are loading */\n    public loading: boolean;\n    /** Form fields for trigger condition */\n    public form: FormGroup;\n\n    /** Whether the triggers is new or not */\n    public get is_new(): boolean {\n        return !!this._data.action;\n    }\n\n    /** Template system to use for status variable bindings */\n    public get system(): EngineSystem {\n        return this._data.system;\n    }\n\n    /** Template system to use for status variable bindings */\n    public get trigger(): EngineTrigger {\n        return this._data.trigger;\n    }\n\n    constructor(\n        private _dialog: MatDialogRef<TriggerActionModalComponent>,\n        @Inject(MAT_DIALOG_DATA) private _data: TriggerActionModalData,\n        private _service: ApplicationService\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.form = generateTriggerActionForm(this._data.action).form;\n    }\n\n    public save() {\n        this.form.markAllAsTouched();\n        if (\n            (this.form.controls.action_type.value === 'emails' && !this.form.valid) ||\n            (this.form.controls.action_type.value === 'function' && !this.form.value.method_call)\n        ) {\n            return;\n        }\n        this.loading = true;\n        if (this.form.controls.action_type.value === 'emails') {\n            this.updateMailers();\n        } else {\n            this.updateFunctions();\n        }\n        this.trigger.save().then(\n            item => {\n                this.event.emit({ reason: 'done', metadata: { trigger: item } });\n                this._service.notifySuccess(`Successfully ${this.is_new ? 'added' : 'updated'} condition to trigger`);\n                this._dialog.close();\n            },\n            err => {\n                this.trigger.clearPendingChanges();\n                this.loading = false;\n                this._service.notifyError(\n                    `Error ${this.is_new ? 'adding' : 'updating'} condition to trigger. Error: ${err.message || err}`\n                );\n            }\n        );\n    }\n\n    private updateMailers() {\n        const mailers = this.trigger.actions.mailers;\n        const new_mailer = {\n            emails: this.form.value.emails,\n            content: this.form.value.content\n        };\n        if (this._data.action) {\n            const old_mailer = JSON.stringify(this._data.action);\n            const index = mailers.findIndex(\n                a_mailer => JSON.stringify(a_mailer) === old_mailer\n            );\n            mailers.splice(index, 1, new_mailer);\n        } else {\n            mailers.push(new_mailer);\n        }\n        this.trigger.storePendingChange('actions', { ...this.trigger.actions, mailers });\n    }\n\n    private updateFunctions() {\n        const functions = this.trigger.actions.functions;\n        if (this._data.action) {\n            const old_function = JSON.stringify(this._data.action);\n            const index = functions.findIndex(fn => JSON.stringify(fn) === old_function);\n            functions.splice(index, 1, this.form.value.method_call);\n        } else {\n            functions.push(this.form.value.method_call);\n        }\n        this.trigger.storePendingChange('actions', { ...this.trigger.actions, functions });\n    }\n}\n","<header>\n    <h3 mat-dialog-title>{{is_new ? 'Edit' : 'New'}} Trigger Action</h3>\n    <button mat-icon-button mat-dialog-close>\n        <app-icon [icon]=\"{ type: 'icon', class: 'backoffice-cross' }\"></app-icon>\n    </button>\n</header>\n<mat-dialog-content>\n    <div class=\"body\" *ngIf=\"!loading; else load_state\">\n        <trigger-action-form [form]=\"form\" [system]=\"system\"></trigger-action-form>\n    </div>\n</mat-dialog-content>\n<mat-dialog-actions *ngIf=\"!loading\">\n    <button mat-button class=\"inverse\" mat-dialog-close>Cancel</button>\n    <button mat-button type=\"submit\" (tapped)=\"save()\">\n        {{ is_new ? 'Save' : 'Add' }}\n    </button>\n</mat-dialog-actions>\n<ng-template #load_state>\n    <div class=\"body\">\n        <div class=\"info-block\">\n            <div class=\"icon\">\n                <a-spinner circle-ring color=\"#000\"></a-spinner>\n            </div>\n            <div class=\"text\">Processing request...</div>\n        </div>\n    </div>\n</ng-template>\n","import { Component, OnInit, Inject, Output, EventEmitter } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { FormGroup } from '@angular/forms';\n\nimport {\n    EngineSystem,\n    EngineTrigger,\n    TriggerComparison,\n    TriggerTimeCondition\n} from '@placeos/ts-client';\n\nimport { BaseDirective } from 'src/app/shared/globals/base.directive';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { DialogEvent } from 'src/app/shared/utilities/types.utilities';\n\nimport { generateTriggerConditionForm } from 'src/app/shared/utilities/data/triggers.utilities';\n\nexport interface TriggerConditionData {\n    /** Item to add/update the trigger on */\n    system: EngineSystem;\n    /** Trigger to add/update */\n    trigger: EngineTrigger;\n    /** Trigger Condition to edit */\n    condition?: TriggerComparison | TriggerTimeCondition;\n}\n\n@Component({\n    selector: 'trigger-condition-modal',\n    templateUrl: './trigger-condition-modal.template.html',\n    styleUrls: ['./trigger-condition-modal.styles.scss']\n})\nexport class TriggerConditionModalComponent extends BaseDirective implements OnInit {\n    /** Emitter for events on the modal */\n    @Output() public event = new EventEmitter<DialogEvent>();\n    /** Whether actions are loading */\n    public loading: boolean;\n    /** Form fields for trigger condition */\n    public form: FormGroup;\n\n    /** Whether the triggers is new or not */\n    public get is_new(): boolean {\n        return !!this._data.condition;\n    }\n\n    /** Template system to use for status variable bindings */\n    public get system(): EngineSystem {\n        return this._data.system;\n    }\n\n    /** Template system to use for status variable bindings */\n    public get trigger(): EngineTrigger {\n        return this._data.trigger;\n    }\n\n    constructor(\n        private _dialog: MatDialogRef<TriggerConditionModalComponent>,\n        @Inject(MAT_DIALOG_DATA) private _data: TriggerConditionData,\n        private _service: ApplicationService\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.form = generateTriggerConditionForm(this._data.condition).form;\n    }\n\n    public save() {\n        this.form.markAllAsTouched();\n        if (!this.form.valid) {\n            return;\n        }\n        this.loading = true;\n        if (this.form.controls.condition_type.value === 'compare') {\n            this.updateComparisons();\n        } else {\n            this.updateTimeDependents();\n        }\n        this.trigger.save().then(\n            item => {\n                this.event.emit({ reason: 'done', metadata: { trigger: item } });\n                this._service.notifySuccess(`Successfully ${this.is_new ? 'added' : 'updated'} condition to trigger`);\n                this._dialog.close();\n            },\n            err => {\n                this.trigger.clearPendingChanges();\n                this.loading = false;\n                this._service.notifyError(`Error ${this.is_new ? 'adding' : 'updating'} condition to trigger. Error: ${err.message || err}`);\n            }\n        );\n    }\n\n    /**\n     * Update the comparison list by replace an exisiting item or add a new item\n     */\n    private updateComparisons() {\n        const old_values = [...this.trigger.conditions.comparisons];\n        const new_value: TriggerComparison = {\n            left: this.form.controls.left.value,\n            operator: this.form.controls.operator.value,\n            right: this.form.controls.right.value\n        };\n        if (this._data.condition) {\n            const old_value = JSON.stringify(this._data.condition);\n            const index = old_values.findIndex(cmp => JSON.stringify(cmp) === old_value);\n            if (index >= 0) {\n                old_values.splice(index, 1, new_value);\n            }\n        } else {\n            old_values.push(new_value);\n        }\n        const updated_conditions = {\n            ...this.trigger.conditions,\n            comparisons: old_values\n        };\n        this.trigger.storePendingChange('conditions', updated_conditions);\n    }\n\n\n    /**\n     * Update the time dependent list by replace an exisiting item or add a new item\n     */\n    private updateTimeDependents() {\n        const old_values = [...this.trigger.conditions.time_dependents] || [];\n        const new_value = {\n            type: this.form.controls.time_type.value,\n            time: +(this.form.controls.time.value / 1000).toFixed(0),\n            cron: this.form.controls.cron.value\n        };\n        new_value.cron ? delete new_value.time : delete new_value.cron;\n        if (this._data.condition) {\n            const old_value = JSON.stringify(this._data.condition);\n            const index = old_values.findIndex(time => JSON.stringify(time) === old_value);\n            if (index >= 0) {\n                old_values.splice(index, 1, new_value);\n            }\n        } else {\n            old_values.push(new_value);\n        }\n        const updated_conditions = {\n            ...this.trigger.conditions,\n            time_dependents: old_values\n        };\n        this.trigger.storePendingChange('conditions', updated_conditions);\n    }\n}\n","<header>\n    <h3 mat-dialog-title>{{is_new ? 'Edit' : 'New'}} Trigger Condition</h3>\n    <button mat-icon-button mat-dialog-close>\n        <app-icon [icon]=\"{ type: 'icon', class: 'backoffice-cross' }\"></app-icon>\n    </button>\n</header>\n<mat-dialog-content>\n    <div class=\"body\" *ngIf=\"!loading; else load_state\">\n        <trigger-condition-form [form]=\"form\" [system]=\"system\"></trigger-condition-form>\n    </div>\n</mat-dialog-content>\n<mat-dialog-actions *ngIf=\"!loading\">\n    <button mat-button class=\"inverse\" mat-dialog-close>Cancel</button>\n    <button mat-button type=\"submit\" (tapped)=\"save()\">\n        {{ is_new ? 'Save' : 'Add' }}\n    </button>\n</mat-dialog-actions>\n<ng-template #load_state>\n    <div class=\"body\">\n        <div class=\"info-block\">\n            <div class=\"icon\">\n                <a-spinner circle-ring color=\"#000\"></a-spinner>\n            </div>\n            <div class=\"text\">Processing request...</div>\n        </div>\n    </div>\n</ng-template>\n","import { Component, OnInit, Inject } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { HashMap, EngineModule, EngineSystem } from '@placeos/ts-client';\n\nimport { BaseDirective } from 'src/app/shared/globals/base.directive';\nimport { ApplicationService } from 'src/app/services/app.service';\n\nexport interface ModuleStateModalData {\n    /** System Data to show the details for */\n    system: EngineSystem;\n    /** Module to expose the state of */\n    module: EngineModule;\n    /** Modules associated with the system */\n    devices: EngineModule[];\n}\n\n@Component({\n    selector: 'view-module-state-modal',\n    templateUrl: './view-module-state.template.html',\n    styleUrls: ['./view-module-state.styles.scss'],\n})\nexport class ViewModuleStateModalComponent extends BaseDirective implements OnInit {\n    /** Current state of the selected module */\n    public state: string;\n    /** Whether the module state is being loaded */\n    public loading: boolean;\n    /** Whether the modal is closing */\n    public closing: boolean;\n    /** Mapping of devices to the module bindings */\n    public device_classes: HashMap<string> = {};\n\n    /** System of the selected module */\n    public get system(): EngineSystem {\n        return this._data.system;\n    }\n\n    /** Module to view the state of */\n    public get module(): EngineModule {\n        return this._data.module;\n    }\n\n    /** Modules associated with the system */\n    public get devices(): EngineModule[] {\n        return this._data.devices || [];\n    }\n\n    constructor(\n        private _dialog: MatDialogRef<ViewModuleStateModalComponent>,\n        @Inject(MAT_DIALOG_DATA) private _data: ModuleStateModalData,\n        private _service: ApplicationService\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.generateModuleBindings();\n        this.updateState();\n    }\n\n    /**\n     * Generate the binding modules for each device\n     */\n    private generateModuleBindings() {\n        const counter: HashMap<number> = {};\n        for (const device of this.devices) {\n            const name = device.custom_name || device.name || 'Blank';\n            if (!counter[name]) {\n                counter[name] = 0;\n            }\n            this.device_classes[device.id] = `${name}_${++counter[name]}`;\n        }\n    }\n\n    /** Update the state of the module */\n    public updateState() {\n        if (!this.system || !this.module) {\n            return;\n        }\n        const class_name = this.device_classes[this.module.id];\n        if (!class_name) {\n            return;\n        }\n        this.loading = true;\n        const class_parts = class_name.split('_');\n        this._service.Systems.state(this.system.id, class_parts[0], +class_parts[1]).then(\n            (state) => {\n                const pre_state =\n                typeof state === 'string'\n                    ? JSON.parse(state)\n                    : state;\n                Object.keys(pre_state).forEach(key => {\n                    pre_state[key] = JSON.parse(pre_state[key]);\n                });\n                this.state = JSON.stringify(pre_state, undefined, 4);\n                this.loading = false;\n            },\n            (err) => {\n                this._service.notifyError(err.message || err);\n                this.loading = false;\n            }\n        );\n    }\n\n    /**\n     * Close the modal\n     */\n    public close() {\n        this._dialog.close();\n    }\n}\n","<header>\n    <h3 mat-dialog-title>\n        Module State - {{module?.custom_name || module?.name}}</h3>\n    <button mat-icon-button mat-dialog-close>\n        <app-icon [icon]=\"{ type: 'icon', class: 'backoffice-cross' }\"></app-icon>\n    </button>\n</header>\n<mat-dialog-content>\n    <div class=\"body\" *ngIf=\"!loading; else load_state\">\n        <div class=\"field\">\n            <label>System:</label>\n            <div class=\"value\">{{system?.name}}</div>\n        </div>\n        <div class=\"field\">\n            <label>Module:</label>\n            <div class=\"value\">\n                {{ device_classes[module?.id] }}\n            </div>\n        </div>\n        <button mat-button (tapped)=\"updateState()\">Update state</button>\n        <div class=\"settings\">\n            <settings-form-field [ngModel]=\"state\" [readonly]=\"true\"></settings-form-field>\n        </div>\n    </div>\n</mat-dialog-content>\n<ng-template #load_state>\n    <div class=\"body\">\n        <div class=\"info-block\">\n            <div class=\"icon\">\n                <a-spinner circle-ring color=\"#000\"></a-spinner>\n            </div>\n            <div class=\"text\">Loading state...</div>\n        </div>\n    </div>\n</ng-template>\n","import { Component, Inject } from '@angular/core';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\n\nexport interface ViewResponseModalData {\n    content: any;\n}\n\n@Component({\n    selector: 'app-view-response-modal',\n    templateUrl: './view-response-modal.component.html',\n    styleUrls: ['./view-response-modal.component.scss']\n})\nexport class ViewResponseModalComponent {\n\n    public get content_string(): string {\n        return typeof this._data.content === 'object'\n            ? JSON.stringify(this._data.content, undefined, 4)\n            : this._data.content;\n    }\n\n    constructor(@Inject(MAT_DIALOG_DATA) private _data: ViewResponseModalData) {}\n}\n","<header>\n    <div class=\"text\">Exec Request Results</div>\n    <button mat-icon-button mat-dialog-close>\n        <app-icon [icon]=\"{ class: 'material-icons', content: 'close' }\"></app-icon>\n    </button>\n</header>\n<mat-dialog-content>\n    <settings-form-field [ngModel]=\"content_string\" [readonly]=\"true\"></settings-form-field>\n</mat-dialog-content>\n","import { Injectable, ApplicationRef, NgZone } from '@angular/core';\nimport { Title } from '@angular/platform-browser';\nimport { Router } from '@angular/router';\nimport { SwUpdate } from '@angular/service-worker';\nimport { first } from 'rxjs/operators';\n\nimport { MatSnackBar } from '@angular/material/snack-bar';\n\nimport { ComposerService } from '@placeos/composer';\nimport { PlaceOSOptions } from '@placeos/ts-client';\nimport { GoogleAnalyticsService } from '@acaprojects/ngx-google-analytics';\n\nimport { Observable, BehaviorSubject, Subject, Subscription } from 'rxjs';\n\nimport { BaseClass } from '../shared/globals/base.class';\nimport { SettingsService, ConsoleStream } from './settings.service';\nimport { HashMap } from '../shared/utilities/types.utilities';\n\nimport { HotkeysService } from './hotkeys.service';\nimport { BackofficeCommentsService } from './data/comments.service';\nimport { BackofficeLogsService } from './data/logs.service';\nimport { BackofficeSearchService } from './data/search.service';\nimport { BackofficeStatsService } from './data/stats.service';\nimport { BackofficeSystemLogsService } from './data/system_logs.service';\nimport { BackofficeUsersService } from './data/users.service';\nimport { ApplicationIcon, ComposerOptions } from '../shared/utilities/settings.interfaces';\n\nimport * as Sentry from '@sentry/browser';\n\ndeclare global {\n    interface Window {\n        application: ApplicationService;\n        mock: {\n            enabled: boolean;\n            backend: any;\n        };\n    }\n}\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ApplicationService extends BaseClass {\n    /** List of previous routes for return navigation */\n    private _route_trail: string[] = [];\n    /** Map of state variables for Service */\n    protected _subjects: HashMap<BehaviorSubject<any> | Subject<any>> = {};\n    /** Map of observables for state variables */\n    protected _observers: HashMap<Observable<any>> = {};\n    /** Whether the application has stablised */\n    private _stable: boolean;\n\n    /** Whether the application has stablised */\n    public get is_stable(): boolean {\n        return this._stable || false;\n    }\n\n    constructor(\n        private _app_ref: ApplicationRef,\n        private _zone: NgZone,\n        private _title: Title,\n        private _router: Router,\n        private _cache: SwUpdate,\n        private _settings: SettingsService,\n        private _composer: ComposerService,\n        private _analytics: GoogleAnalyticsService,\n        private _hotkeys: HotkeysService,\n        private _engine_comments: BackofficeCommentsService,\n        private _engine_logs: BackofficeLogsService,\n        private _engine_search: BackofficeSearchService,\n        private _engine_stats: BackofficeStatsService,\n        private _engine_system_logs: BackofficeSystemLogsService,\n        private _users: BackofficeUsersService,\n        private _snackbar: MatSnackBar\n    ) {\n        super();\n        this._engine_comments.parent = this._engine_logs.parent = this._engine_search.parent =\n            this._engine_stats.parent = this._engine_system_logs.parent = this._users.parent = this;\n        this.set('system', null);\n        this._app_ref.isStable.pipe(first(_ => _)).subscribe(() => {\n            this._zone.run(() => {\n                this._stable = true;\n                this.log('APP', `Application has stablised.`);\n                this.setupCache();\n                this.waitForSettings();\n            });\n        });\n    }\n\n    /** Analytics service */\n    public get Analytics() {\n        return this._analytics;\n    }\n\n    /** Hotkeys service */\n    public get Hotkeys() {\n        return this._hotkeys;\n    }\n\n    /** Users service */\n    public get Users() {\n        return this._users;\n    }\n\n    /** Engine Applications service */\n    public get Applications() {\n        return this._composer.applications;\n    }\n\n    /** Engine Auth Sources service */\n    public get OAuthSources() {\n        return this._composer.oauth_sources;\n    }\n\n    /** Engine Auth Sources service */\n    public get SAMLAuthSources() {\n        return this._composer.saml_sources;\n    }\n\n    /** Engine Auth Sources service */\n    public get LDAPAuthSources() {\n        return this._composer.ldap_sources;\n    }\n\n    /** Comments service */\n    public get Comments() {\n        return this._engine_comments;\n    }\n\n    /** Engine Domains service */\n    public get Domains() {\n        return this._composer.domains;\n    }\n\n    /** Engine Cluster service */\n    public get Clusters() {\n        return this._composer.clusters;\n    }\n\n    /** Drivers service */\n    public get Drivers() {\n        return this._composer.drivers;\n    }\n\n    /** Engine Logs service */\n    public get Logs() {\n        return this._engine_logs;\n    }\n\n    /** Modules service */\n    public get Modules() {\n        return this._composer.modules;\n    }\n\n    /** Engine Search service */\n    public get Search() {\n        return this._engine_search;\n    }\n\n    public get Repositories() {\n        return this._composer.repositories;\n    }\n\n    /** Stats service */\n    public get Stats() {\n        return this._engine_stats;\n    }\n\n    /** Engien System Logs service */\n    public get SystemLogs() {\n        return this._engine_system_logs;\n    }\n\n    /** Systems service */\n    public get Systems() {\n        return this._composer.systems;\n    }\n\n    /** Triggers service */\n    public get Triggers() {\n        return this._composer.triggers;\n    }\n\n    /** Zones service */\n    public get Zones() {\n        return this._composer.zones;\n    }\n\n    public get EngineSettings() {\n        return this._composer.settings;\n    }\n\n    /**\n     * Get a setting from the settings service\n     * @param key Name of the setting. i.e. nested items can be grabbed using `.` to seperate key names\n     */\n    public setting(key: string): any {\n        return this._settings.get(key);\n    }\n\n    /** Name of the application */\n    public get name() {\n        return this._settings.app_name;\n    }\n\n    /**\n     * Title of the page\n     */\n    public set title(value: string) {\n        const title_suffix = this.setting('app.title');\n        this._title.setTitle(`${value ? value + ' | ' : ''}${title_suffix || 'PlaceOS'}`);\n    }\n\n    /**\n     * Title of the page\n     */\n    public get title(): string {\n        return this._title.getTitle();\n    }\n\n    /** Root API Endpoint */\n    public get endpoint() {\n        return this._composer.auth.api_endpoint;\n    }\n\n    /** Root API Endpoint for engine */\n    public get engine_endpoint() {\n        return this._composer.auth.api_endpoint;\n    }\n\n    /**\n     * Create notification popup\n     * @param type CSS Class to add to the notification\n     * @param message Message to display on the notificaiton\n     * @param action Display text for the callback action\n     * @param on_action Callback of action on the notification\n     * @param icon Icon to render to the left of the notification message\n     */\n    public notify(\n        type: string,\n        message: string,\n        action: string = 'OK',\n        on_action?: () => void,\n        icon: ApplicationIcon = {\n            type: 'icon',\n            class: 'material-icons',\n            content: 'info'\n        },\n        duration: number = 8000\n    ): void {\n        const snackbar_ref = this._snackbar.open(message, action, {\n            panelClass: [type],\n            duration\n        });\n        this.subscription(\n            'snackbar_close',\n            snackbar_ref.afterDismissed().subscribe(() => {\n                this.unsub('snackbar_close');\n                this.unsub('notify');\n            })\n        );\n        if (action) {\n            on_action = on_action || (() => snackbar_ref.dismiss());\n            this.subscription(\n                'notify',\n                snackbar_ref.onAction().subscribe(() => on_action())\n            );\n        }\n    }\n\n    /**\n     * Create success notification popup\n     * @param msg Message to display on the notificaiton\n     * @param action Display text for the callback action\n     * @param on_action Callback of action on the notification\n     */\n    public notifySuccess(\n        msg: string,\n        action?: string,\n        on_action?: () => void,\n        duration: number = 8000\n    ): void {\n        const icon: ApplicationIcon = { type: 'icon', class: 'material-icons', content: 'done' };\n        console.debug('[APP][USER_ACTION]', msg);\n        this.notify('success', msg, action, on_action, icon, duration);\n    }\n\n    /**\n     * Create success notification popup\n     * @param msg Message to display on the notificaiton\n     * @param action Display text for the callback action\n     * @param on_action Callback of action on the notification\n     */\n    public notifyError(\n        msg: string,\n        action?: string,\n        on_action?: () => void,\n        duration: number = 8000\n    ): void {\n        const icon: ApplicationIcon = { type: 'icon', class: 'material-icons', content: 'error' };\n        console.error('[APP][USER_ACTION]', msg);\n        this.notify('error', msg, action, on_action, icon, duration);\n    }\n\n    /**\n     * Create info notification popup\n     * @param msg Message to display on the notificaiton\n     * @param action Display text for the callback action\n     * @param on_action Callback of action on the notification\n     */\n    public notifyWarn(\n        msg: string,\n        action?: string,\n        on_action?: () => void,\n        duration: number = 8000\n    ): void {\n        const icon: ApplicationIcon = { type: 'icon', class: 'material-icons', content: 'warning' };\n        console.warn('[APP][USER_ACTION]', msg);\n        this.notify('warn', msg, action, on_action, icon, duration);\n    }\n\n    /**\n     * Create info notification popup\n     * @param msg Message to display on the notificaiton\n     * @param action Display text for the callback action\n     * @param on_action Callback of action on the notification\n     */\n    public notifyInfo(\n        msg: string,\n        action?: string,\n        on_action?: () => void,\n        duration: number = 8000\n    ): void {\n        const icon: ApplicationIcon = { type: 'icon', class: 'material-icons', content: 'info' };\n        console.info('[APP][USER_ACTION]', msg);\n        this.notify('info', msg, action, on_action, icon, duration);\n    }\n\n    /**\n     * Log data to the browser console\n     * @param type Type of message\n     * @param msg Message body\n     * @param args array of argments to log to the console\n     * @param stream Stream to emit the console on. 'debug', 'log', 'warn' or 'error'\n     * @param force Whether to force message to be emitted when debug is disabled\n     */\n    public log(\n        type: string,\n        msg: string,\n        args?: any,\n        stream: ConsoleStream = 'debug',\n        force: boolean = false\n    ): void {\n        this._settings.log(type, msg, args, stream, force);\n    }\n\n    /**\n     * Navigate to the given path\n     * @param path Path or array of path parts\n     * @param query Key value pairs to add to the URL as query parameters\n     */\n    public navigate(path: string | string[], query?: HashMap): void {\n        const route = path instanceof Array ? [...path] : [path];\n        this._route_trail.push(this._router.url);\n        this._router.navigate(route, { queryParams: query });\n    }\n\n    /**\n     * Navigate to the previous location in the route trail\n     */\n    public navigateBack(): void {\n        if (this._route_trail && this._route_trail.length > 0) {\n            const path = this._route_trail.pop();\n            this._router.navigate([path]);\n        } else {\n            this._router.navigate(['']);\n        }\n    }\n\n    /**\n     * Get the current value of the named property\n     * @param name Property name\n     */\n    public get<U = any>(name: string): U {\n        return this._subjects[name] && this._subjects[name] instanceof BehaviorSubject\n            ? (this._subjects[name] as BehaviorSubject<U>).getValue()\n            : null;\n    }\n\n    /**\n     * Listen to value change of the named property\n     * @param name Property name\n     * @param next Callback for value changes\n     */\n    public listen<U = any>(name: string, next: (_: U) => void): Subscription {\n        return this._observers[name] ? this._observers[name].subscribe(next) : null;\n    }\n\n    /**\n     * Update the value of the named property\n     * @param name Property name\n     * @param value New value\n     */\n    public set<U = any>(name: string, value: U): void {\n        if (!this._subjects[name]) {\n            this._subjects[name] = new BehaviorSubject<U>(value);\n            this._observers[name] = this._subjects[name].asObservable();\n        } else {\n            this._subjects[name].next(value);\n        }\n    }\n\n    /** Wait for settings to be initialised before setting up the application */\n    private waitForSettings() {\n        // Wait until the settings have loaded before initialising\n        this._settings.initialised.pipe(first(_ => _)).subscribe((setup) => {\n            if (setup) {\n                this.init();\n            }\n        });\n    }\n\n    /**\n     * Initialise application services\n     */\n    private init(): void {\n        this.setupComposer();\n        // Setup analytics\n        this._analytics.enabled = !!this.setting('app.analytics.enabled');\n        if (this._analytics.enabled) {\n            this._analytics.load(this.setting('app.analytics.tracking_id'));\n        }\n        this._composer.initialised.pipe(first(_ => _)).subscribe(() => {\n            this.set('ready', true);\n            const dsn =\n                this._composer.auth.authority.sentry_dsn || this.setting('app.sentry_dsn');\n            if (dsn) {\n                Sentry.init({ dsn });\n            }\n            this.loadActiveUser();\n            this._initialised.next(true);\n        });\n        // Add service to window if in debug mode\n        if (window.debug) {\n            window.application = this;\n        }\n    }\n\n    /**\n     * Initialise the composer library comms\n     */\n    private setupComposer(): void {\n        this.log('SYSTEM', 'Setup up composer...');\n        // Get application settings\n        const settings: ComposerOptions = this.setting('composer') || {};\n        const protocol = settings.protocol || location.protocol;\n        const host = settings.domain || location.hostname;\n        const port = settings.port || location.port;\n        const url = settings.use_domain ? `${protocol}//${host}:${port}` : location.origin;\n        const route = settings.route || '';\n        const mock = this.setting('mock');\n        const login_locally = location.search.indexOf('login=true') >= 0;\n        // Generate configuration object\n        const config: PlaceOSOptions = {\n            scope: 'public',\n            host: `${host}:${port}`,\n            auth_uri: `${url}/auth/oauth/authorize`,\n            token_uri: `${url}/auth/token`,\n            redirect_uri: `${location.origin}${route}/oauth-resp.html`,\n            handle_login: !settings.local_login && !login_locally,\n            mock\n        };\n        this._composer.setup(config);\n    }\n\n    private loadActiveUser() {\n        this.Users.load();\n    }\n\n    /**\n     * Setup handler for cache change events\n     */\n    private setupCache() {\n        this.unsub('app_stable');\n        this.log('CACHE', `Initialising cache...`);\n        if (this._cache.isEnabled) {\n            this.log('CACHE', `Listening to cache events...`);\n            this._cache.activateUpdate();\n            this.subscription('cache_update', this._cache.available.subscribe((event) => {\n                const current = `current version is ${event.current.hash}`;\n                const available = `available version is ${event.available.hash}`;\n                this.log('CACHE', `Update available: ${current} ${available}`);\n                this.activateUpdate()\n            }));\n            setInterval(() => {\n                this.log('CACHE', `Checking for updates...`);\n                this._cache.checkForUpdate();\n            }, 5 * 60 * 1000);\n        }\n    }\n\n    /**\n     * Update the cache and reload the page\n     */\n    private activateUpdate() {\n        if (this._cache.isEnabled) {\n            this.log('CACHE', `Activating changes to the cache...`);\n            this._cache.activateUpdate().then(() => {\n                this.notifyInfo('Newer version of the application is available', 'Refresh', () =>\n                    location.reload(true)\n                );\n            });\n        }\n    }\n}\n","import { BehaviorSubject, Observable, Subscription, Subscriber, Subject } from 'rxjs';\nimport { EngineHttpClient } from '@placeos/ts-client';\nimport { first } from 'rxjs/operators';\n\nimport { BaseClass } from '../../shared/globals/base.class';\nimport { ApplicationService } from '../app.service';\nimport { HashMap } from '../../shared/utilities/types.utilities';\nimport { toQueryString } from '../../shared/utilities/api.utilities';\n\nexport interface IEngineResponse {\n    results: HashMap[];\n    total: number;\n}\n\nexport class BaseAPIService<T extends {}> extends BaseClass {\n    /** Application service */\n    public parent: ApplicationService;\n    /** List of available items */\n    public readonly listing = new BehaviorSubject<T[]>([]);\n    /** Display name of the service */\n    protected _name: string;\n    /** Name of a single item from the service */\n    protected _singular: string;\n    /** API Route of the service */\n    protected _api_route: string;\n    /** Map of state variables for Service */\n    protected _subjects: { [key: string]: BehaviorSubject<any> | Subject<any> } = {};\n    /** Map of observables for state variables */\n    protected _observers: { [key: string]: Observable<any> } = {};\n    /** Map of poll subscribers for API endpoints */\n    protected _subscribers: { [key: string]: Subscriber<any> } = {};\n    /** Map of promises for Service */\n    protected _promises: { [key: string]: Promise<any> } = {};\n    /** Comparison function for service items */\n    protected _compare: (a: T, b: T) => boolean = (a, b) =>\n        a === b || (a as any).id === (b as any).id;\n    /** Default filter function for list method */\n    protected _list_filter: (a: T) => boolean = a => !!a;\n\n    constructor(protected http: EngineHttpClient) {\n        super();\n        this._name = 'base';\n        this._singular = 'base';\n        this._api_route = 'base';\n        this.set('list', []);\n    }\n\n    /**\n     * Initailise service\n     */\n    public init() {\n        if (!this.parent) {\n            return this.timeout('init', () => this.init());\n        }\n        this.parent.initialised.pipe(first(_ => _)).subscribe(() => {\n            this.load().then(_ => this._initialised.next(true));\n        });\n    }\n\n    /**\n     * Get API route for the service\n     * @param engine Whether endpoint is using the application API or engine API\n     */\n    public route(engine: boolean = false) {\n        const endpoint = this.parent\n            ? engine\n                ? this.parent.engine_endpoint\n                : this.parent.endpoint\n            : '/api';\n        return `${endpoint}${this._api_route}`;\n    }\n    /** API Route of the service */\n    public get api_route() {\n        return this._api_route;\n    }\n\n    /**\n     * Get a service related setting from the settings service\n     * @param key Name of the setting. i.e. nested items can be grabbed using `.` to seperate key names\n     */\n    public setting(key: string) {\n        return this.parent ? this.parent.setting(`app.${this._name.toLowerCase()}.${key}`) : null;\n    }\n\n    /**\n     * Get the current value of the named property\n     * @param name Property name\n     */\n    public get<U = any>(name: string): U {\n        return this._subjects[name] && this._subjects[name] instanceof BehaviorSubject\n            ? (this._subjects[name] as BehaviorSubject<U>).getValue()\n            : null;\n    }\n\n    /**\n     * Listen to value change of the named property\n     * @param name Property name\n     * @param next Callback for value changes\n     */\n    public listen<U = any>(name: string, next: (_: U) => void): Subscription {\n        return this._observers[name] ? this._observers[name].subscribe(next) : null;\n    }\n\n    /**\n     * Update the value of the named property\n     * @param name Property name\n     * @param value New value\n     */\n    protected set<U = any>(name: string, value: U): void {\n        if (!this._subjects[name]) {\n            this._subjects[name] = new BehaviorSubject<U>(value);\n            this._observers[name] = this._subjects[name].asObservable();\n        } else {\n            this._subjects[name].next(value);\n        }\n    }\n\n    /**\n     * Get list of loaded items\n     * @param filterFn Function for filtering the list\n     */\n    public list(filterFn: (a: T) => boolean = this._list_filter): T[] {\n        const list = this.get('list') || [];\n        return list.reduce((a, i) => {\n            if (filterFn(i)) {\n                a.push(i);\n            }\n            return a;\n        }, []);\n    }\n\n    /**\n     * Get item with the given id from the loaded items\n     * @param id ID of the item\n     */\n    public item(id: string): T {\n        const list = this.get('list') || [];\n        return list.find(i => i.id === id || i.email === id);\n    }\n\n    /**\n     * Query the index of the API route associated with this service\n     * @param query_params Map of query paramaters to add to the request URL\n     */\n    public query(query_params: HashMap = { update_list: true }): Promise<T[] | HashMap[]> {\n        let engine = false;\n        let cache = 1000;\n        if (query_params) {\n            engine = !!query_params.engine;\n            delete query_params.engine;\n            cache = query_params.cache || 1000;\n            delete query_params.cache;\n        }\n        const query = toQueryString(query_params);\n        const key = `query|${query}`;\n        if (!this._promises[key]) {\n            this._promises[key] = new Promise((resolve, reject) => {\n                const url = `${this.route(engine)}${query ? '?' + query : ''}`;\n                let result: T[] | HashMap[] = [];\n                this.http.get(url).subscribe(\n                    (d: IEngineResponse | HashMap[]) => {\n                        result =\n                            d && d instanceof Array\n                                ? d.map(i => this.process(i))\n                                : d && !(d instanceof Array) && d.results\n                                ? (d.results as HashMap[])\n                                : [];\n                    },\n                    e => {\n                        reject(e);\n                        this._promises.new_item = null;\n                    },\n                    () => {\n                        if (\n                            (!query || (query_params && query_params.update_list)) &&\n                            result.length > 0 &&\n                            result[0] instanceof Object\n                        ) {\n                            this.set('list', this.updateList(this.get('list'), result as T[]));\n                            this.listing.next(this.get('list') || []);\n                        }\n                        resolve(result);\n                        this.timeout(key, () => (this._promises[key] = null), cache);\n                    }\n                );\n            });\n        }\n        return this._promises[key];\n    }\n\n    /**\n     * Query the API route for a sepecific item\n     * @param id ID of the item\n     * @param query_params Map of query paramaters to add to the request URL\n     */\n    public show(id: string, query_params: HashMap = {}): Promise<T> {\n        let engine = false;\n        if (query_params) {\n            engine = !!query_params.engine;\n            delete query_params.engine;\n        }\n        const query = toQueryString(query_params);\n        const key = `show|${id}|${query}`;\n        if (!this._promises[key]) {\n            this._promises[key] = new Promise<T>((resolve, reject) => {\n                const url = `${this.route(engine)}${query ? '?' + query : ''}`;\n                let result: T = null;\n                this.http.get(url).subscribe(\n                    d => (result = this.process(d)),\n                    e => {\n                        reject(e);\n                        this._promises[key] = null;\n                    },\n                    () => {\n                        resolve(result);\n                        this.timeout(key, () => (this._promises[key] = null), 1000);\n                    }\n                );\n            });\n        }\n        return this._promises[key];\n    }\n\n    /**\n     * Open modal for new item\n     */\n    public openNewModal(prefill?: { [name: string]: any }): Promise<T> {\n        return new Promise((resolve, reject) => {\n            // this.parent.Overlay.open('edit-item', { data: { service: this, item: prefill } }, (e) => {\n            //     if (e.type === 'finish') {\n            //         resolve(e.data.item as T);\n            //     } else {\n            //         reject();\n            //     }\n            // });\n        });\n    }\n\n    /**\n     * Make post request for a new item to the service\n     * @param form_data Data to post to the server\n     * @param query_params Map of query paramaters to add to the request URL\n     */\n    public add(form_data: HashMap, query_params: HashMap = {}): Promise<T> {\n        if (!this._promises.new_item) {\n            this._promises.new_item = new Promise<T>((resolve, reject) => {\n                const query = toQueryString(query_params);\n                const url = `${this.route(query_params.engine)}${query ? '?' + query : ''}`;\n                let result: T = null;\n                this.http.post(url, form_data).subscribe(\n                    d => (result = this.process(d)),\n                    e => {\n                        reject(e);\n                        this.analyticsEvent(`create-${this._name.toLowerCase()}-failed`);\n                        this._promises.new_item = null;\n                    },\n                    () => {\n                        resolve(result);\n                        this.set('list', this.updateList(this.get('list'), [result]));\n                        this.analyticsEvent(`create-${this._name.toLowerCase()}-success`);\n                        this._promises.new_item = null;\n                    }\n                );\n            });\n        }\n        return this._promises.new_item;\n    }\n\n    /**\n     * Perform API task for the given item ID\n     * @param id ID of the item\n     * @param task_name Name of the task\n     * @param form_data Map of data to pass to the API\n     */\n    public task<U = any>(id: string, task_name: string, form_data: HashMap = {}): Promise<U> {\n        const query = toQueryString(form_data);\n        const key = `task|${id}|${task_name}|${query}`;\n        if (!this._promises[key]) {\n            this._promises[key] = new Promise<U>((resolve, reject) => {\n                const post_data = { ...form_data, id, _task: task_name };\n                const url = `${this.route(form_data.engine)}/${id}/${task_name}`;\n                let result = null;\n                this.http.post(url, post_data).subscribe(\n                    d => (result = d),\n                    e => {\n                        reject(e);\n                        this.analyticsEvent(\n                            `${this._name.toLowerCase()}-task-${task_name}-failed`,\n                            id\n                        );\n                        this._promises[key] = null;\n                    },\n                    () => {\n                        resolve(result as U);\n                        this.analyticsEvent(\n                            `${this._name.toLowerCase()}-task-${task_name}-success`,\n                            id\n                        );\n                        this.timeout(key, () => (this._promises[key] = null), 1000);\n                    }\n                );\n            });\n        }\n        return this._promises[key];\n    }\n\n    /**\n     * Setup a poller for an API endpoint\n     * @param id Show request ID. Leave blank to poll on the query endpoint\n     * @param query_params Map of query paramaters to add to the polled URL\n     * @param delay Delay between each poll event\n     */\n    public poll(\n        id?: string,\n        query_params: HashMap = {},\n        delay: number = 5000\n    ): Observable<T | T[]> {\n        const key = `poll|${id || ''}|${toQueryString(query_params) || ''}`;\n        this.stopPoll(id, query_params);\n        this._subjects[key] = new Subject<T | T[]>();\n        this._observers[key] = this._subjects[key].asObservable();\n        const sub = this._subjects[key];\n        const query = { ...(query_params || {}), _poll: true };\n        if (id) {\n            this.show(id, query).then(\n                d => sub.next(d),\n                e => sub.error(e)\n            );\n            this.interval(\n                key,\n                () => {\n                    this.show(id, query).then(\n                        d => sub.next(d),\n                        e => sub.error(e)\n                    );\n                },\n                delay\n            );\n        } else {\n            this.query(query).then(\n                d => sub.next(d),\n                e => sub.error(e)\n            );\n            this.interval(\n                key,\n                () => {\n                    this.query(query).then(\n                        d => sub.next(d),\n                        e => sub.error(e)\n                    );\n                },\n                delay\n            );\n        }\n        return this._observers[key];\n    }\n\n    /**\n     * Destroy poller\n     * @param id ID of the polling event\n     * @param query_params Associtated query parameters of the poll request\n     */\n    public stopPoll(id?: string, query_params: HashMap = {}) {\n        const key = `poll|${id || ''}|${toQueryString(query_params) || ''}`;\n        if (this._subjects[key]) {\n            this._subjects[key].complete();\n            this._subjects[key] = null;\n            this._observers[key] = null;\n        }\n    }\n\n    /**\n     * Make put request for changes to the item with the given id\n     * @param id ID of the item being updated\n     * @param form_data New values for the item\n     * @param query_params Map of query paramaters to add to the request URL\n     */\n    public update(id: string, form_data: HashMap, query_params: HashMap = {}): Promise<T> {\n        const key = `update|${id}`;\n        if (!this._promises[key]) {\n            this._promises[key] = new Promise<T>((resolve, reject) => {\n                const query = toQueryString(query_params);\n                const url = `${this.route(query_params.engine)}/${id}${query ? '?' + query : ''}`;\n                let result: T = null;\n                this.http.put(url, form_data).subscribe(\n                    d => (result = this.process(d)),\n                    e => {\n                        reject(e);\n                        this.analyticsEvent(`update-${this._name.toLowerCase()}-failed`, id);\n                        this._promises[key] = null;\n                    },\n                    () => {\n                        resolve(result);\n                        this.set(\n                            'list',\n                            this.updateList(this.removeItem(this.get('list'), { id } as any), [\n                                result\n                            ])\n                        );\n                        this.analyticsEvent(`update-${this._name.toLowerCase()}-success`, id);\n                        this._promises[key] = null;\n                    }\n                );\n            });\n        }\n        return this._promises[key];\n    }\n\n    /**\n     * Make delete request for the given item\n     * @param id ID of item\n     */\n    public delete(id: string): Promise<void> {\n        const key = `delete|${id}`;\n        if (!this._promises[key]) {\n            this._promises[key] = new Promise<void>((resolve, reject) => {\n                const url = `${this.route()}/${id}`;\n                this.http.delete(url).subscribe(\n                    _ => null,\n                    e => reject(e),\n                    () => {\n                        this.set('list', this.removeItem(this.get('list'), { id } as any));\n                        resolve();\n                    }\n                );\n            });\n        }\n        return this._promises[key];\n    }\n\n    /**\n     * Add new API item from another service or API class\n     * @param id ID of the item/or service adding the new item\n     * @param data Raw API data for the new item\n     * @param type Adder type\n     */\n    public addFrom(\n        id: string,\n        data: HashMap,\n        type: 'class' | 'service' | 'other' = 'other'\n    ): string {\n        const new_item = this.process(data);\n        this.set('list', this.updateList(this.get('list'), [new_item]));\n        return (new_item as any).id;\n    }\n\n    /**\n     * Remove items with the given IDs from the list\n     * @param id ID of the item/or service remove the list of items\n     * @param remove_ids List of item IDs to remove\n     * @param type Remover type\n     */\n    public removeFrom(\n        id: string,\n        remove_ids: string[],\n        type: 'class' | 'service' | 'other' = 'other'\n    ) {}\n\n    /**\n     * Load initial data for the service\n     */\n    protected load(): Promise<void> {\n        return new Promise<void>(resolve => {\n            resolve();\n        });\n    }\n\n    /**\n     * Post analytics event for this service\n     * @param action Name of the action to post\n     */\n    protected analyticsEvent(action: string, label?: string) {\n        if (this.parent && this.parent.Analytics) {\n            this.parent.Analytics.event(\n                this._name,\n                `${this.parent.name.toLowerCase()}-${action}`,\n                label\n            );\n        }\n    }\n\n    /**\n     * Convert raw API data into a valid API Object\n     * @param raw_item Raw API data\n     */\n    protected process(raw_item: HashMap): T {\n        return raw_item as T;\n    }\n\n    /**\n     * Update recorded list of items\n     * @param old_list Old list of items\n     * @param list List of updated items\n     * @param compareFn Function to compare items to remove duplicates\n     */\n    protected updateList(\n        old_list: T[],\n        list: T[],\n        compareFn: (a: T, b: T) => boolean = this._compare\n    ): T[] {\n        if (!list || list.length === 0) {\n            return old_list;\n        }\n        const new_list: T[] = [];\n        const mixed_list = [...list, ...old_list];\n        if (!compareFn) {\n            compareFn = this._compare;\n        }\n        for (const item of mixed_list) {\n            const found = new_list.find(i => compareFn(i, item));\n            if (!found) {\n                new_list.push(item);\n            }\n        }\n        return new_list;\n    }\n\n    /**\n     * Remove the given item from the given list\n     * @param list List of items\n     * @param item Item to remove\n     * @param compareFn Function to compare items\n     */\n    protected removeItem(list: T[], item: T, compareFn?: (a: T, b: T) => boolean) {\n        const new_list = [];\n        if (!compareFn) {\n            compareFn = this._compare;\n        }\n        list.forEach(i => (compareFn(item, i) ? null : new_list.push(i)));\n        return new_list;\n    }\n}\n","\nimport { Injectable } from '@angular/core';\nimport { EngineUser } from '@placeos/ts-client';\n\nimport { BaseAPIService } from './base.service';\nimport { ComposerService } from '@placeos/composer';\n\nexport interface IComment {\n    id: string;\n    channel_id: string;\n    user_id: string;    // ACA User ID\n    user: EngineUser;\n    master_id: string;  // ID of master object\n    reply_to_id: string;\n    replies: IComment[];\n    name: string;       // User Staff Code\n    description: string;\n    other: any;\n    likes: string[];\n    dislikes: string[];\n    created_at: number;\n    updated_at: number;\n}\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class BackofficeCommentsService extends BaseAPIService<IComment> {\n\n    constructor(private _composer: ComposerService) {\n        super(undefined);\n        const sub = this._composer.initialised.subscribe((state) => {\n            if (state) {\n                this.http = this._composer.http;\n                sub.unsubscribe();\n            }\n        });\n    }\n\n    /**\n     * Task for adding the like state to comment\n     * @param id ID of the comment to like\n     * @param fields Query parameters\n     */\n    public like(id: string, fields?: { name: string, [fields: string]: any }) {\n        return this.task(id, 'like', fields);\n    }\n\n    /**\n     * Task for removing like state on the comment\n     * @param id ID of the comment to dislike\n     * @param fields Query parameters\n     */\n    public dislike(id: string, fields?: { name: string, [fields: string]: any }) {\n        return this.task(id, 'dislike', fields);\n    }\n\n    /**\n     * Task for removing like state on the comment\n     * @param id ID of the comment to dislike\n     * @param fields Query parameters\n     */\n    public removeVote(id: string, fields?: { name: string, [fields: string]: any }) {\n        return this.task(id, 'clear', fields);\n    }\n\n    /**\n     * Process list data for returned items\n     * @param list Raw item data from server\n     */\n    protected processList(list: any[]) {\n        const output_list = list.map(i => this.process(i));\n        this.processReplies(output_list);\n        return output_list;\n    }\n\n    /**\n     * Convert raw comment dat into local format\n     * @param cmt Raw comment data\n     */\n    protected process(cmt: any): IComment {\n        const comment: IComment = {\n            id: cmt.id,\n            channel_id: cmt.channel_id,\n            user_id: cmt.user_id,\n            user: null,\n            master_id: cmt.master_id,\n            reply_to_id: cmt.in_reply_to_id,\n            replies: [],\n            name: cmt.name,\n            description: cmt.description,\n            likes: cmt.likes,\n            other: {},\n            dislikes: cmt.dislikes,\n            created_at: cmt.created_at,\n            updated_at: cmt.updated_at,\n        };\n        if (comment.description[0] === '{') {\n            comment.other = JSON.parse(comment.description);\n            if (comment.other) {\n                comment.description = comment.other.comment;\n            }\n        }\n        this.parent.Users.query({ q: cmt.name }).then((list) => {\n            comment.user = list[0] || new EngineUser(this.parent.Users, cmt);\n        }, (err) => comment.user = new EngineUser(this.parent.Users, cmt));\n        return comment;\n    }\n\n    /**\n     * Link associated comments together\n     * @param cmt_list Array of comments\n     */\n    private processReplies(cmt_list: IComment[]) {\n        for (const i of cmt_list) {\n            if (i.reply_to_id) {\n                const id = i.reply_to_id;\n                for (const cmt of cmt_list) {\n                    if (cmt.id === id) {\n                        cmt.replies.push(i);\n                        break;\n                    }\n                }\n            }\n        }\n    }\n}\n","\nimport { Injectable } from '@angular/core';\nimport { ComposerService } from '@placeos/composer';\nimport { EngineSystem, EngineUser } from '@placeos/ts-client';\n\nimport { BaseAPIService } from './base.service';\n\nimport * as dayjs from 'dayjs';\n\nexport interface IEngineLogEntry {\n    id: string;\n    name: string;\n    notes?: string;\n    suspected?: boolean;\n    persisted?: boolean;\n    installed_device?: boolean;\n    ip?: string;\n    user_id?: string;\n    user?: EngineUser;\n    system_id?: string;\n    systems?: EngineSystem[];\n    display?: any;\n    created: number;\n    last_checked: number;\n    ended: number;\n}\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class BackofficeLogsService extends BaseAPIService<IEngineLogEntry> {\n\n    constructor(private _composer: ComposerService) {\n        super(undefined);\n        const sub = this._composer.initialised.subscribe((state) => {\n            if (state) {\n                this.http = this._composer.http;\n                sub.unsubscribe();\n            }\n        });\n        this._name = 'log';\n        this._api_route = '/logs';\n    }\n\n    public process(raw_item: any) {\n        const item: IEngineLogEntry = {\n            id: raw_item.id,\n            name: raw_item.name,\n            notes: raw_item.notes,\n            suspected: raw_item.suspected,\n            persisted: raw_item.persisted,\n            installed_device: raw_item.installed_device,\n            ip: raw_item.ip,\n            user_id: raw_item.user_id,\n            system_id: raw_item.system_id,\n            systems: raw_item.systems,\n            user: raw_item.user,\n            display: {\n                started: dayjs(raw_item.created_at * 1000).format(),\n                ended: dayjs(raw_item.ended_at * 1000).format('MMM d, YYYY - hh:mm A')\n            },\n            created: raw_item.created_at * 1000,\n            last_checked: raw_item.last_checked * 1000,\n            ended: raw_item.ended_at * 1000\n        };\n        return item;\n    }\n\n}\n","\nimport { Injectable } from '@angular/core';\nimport { ComposerService } from '@placeos/composer';\n\nimport { BaseAPIService } from './base.service';\n\nimport * as dayjs from 'dayjs';\n\nexport interface IEngineSearchResult {\n    id: string;\n    name: string;\n    type: string;\n    created: number;\n    display?: any;\n}\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class BackofficeSearchService extends BaseAPIService<IEngineSearchResult> {\n\n    constructor(private _composer: ComposerService) {\n        super(undefined);\n        const sub = this._composer.initialised.subscribe((state) => {\n            if (state) {\n                this.http = this._composer.http;\n                sub.unsubscribe();\n            }\n        });\n        this._name = 'search';\n        this._api_route = '/search';\n    }\n\n    public deleteItem() { return new Promise((rs, rj) => rj('No show for this service')); }\n    public updateItem() { return new Promise<any>((rs, rj) => rj('No show for this service')); }\n    public add() { return new Promise<any>((rs, rj) => rj('No show for this service')); }\n    public show() { return new Promise<any>((rs, rj) => rj('No show for this service')); }\n\n    protected process(raw_item: any) {\n        const item: IEngineSearchResult = {\n            id: raw_item.id,\n            name: raw_item.name,\n            type: raw_item.type,\n            created: raw_item.created_at * 1000\n        };\n        item.display = {\n            created: dayjs(item.created).format()\n        };\n        return item;\n    }\n\n}\n","\nimport { Injectable } from '@angular/core';\nimport { ComposerService } from '@placeos/composer';\n\nimport { BaseAPIService } from './base.service';\n\nexport interface IEngineStats {\n    id?: string;\n    name?: string;\n    period: string;\n    histogram?: { avg: number, count: number, max: number, min: number, sum: number }[];\n    interval?: number;\n    start?: number;\n}\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class BackofficeStatsService extends BaseAPIService<IEngineStats> {\n\n    constructor(private _composer: ComposerService) {\n        super(undefined);\n        const sub = this._composer.initialised.subscribe((state) => {\n            if (state) {\n                this.http = this._composer.http;\n                sub.unsubscribe();\n            }\n        });\n        this._name = 'stats';\n        this._api_route = '/stats';\n    }\n\n    public connections(fields?: any) {\n        return this.show('connections', fields);\n    }\n\n    public panels(fields?: any) {\n        return this.show('panels', fields);\n    }\n\n    public offline(fields?: any) {\n        return this.show('offline', fields);\n    }\n\n    public triggers(fields?: any) {\n        return this.show('triggers', fields);\n    }\n\n    public ignore_list(fields?: any) {\n        return this.show('triggers', fields);\n    }\n\n    protected process(raw_item: any) {\n        const item: IEngineStats = {\n            period: raw_item.period_name,\n            interval: raw_item.interval,\n            histogram: raw_item.histogram || [],\n            start: raw_item.period_start * 1000\n        };\n        return item;\n    }\n\n}\n","\nimport { Injectable } from '@angular/core';\nimport { ComposerService } from '@placeos/composer';\n\nimport { BaseAPIService } from './base.service';\nimport { IEngineLogEntry } from './logs.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class BackofficeSystemLogsService extends BaseAPIService<IEngineLogEntry> {\n\n    constructor(private _composer: ComposerService) {\n        super(undefined);\n        const sub = this._composer.initialised.subscribe((state) => {\n            if (state) {\n                this.http = this._composer.http;\n                sub.unsubscribe();\n            }\n        });\n        this._name = 'log';\n        this._api_route = '/system_logs';\n    }\n\n    protected process(raw_item: any) {\n        const item = this.parent.Logs.process(raw_item);\n        return item;\n    }\n\n}\n","import { ComposerService } from '@placeos/composer';\nimport { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { MatDialog } from '@angular/material/dialog';\nimport { EngineUsersService, EngineUser, EngineUserQueryOptions } from '@placeos/ts-client';\nimport { BehaviorSubject } from 'rxjs';\nimport { Md5 } from 'ts-md5/dist/md5';\n\nimport { FilterFn, DialogEvent } from '../../shared/utilities/types.utilities';\nimport { toQueryString } from 'src/app/shared/utilities/api.utilities';\nimport {\n    ConfirmModalComponent,\n    ConfirmModalData,\n    CONFIRM_METADATA\n} from '../../overlays/confirm-modal/confirm-modal.component';\n\nimport * as dayjs from 'dayjs';\nimport * as Sentry from '@sentry/browser';\n\ntype ServiceItem = EngineUser;\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class BackofficeUsersService extends EngineUsersService {\n    /** Name for a single user */\n    public readonly singular: string = 'user';\n    /** Behavior subject with the currently available list of users */\n    public readonly listing = new BehaviorSubject<ServiceItem[]>([]);\n    /** Active User */\n    public readonly user = new BehaviorSubject<ServiceItem>(null);\n    /** State of loading the user */\n    public readonly state = new BehaviorSubject<string>('');\n    /** Application Service */\n    public parent: any;\n    public readonly can_create: boolean = false;\n    public readonly can_edit: boolean = true;\n\n    /** Whether dark mode is enabled */\n    public get dark_mode(): boolean {\n        if (\n            !((this.user.getValue() || {}) as any).ui_theme &&\n            !localStorage.getItem('BACKOFFICE.theme') &&\n            window.matchMedia &&\n            window.matchMedia('(prefers-color-scheme: dark)').matches\n        ) {\n            return true;\n        }\n        return (\n            ((this.user.getValue() || {}) as any).ui_theme === 'dark' ||\n            localStorage.getItem('BACKOFFICE.theme') === 'dark'\n        );\n    }\n    public set dark_mode(state: boolean) {\n        if (state) {\n            localStorage.setItem('BACKOFFICE.theme', 'dark');\n            this.parent.set('dark_mode', state);\n            document.body.classList.add('dark-mode');\n        } else {\n            localStorage.setItem('BACKOFFICE.theme', 'light');\n            document.body.classList.remove('dark-mode');\n        }\n    }\n    /** Default method for filtering the available list */\n    private _filter_fn: FilterFn<ServiceItem> = _ => true;\n\n    constructor(\n        private _composer: ComposerService,\n        private http_unauth: HttpClient,\n        private _dialog: MatDialog\n    ) {\n        super(undefined);\n        const sub = this._composer.initialised.subscribe(state => {\n            if (state) {\n                this.http = this._composer.http;\n                sub.unsubscribe();\n                this.current().then(user => {\n                    this.user.next(user);\n                });\n            }\n        });\n    }\n\n    /**\n     * Get the available list of zones\n     * @param predicate Function to filter the zone list on\n     */\n    public list(predicate: FilterFn<ServiceItem> = this._filter_fn): ServiceItem[] {\n        return (this.listing.getValue() || []).filter(predicate);\n    }\n\n    public query(query_params?: EngineUserQueryOptions): Promise<ServiceItem[]> {\n        return new Promise((resolve, reject) => {\n            super.query(query_params).then(\n                list => {\n                    const old_list = this.list();\n                    const new_list = [...old_list, ...list];\n                    for (const item of new_list) {\n                        const found = new_list.findIndex(i => i.id === item.id && i !== item);\n                        if (found >= 0) {\n                            new_list.splice(new_list.indexOf(item), 1);\n                        }\n                    }\n                    this.listing.next(new_list);\n                    resolve(list);\n                },\n                e => reject(e)\n            );\n        });\n    }\n\n    public load(): Promise<void> {\n        console.log('Load user');\n        return new Promise(resolve => {\n            this.state.next('loading');\n            this.show('current').then(\n                user => {\n                    if (user) {\n                        this.user.next(user);\n                        this.parent.set('user', user);\n                        Sentry.configureScope(scope => scope.setUser({ email: user.email }));\n                        this.state.next('success');\n                        resolve();\n                        console.log('Dark mode:', this.dark_mode);\n                        this.dark_mode = this.dark_mode;\n                    } else {\n                        this.timeout('load', () => this.load().then(_ => resolve()), 600);\n                    }\n                },\n                () => this.timeout('load', () => this.load().then(_ => resolve()), 600)\n            );\n        });\n    }\n\n    /**\n     * Manually set the user access token\n     * @param token Token to set\n     * @param expiry Expiry time of the token\n     */\n    public setToken(token: string, expiry: number) {\n        if (!expiry) {\n            expiry = dayjs()\n                .add(7, 'd')\n                .valueOf();\n        }\n        const path = `${location.origin}${this.parent.setting('composer.route') ||\n            ''}/oauth-resp.html`;\n        if (localStorage) {\n            const client_id = Md5.hashStr(path);\n            localStorage.setItem(`${client_id}_access_token`, token);\n            localStorage.setItem(`${client_id}_expires_at`, `${expiry}`);\n            location.reload();\n        }\n        return path;\n    }\n\n    /**\n     * Login with given credentials\n     * @param fields Key value pairs of post parameters\n     */\n    public login(fields: any = {}) {\n        return new Promise((resolve, reject) => {\n            this.state.next('loading');\n            const query = toQueryString(fields);\n            let headers = new HttpHeaders();\n            headers = headers.append('Content-Type', 'application/x-www-form-urlencoded');\n            this.http_unauth.post('/auth/signin', query, { headers }).subscribe(\n                (res: any) => {\n                    if (sessionStorage) {\n                        const clientId = Md5.hashStr(`${location.origin}/oauth-resp.html`);\n                        sessionStorage.setItem(`${clientId}_login`, 'true');\n                    }\n                    this._composer.auth.authorise().then(token => {\n                        resolve();\n                    });\n                },\n                err => {\n                    if (err.status >= 400) {\n                        this.state.next('error');\n                    } else {\n                        if (sessionStorage) {\n                            const clientId = Md5.hashStr(`${location.origin}/oauth-resp.html`);\n                            sessionStorage.setItem(`${clientId}_login`, 'true');\n                        }\n                        this._composer.auth.authorise();\n                    }\n                    reject();\n                },\n                () => this.load()\n            );\n        });\n    }\n\n    /**\n     * Logout from the application\n     */\n    public logout() {\n        this._composer.auth.logout();\n    }\n\n    /**\n     * Open modal for editing an item\n     * @param item Item to edit\n     */\n    public async openEditModal(item: EngineUser): Promise<string> {\n        return '';\n    }\n\n    /**\n     * Open confirmation modal for deleting an item\n     * @param item Item to delete\n     */\n    public askDelete(item: EngineUser): Promise<string> {\n        return new Promise((resolve, reject) => {\n            let complete = false;\n            const ref = this._dialog.open<ConfirmModalComponent, ConfirmModalData>(\n                ConfirmModalComponent,\n                {\n                    ...CONFIRM_METADATA,\n                    data: {\n                        title: 'Delete User?',\n                        content: `Are you sure you want to delete this user?`,\n                        icon: { type: 'icon', class: 'backoffice-trash' }\n                    }\n                }\n            );\n            this.subscription(\n                'confirm_ref',\n                ref.componentInstance.event.subscribe((e: DialogEvent) => {\n                    if (e.reason === 'done') {\n                        complete = true;\n                        item.delete().then(\n                            () => resolve(),\n                            () => reject('Request failed')\n                        );\n                    }\n                })\n            );\n        });\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { ComposerService } from '@placeos/composer';\nimport { EngineDebugEvent, EngineModule } from '@placeos/ts-client';\nimport { BehaviorSubject, Observable } from 'rxjs';\n\nimport { BaseClass } from '../shared/globals/base.class';\nimport { HashMap } from '../shared/utilities/types.utilities';\n\nimport * as dayjs from 'dayjs';\n\nconst TERMINAL_COLOURS = {\n    debug: '\\u001b[34m',\n    info: '\\u001b[32m',\n    warn: '\\u001b[33m',\n    error: '\\u001b[31m',\n    fatal: '\\u001b[31m'\n};\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class EngineDebugService extends BaseClass {\n    /** List of the current state of events */\n    private _events = new BehaviorSubject<EngineDebugEvent[]>([]);\n    /** Observable for changes to the event listing */\n    private _event_obs = this._events.asObservable();\n    /** List of modules listening to debug events */\n    private _bound_modules: EngineModule[] = [];\n    /** Mapping of module IDs to display names */\n    private _module_names: HashMap<string> = {};\n    /** Whether debug console is enabled */\n    private _enabled: boolean;\n\n    /** Current list of debug events */\n    public get event_list(): EngineDebugEvent[] {\n        return this._events.getValue();\n    }\n\n    /** Observable for changes to the event listing */\n    public get events(): Observable<EngineDebugEvent[]> {\n        return this._event_obs;\n    }\n\n    /** Get terminal display string for all the events */\n    public get terminal_string(): string {\n        return this.event_list\n            .map(\n                event =>\n                    `${TERMINAL_COLOURS[event.level]}${dayjs().format('h:mm A')}, ${\n                        this._module_names[event.mod_id] ||\n                        event.mod_id ||\n                        '<UNKNOWN>'}, [${event.level.toUpperCase()}]\\u001b[0m ${event.message}`\n            )\n            .join('\\n');\n    }\n\n    /** Whether there are modules listening for debug messages */\n    public get is_listening(): boolean {\n        return this._enabled;\n    }\n\n    constructor(private _composer: ComposerService) {\n        super();\n        this._composer.realtime.debug_events.subscribe(event => {\n            if (this._bound_modules.find(mod => mod.id === event.mod_id)) {\n                const event_list = this.event_list;\n                event_list.push(event);\n                this._events.next(event_list);\n            }\n        });\n    }\n\n    /** Clear existing events */\n    public clearEvents() {\n        this._events.next([]);\n    }\n\n    /**\n     * Whether module is listening for debug events\n     */\n    public isListening(module: EngineModule): boolean {\n        return !!this._bound_modules.find(mod => mod.id === module.id);\n    }\n\n    /**\n     * Start listening to debug events for the given module\n     * @param module Module to start listening to\n     * @param module_name Display name for the module\n     */\n    public bind(module: EngineModule, module_name: string) {\n        if (module) {\n            const parts = module_name.split('_');\n            const index = +parts.splice(parts.length - 1, 1);\n            const options = {\n                sys: module.system_id,\n                mod: module.id,\n                index,\n                name: 'debug'\n            };\n            this._enabled = true;\n            this._composer.realtime.debug(options).then(() => {\n                this.subscription(`debug_${module.id}`, () => this._composer.realtime.ignore(options));\n                this._bound_modules.push(module);\n                this._module_names[module.id] = module_name;\n            });\n        }\n    }\n\n    /**\n     * Stop listening to debug events for module\n     * @param module Module to stop listening to\n     */\n    public unbind(module: EngineModule) {\n        if (module) {\n            this.unsub(`debug_${module.id}`);\n            this._bound_modules = this._bound_modules.filter(mod => mod.id !== module.id);\n        }\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable, Subscription } from 'rxjs';\n\nimport { HashMap } from '../shared/utilities/types.utilities';\nimport { unique } from '../shared/utilities/general.utilities';\n\n/** List of keys that cannot be in a combination by themselves or with each other */\nconst INVALID_STANDALONE_KEYS: string[] = ['control', 'shift', 'alt', 'meta', 'os'];\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class HotkeysService {\n    /** Map of subjects which store press states of keys */\n    private keydown_states: HashMap<BehaviorSubject<number>> = {};\n    /** Map of obserers for key state subjects */\n    private keydown_observers: HashMap<Observable<number>> = {};\n    /** List of keys at the end of a combination */\n    private combo_end: string[] = [];\n    /** List of registered hotkey combinations */\n    private registered_combos: string[][] = [];\n    /** Counter for the number of keydown events. Used for checking order of key presses */\n    private counter: number = 0;\n    /** Last key code to be pressed */\n    private last_down: string;\n\n    constructor() {\n        window.addEventListener('keydown', (event: KeyboardEvent) => {\n            if (\n                document.activeElement &&\n                (document.activeElement.tagName.toLowerCase() === 'input' ||\n                    document.activeElement.tagName.toLowerCase() === 'textarea')\n            ) {\n                return;\n            }\n            const code = this.mapKey((event.code || '').toLowerCase());\n            if (this.last_down !== code) {\n                this.setKeyState(code, ++this.counter);\n                if (this.combo_end.indexOf(code) >= 0) {\n                    event.preventDefault();\n                }\n                this.last_down = code;\n            }\n        });\n\n        window.addEventListener('keyup', (event: KeyboardEvent) => {\n            const code = this.mapKey((event.code || '').toLowerCase());\n            if (this.keydown_states[code]) {\n                this.keydown_states[code].next(null);\n            }\n            if (this.last_down === code) {\n                this.last_down = null;\n            }\n        });\n    }\n\n    /**\n     * Listen to the given key combination\n     * @param combo Array of key codes to listen to or a hotkey string e.g. `Alt+Shift+KeyK`\n     * @param next Callback for combination presses\n     */\n    public listen(combo: string | string[], next: () => void): Subscription {\n        combo = combo instanceof Array ? combo : combo.split('+');\n        const combination: string[] = combo.map(i => this.mapKey(i.toLowerCase()));\n        if (combination.length > 0 && this.validCombination(combination)) {\n            this.registered_combos.push(combination);\n            const last_key = combination[combination.length - 1];\n            this.setKeyState(last_key, null);\n            this.updateCombinationEndList();\n            return this.keydown_observers[last_key].subscribe(count => {\n                if (count) {\n                    const presses: number[] = [];\n                    if (combination.length > 0) {\n                        // Check that keys are pressed\n                        for (const key of combination) {\n                            const state = this.keydown_states[key];\n                            presses.push(state ? state.getValue() || -1 : -1);\n                        }\n                        // Check that keys are pressed in the correct order\n                        for (let i = 0; i < combination.length - 1; i++) {\n                            if (presses[i] > presses[i + 1]) {\n                                return;\n                            }\n                        }\n                    }\n                    const total = presses.reduce((a, v) => a + (v > 0 ? 1 : -1), 0);\n                    if (total >= combination.length) {\n                        next();\n                    }\n                }\n            });\n        }\n        return null;\n    }\n\n    /**\n     * Map key codes with multiple versions to simple form\n     * @param code Code to transform\n     */\n    private mapKey(code: string): string {\n        if (\n            code.indexOf('alt') >= 0 ||\n            code.indexOf('shift') >= 0 ||\n            code.indexOf('control') >= 0\n        ) {\n            return code.replace('left', '').replace('right', '');\n        }\n        return code;\n    }\n\n    /**\n     * Update the list of the last keys in combinations to allow for prevent default actions on pre-existing hotkeys\n     */\n    private updateCombinationEndList(): void {\n        const key_list = [];\n        for (const combo of this.registered_combos) {\n            key_list.push(combo[combo.length - 1]);\n        }\n        this.combo_end = unique(key_list);\n    }\n\n    /**\n     * Checks if the given hotkey combination is allowed and valid\n     * @param combo Array of key codes\n     */\n    private validCombination(combo: string[]): boolean {\n        let non_meta = 0;\n        for (const key of combo) {\n            if (INVALID_STANDALONE_KEYS.indexOf(key) < 0) {\n                non_meta++;\n            }\n        }\n        return non_meta > 0;\n    }\n\n    /**\n     * Update the state of a keycode\n     * @param code Code of the key\n     * @param value New state value for key\n     */\n    private setKeyState(code: string, value: number = null) {\n        if (!this.keydown_states[code]) {\n            this.keydown_states[code] = new BehaviorSubject(null);\n            this.keydown_observers[code] = this.keydown_states[code].asObservable();\n        }\n        this.keydown_states[code].next(value);\n    }\n}\n","import { Injectable, ErrorHandler } from '@angular/core';\n\nimport * as Sentry from '@sentry/browser';\n\n@Injectable()\nexport class SentryService implements ErrorHandler {\n    /**\n     * Handle error thrown by Angular\n     * @param error Angular error\n     */\n    public handleError(error) {\n        Sentry.captureException(error.originalError || error);\n        throw error;\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\nimport { BaseClass } from '../shared/globals/base.class';\nimport { HashMap } from '../shared/utilities/types.utilities';\nimport { VERSION } from 'src/environments/version';\nimport { getItemWithKeys } from '../shared/utilities/general.utilities';\n\nimport * as dayjs from 'dayjs';\n\ninterface SettingsMap {\n    api: HashMap;\n    local: HashMap;\n    session: HashMap;\n    [block: string]: HashMap;\n}\n\ndeclare global {\n    interface Window {\n        debug: boolean;\n    }\n}\n\nexport type ConsoleStream = 'debug' | 'warn' | 'log' | 'error';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class SettingsService extends BaseClass {\n\n    /** Map of settings */\n    private _settings: SettingsMap = { api: {}, local: {}, session: {} };\n    /** Store for promises */\n    private _promises: { [name: string]: Promise<any> } = {};\n    /** Name of the application */\n    private _app_name = 'ACA';\n\n    constructor(private http: HttpClient) {\n        super();\n        const now = dayjs();\n        const build = dayjs(VERSION.time);\n        const built = now.isSame(build, 'd') ? `Today at ${build.format('h:mmA')}` : build.format('D MMM YYYY, h:mmA');\n        this.log('CORE', `${VERSION.core_version}`, null, 'debug', true);\n        this.log('APP', `${VERSION.version} - ${VERSION.hash} | Built: ${built}`, null, 'debug', true);\n        this.init();\n    }\n\n    /**\n     * Initialise the settings\n     */\n    public async init() {\n        await this.loadFromFile('api');\n        this.loadStore('local', localStorage);\n        this.loadStore('session', sessionStorage);\n        if (this._settings.api.debug) {\n            window.debug = true;\n        }\n        if (this._settings.api.app && this._settings.api.app.name) {\n            this._app_name = this._settings.api.app.name;\n        }\n        this.log('Settings', 'Successfully loaded settings');\n        this._initialised.next(true);\n    }\n\n    /** Whether settings service has initialised */\n    public get app_name() { return this._app_name; }\n\n    /**\n     * Log data to the browser console\n     * @param type Type of message\n     * @param msg Message body\n     * @param args array of argments to log to the console\n     * @param stream Stream to emit the console on. 'debug', 'log', 'warn' or 'error'\n     * @param force Whether to force message to be emitted when debug is disabled\n     */\n    public log(type: string, msg: string, args?: any, stream: ConsoleStream = 'debug', force: boolean = false) {\n        if (window.debug || force) {\n            const colors: string[] = ['color: #E91E63', 'color: #3F51B5', 'color: default'];\n            if (args) {\n                console[stream](`%c[${this.app_name}]%c[${type}] %c${msg}`, ...colors, args);\n            } else {\n                console[stream](`%c[${this.app_name}]%c[${type}] %c${msg}`, ...colors);\n            }\n        }\n    }\n\n    /**\n     * Get a setting\n     * @param key Name of the setting. i.e. nested items can be grabbed using `.` to seperate key names\n     */\n    public get(key: string): any {\n        const keys = key.split('.');\n        let value = null;\n        if (keys[0] === 'session') {\n            keys.shift();\n            value = getItemWithKeys(keys, this._settings.session);\n        } else if (keys[0] === 'local') {\n            keys.shift();\n            value = getItemWithKeys(keys, this._settings.local);\n        } else {\n            value = getItemWithKeys(keys, this._settings.api) ||\n                getItemWithKeys(keys, this._settings.session) ||\n                getItemWithKeys(keys, this._settings.local);\n        }\n        return value;\n    }\n\n    /**\n     * Load settings from the given Storage object\n     * @param name Root key for the settings\n     * @param store Storage item to add to the load into the settings\n     */\n    private loadStore(name: string, store: Storage) {\n        if (store) {\n            for (let i = 0; i < store.length; i++) {\n                const key = store.key(i);\n                const item = store.getItem(key);\n                if (item) { this._settings[name][key] = item; }\n            }\n        }\n    }\n\n    /**\n     * Load setting data from a file\n     * @param name Namespace to add file data to\n     * @param file URL to file to load setting data from\n     */\n    private async loadFromFile(name: string, file: string = 'assets/settings.json', tries: number = 0) {\n        if (file !== 'assets/settings.json' && tries > 5) {\n            return Promise.resolve();\n        }\n        const file_name = file.split('/')[file.split('/').length - 1];\n        console.log('File name:', file_name, window[file_name]);\n        // Check if data has been loaded into the global space\n        if (window[file_name] instanceof Object) {\n            this._settings[name] = { ...(this._settings[name] || {}), ...window[file_name] };\n            return Promise.resolve();\n        }\n        const key = `load|${name}|${file}`;\n        if (!this._promises[key]) {\n            this._promises[key] = new Promise<void>((resolve, reject) => {\n                this.http.get(file).subscribe(\n                    (data) => {\n                        this._settings[name] = { ...(this._settings[name] || {}), ...(data || {}) };\n                    }, (e) => {\n                        this.log('Settings', `Failed to load settings from \"${file}\"`);\n                        this._promises[key] = null;\n                        this.timeout(`load_${file_name}`, () => {\n                            this.loadFromFile(name, file, ++tries).then(() => resolve());\n                        }, 2000);\n                    }, () => resolve()\n                );\n            });\n        }\n        return this._promises[key];\n    }\n\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport {\n    EngineResource,\n    EngineSystem,\n    EngineZone,\n    EngineDriver,\n    EngineModule\n} from '@placeos/ts-client';\n\nimport { BaseDirective } from 'src/app/shared/globals/base.directive';\nimport { ApplicationService } from '../../services/app.service';\nimport { EngineServiceLike } from '../utilities/types.utilities';\nimport { first } from 'rxjs/operators';\nimport { ItemCreateUpdateModalComponent } from 'src/app/overlays/item-modal/item-modal.component';\nimport { MatDialogRef } from '@angular/material/dialog';\n\n@Component({\n    selector: 'app-base-root-component',\n    template: '',\n    styles: []\n})\nexport class BaseRootComponent<T = EngineResource<any>> extends BaseDirective implements OnInit {\n    /** Name of the API service assoicated with the  */\n    public readonly service_name: string;\n    /** ID of the item to render */\n    public id: string;\n    /** Item to render on the UI */\n    public item: T;\n    /** ID of the active tab in the item space */\n    public tab: string;\n    /** Whether the active item data is being loaded */\n    public loading_item: boolean;\n    /** Total number of items in the list */\n    public total: number;\n    /** Whether the sidebar should be shown on a mobile device */\n    public show_sidebar: boolean;\n    /** Modal Reference */\n    public modal_ref: MatDialogRef<any>;\n    /** Service to get data from */\n    public service: EngineServiceLike;\n\n    /** Service for the active module */\n    public get module(): EngineServiceLike {\n        return this.service;\n    }\n\n    constructor(\n        protected _service: ApplicationService,\n        protected _route: ActivatedRoute,\n        protected _router: Router\n    ) {\n        super();\n        this.service_name = 'Systems';\n        this.service = this._service.Systems;\n    }\n\n    public ngOnInit() {\n        this.subscription(\n            'route.params',\n            this._route.paramMap.subscribe(params => {\n                if (params.has('id') && params.get('id') !== '-') {\n                    this.loading_item = true;\n                    const id = decodeURIComponent(params.get('id'));\n                    if (this._service.get('BACKOFFICE.active_item_id') !== id) {\n                        this.id = id;\n                        this.loadItem();\n                    } else {\n                        this.setActiveItem(this._service.get('BACKOFFICE.active_item'));\n                    }\n                } else if (params.has('id') && params.get('id') === '-') {\n                    this.id = '-';\n                    this.setActiveItem(null);\n                }\n                this.timeout('sidebar', () => (this.show_sidebar = !this.id));\n            })\n        );\n        this._service.initialised.pipe(first(_ => _)).subscribe(() => {\n            this._service.title = this.service_name;\n            this.init();\n        });\n\n        this.subscription(\n            'new_item',\n            this._service.Hotkeys.listen(['KeyN'], () => this.newItem())\n        );\n        this.subscription(\n            'edit_item',\n            this._service.Hotkeys.listen(['KeyE'], () => this.editItem())\n        );\n        this.subscription(\n            'delete_item',\n            this._service.Hotkeys.listen(['KeyD'], () => this.deleteItem())\n        );\n    }\n\n    public init() {}\n\n    /**\n     * Handler events from the sidebar\n     * @param event Sidebar event\n     */\n    public sidebarEvent(event: any) {\n        this.timeout(\n            'sidebar',\n            () => {\n                if (event && event.type === 'new') {\n                    this.newItem();\n                } else {\n                    this.toggleSidebar();\n                }\n            },\n            20\n        );\n    }\n\n    /**\n     * Update the state of showing the sidebar\n     * @param state New show state\n     */\n    public toggleSidebar() {\n        this.timeout('sidebar', () => (this.show_sidebar = !this.show_sidebar));\n    }\n\n    /**\n     * Handle actions on the active item\n     * @param event User action\n     */\n    public itemEvent(event: any) {\n        if (!event) {\n            return;\n        }\n        if (event.type === 'tab' && this.item && event.value) {\n            this._router.navigate([], {\n                relativeTo: this._route,\n                queryParams: { tab: event.value },\n                queryParamsHandling: 'merge'\n            });\n        } else if (event.type === 'new') {\n            this.newItem();\n        } else if (event.type === 'edit') {\n            this.editItem();\n        } else if (event.type === 'delete' && this.item) {\n            this.deleteItem();\n        }\n    }\n\n    /**\n     * Open create modal for a new item\n     */\n    protected newItem() {}\n\n    /**\n     * Open edit modal for active item\n     */\n    protected editItem() {}\n\n    protected deleteItem() {}\n\n    protected loadValues() {}\n\n    /**\n     * Load the data for the active item\n     */\n    protected loadItem() {\n        this.timeout('loading', () => (this.loading_item = true), 10);\n        this.service.show(this.id, { complete: true }).then(\n            item => this.setActiveItem(item),\n            () => {\n                this._service.notifyError(\n                    `Failed to load data for ${this.service._name} \"${this.id}\"`\n                );\n                this.loading_item = false;\n                this._service.navigate([this.service._api_route]);\n            }\n        );\n    }\n\n    protected setActiveItem(new_item: T) {\n        this.item = new_item;\n        this._service.set('BACKOFFICE.active_item_id', this.id);\n        this._service.set('BACKOFFICE.active_item', this.item);\n        if (this.item) {\n            this.subscription(\n                'item_changes',\n                (this.item as any).changeEvents.subscribe(event => {\n                    if (event.type === 'item_saved') {\n                        this.setActiveItem(event.metadata as any);\n                    }\n                })\n            );\n            this.loadValues();\n            this.loadSettings();\n        }\n        this.timeout('item', () => (this.loading_item = false));\n    }\n\n    protected loadSettings(): void {\n        if (\n            this.item instanceof EngineSystem ||\n            this.item instanceof EngineZone ||\n            this.item instanceof EngineDriver ||\n            this.item instanceof EngineModule\n        ) {\n            this._service.set('loading_settings', true);\n            this._service.EngineSettings.query({ parent_id: this.item.id }).then(\n                list => {\n                    this._service.set('loading_settings', false);\n                    for (const settings of list) {\n                        (this.item as any).settings[settings.encryption_level] = settings;\n                    }\n                },\n                err => {\n                    this._service.set('loading_settings', false);\n                    this._service.notifyError(\n                        `Error loading settings. Error: ${err.message || err}`\n                    );\n                }\n            );\n        }\n    }\n}\n","import {\n    Component,\n    ViewChild,\n    ElementRef,\n    AfterViewInit,\n    Input,\n    HostListener,\n    OnInit\n} from '@angular/core';\nimport { MatMenuTrigger, MatMenuPanel } from '@angular/material/menu';\n\nimport { BaseDirective } from '../../globals/base.directive';\nimport { ApplicationService } from 'src/app/services/app.service';\n\n@Component({\n    selector: '[context-menu]',\n    templateUrl: './context-menu.template.html',\n    styleUrls: ['./context-menu.styles.scss']\n})\nexport class ContextMenuComponent extends BaseDirective implements OnInit, AfterViewInit {\n    /** List of context menu items */\n    @Input('context-menu') public menu: MatMenuPanel;\n    /** Offset of the context menu on the x axis */\n    @Input() public offset_x = 0;\n    /** Offset of the context menu on the y axis */\n    @Input() public offset_y = 0;\n    /** Top position of the menu */\n    public top: number;\n    /** Whether menu show to the left of the cursor */\n    public right: boolean;\n    /** Whether the context menu should be shown */\n    public show: boolean;\n    /** Location of the menu */\n    public position: { top: number; left: number };\n\n    @ViewChild('container', { static: true }) private container: ElementRef<HTMLDivElement>;\n    @ViewChild(MatMenuTrigger, { static: true }) private trigger: MatMenuTrigger;\n\n    @HostListener('contextmenu', ['$event']) public onEvent(event) {\n        event.preventDefault();\n        this.position = { top: event.clientY + this.offset_y, left: event.clientX + this.offset_x };\n        if (this.trigger) {\n            this.trigger.openMenu();\n        }\n        this.timeout('update_position', () => this.updatePosition(), 50);\n    }\n\n    constructor(private _service: ApplicationService, private _element: ElementRef<HTMLElement>) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this.position = { top: 0, left: 0 };\n    }\n\n    public ngAfterViewInit() {\n        setTimeout(() => this.updatePosition(), 10);\n    }\n\n    /** Update the position of the context menu */\n    public updatePosition() {\n        if (!this.container || !this.container.nativeElement) {\n            return setTimeout(() => this.updatePosition(), 50);\n        }\n        const box = this.container.nativeElement.getBoundingClientRect();\n        this.right = false;\n        this.top = 0;\n        if (window.innerHeight < box.bottom) {\n            this.top = window.innerHeight - (box.bottom + 5);\n        }\n        this.right = box.right - 5 > window.innerWidth;\n    }\n}\n","<ng-content></ng-content>\n<div\n    class=\"context-placeholder\"\n    #container\n    [style.top]=\"position.top + 'px'\"\n    [style.left]=\"position.left + 'px'\"\n    [matMenuTriggerFor]=\"menu\"\n>\n</div>\n","import { Component, OnInit, forwardRef, Input } from '@angular/core';\nimport { NG_VALUE_ACCESSOR, ControlValueAccessor } from '@angular/forms';\n\nimport * as dayjs from 'dayjs';\nimport { BaseDirective } from 'src/app/shared/globals/base.directive';\n\n@Component({\n    selector: 'a-date-field',\n    templateUrl: './date-field.component.html',\n    styleUrls: ['./date-field.component.scss'],\n    providers: [\n        {\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: forwardRef(() => DateFieldComponent),\n            multi: true\n        }\n    ]\n})\nexport class DateFieldComponent extends BaseDirective implements OnInit, ControlValueAccessor {\n    /** Earliest date available the user is allowed to pick */\n    @Input('from') public from_time: number = dayjs().valueOf();\n    /** Latest date available the user is allowed to pick */\n    @Input('to') public to_time: number;\n    /** Whether to show the calendar tooltip */\n    public show_tooltip: boolean;\n    /** Currently selected date */\n    public date: number;\n    /** Form control on change handler */\n    private _onChange: (_: number) => void;\n    /** Form control on touch handler */\n    private _onTouch: (_: number) => void;\n\n    /** First allowed date on the calendar */\n    public get from(): number {\n        return (\n            this.from_time ||\n            dayjs()\n                .startOf('d')\n                .valueOf()\n        );\n    }\n    /** Current date value */\n    public get until(): number {\n        return (\n            this.to_time ||\n            dayjs()\n                .endOf('d')\n                .add(1, 'y')\n                .valueOf()\n        );\n    }\n    /** Display value for the current date */\n    public get date_string(): string {\n        return dayjs(this.date).format('DD MMM YYYY');\n    }\n\n    public ngOnInit() {\n        this.date = dayjs().valueOf();\n    }\n\n    /**\n     * Update the form field value\n     * @param new_value New value to set on the form field\n     */\n    public setValue(new_value: number) {\n        this.date = new_value;\n        if (this._onChange) {\n            this._onChange(new_value);\n        }\n        this.show_tooltip = false;\n    }\n\n    /**\n     * Update local value when form control value is changed\n     * @param value The new value for the component\n     */\n    public writeValue(value: number) {\n        this.date = value;\n        this.show_tooltip = false;\n    }\n\n    /**\n     * Registers a callback function that is called when the\n     * control's value changes in the UI.\n     * @param fn The callback function to register\n     */\n    public registerOnChange(fn: (_: number) => void): void {\n        this._onChange = fn;\n    }\n\n    /**\n     * Registers a callback function is called by the forms\n     * API on initialization to update the form model on blur.\n     * @param fn The callback function to register\n     */\n    public registerOnTouched(fn: (_: number) => void): void {\n        this._onTouch = fn;\n    }\n\n    /** Set the state of the tooltip to closed after delay */\n    public closeTooltip() {\n        this.timeout('close_tooltip', () => (this.show_tooltip = false), 50);\n    }\n\n    /** Cancel tooltip close event */\n    public cancelClose() {\n        this.timeout('cancel_close', () => this.clearTimeout('close_tooltip'), 10);\n    }\n}\n","<div class=\"date-field\" role=\"button\" form-field tabindex=\"0\" (keydown.enter)=\"show_tooltip = !show_tooltip\">\n    <div class=\"display\" (tapped)=\"show_tooltip = !show_tooltip\">{{ date_string }}</div>\n    <div class=\"icon\" (tapped)=\"show_tooltip = !show_tooltip\">\n        <app-icon\n            [icon]=\"{\n                type: 'icon',\n                class: 'material-icons',\n                content: show_tooltip ? 'arrow_drop_up' : 'arrow_drop_down'\n            }\"\n        ></app-icon>\n    </div>\n    <div class=\"tooltip\" *ngIf=\"show_tooltip\" (window:click)=\"closeTooltip()\" (click)=\"cancelClose()\">\n        <a-date-picker\n            [ngModel]=\"date\"\n            [options]=\"{ from: from, to: until }\"\n            (month)=\"cancelClose()\"\n            (ngModelChange)=\"setValue($event)\"\n        ></a-date-picker>\n    </div>\n</div>\n","import { Component, OnInit, forwardRef, Input, SimpleChanges, OnChanges } from '@angular/core';\nimport { NG_VALUE_ACCESSOR, ControlValueAccessor } from '@angular/forms';\nimport { Subject, Observable, of } from 'rxjs';\nimport { switchMap, debounceTime, distinctUntilChanged, map, catchError } from 'rxjs/operators';\n\nimport { EngineResource, EngineModule, EngineDriverRole } from '@placeos/ts-client';\n\nimport { BaseDirective } from 'src/app/shared/globals/base.directive';\nimport { EngineServiceLike, HashMap, Identity } from 'src/app/shared/utilities/types.utilities';\n\n@Component({\n    selector: 'item-search-field',\n    templateUrl: './item-search-field.component.html',\n    styleUrls: ['./item-search-field.component.scss'],\n    providers: [\n        {\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: forwardRef(() => ItemSearchFieldComponent),\n            multi: true,\n        },\n    ],\n})\nexport class ItemSearchFieldComponent<T extends Identity = any> extends BaseDirective\n    implements OnInit, OnChanges, ControlValueAccessor {\n    /** Limit available options to these */\n    @Input() public options: T[];\n    /** Function for filtering out options */\n    @Input() public exclude: (_: T) => boolean;\n    /** Minimum number of characters needed to start a server query */\n    @Input('minLength') public min_length = 0;\n    /** Whether item list is loading */\n    @Input() public loading: boolean;\n    /** Service used for searching items */\n    @Input() public service: EngineServiceLike;\n    /** Currently selected item */\n    public active_item: T;\n    /** Item list to display */\n    public item_list: T[];\n    /** Current display value of the search input field  */\n    public search_str: string;\n    /** List of items from an API search */\n    public search_results$: Observable<T[]>;\n    /** Subject holding the value of the search */\n    public readonly search$ = new Subject<string>();\n    /** Form control on change handler */\n    private _onChange: (_: T) => void;\n    /** Form control on touch handler */\n    private _onTouch: (_: T) => void;\n\n    /** Map of item names to their IDs */\n    public get item_name(): HashMap<string> {\n        const map = {};\n        const list = this.item_list || [];\n        for (let item of list) {\n            if (item instanceof EngineModule) {\n                const detail =\n                    item.role === EngineDriverRole.Service\n                        ? item.uri\n                        : item.role === EngineDriverRole.Logic\n                        ? item.control_system_id\n                        : item.ip;\n                map[item.id] = `${item.name || '<Unnamed>'} <span class=\"small\">${detail}<span>`;\n            } else {\n                map[item.id] = (item as any).custom_name || item.name || '<Unnamed>';\n            }\n        }\n        return map;\n    }\n\n    public ngOnInit(): void {\n        // Listen for input changes\n        this.search_results$ = this.search$.pipe(\n            debounceTime(400),\n            distinctUntilChanged(),\n            switchMap((query) => {\n                this.loading = true;\n                return this.options && this.options.length > 0\n                    ? Promise.resolve(this.options)\n                    : !this.min_length || query.length >= this.min_length\n                    ? (this.service.query({ q: query || '', cache: 5 * 1000 }) as Promise<T[]>)\n                    : Promise.resolve([]);\n            }),\n            catchError((_) => of([])),\n            map((list: T[]) => {\n                this.loading = false;\n                const search = (this.search_str || '').toLowerCase();\n                console.log('List:', list);\n                return list.filter((item: any) => {\n                    const match =\n                        item.name.toLowerCase().indexOf(search) >= 0 ||\n                        (item.email || '').toLowerCase().indexOf(search) >= 0;\n                    return match && (this.exclude ? !this.exclude(item) : true);\n                });\n            })\n        );\n        // Process API results\n        this.subscription(\n            'search_results',\n            this.search_results$.subscribe((list) => (this.item_list = list))\n        );\n        this.timeout('init', () => {\n            this.search$.next('');\n        });\n    }\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        if (changes.service) {\n            this.search$.next('');\n        }\n    }\n\n    /**\n     * Reset the search string back to the name of the active item\n     */\n    public resetSearchString() {\n        this.timeout(\n            'value',\n            () => {\n                if (this.active_item) {\n                    this.search_str = this.active_item.name || this.search_str;\n                }\n            },\n            10\n        );\n    }\n\n    /**\n     * Update the form field value\n     * @param new_value New value to set on the form field\n     */\n    public setValue(new_value: T): void {\n        this.active_item = new_value;\n        if (this._onChange) {\n            this._onChange(new_value);\n        }\n        this.resetSearchString();\n    }\n\n    /**\n     * Update local value when form control value is changed\n     * @param value The new value for the component\n     */\n    public writeValue(value: T) {\n        console.log('Value:', value);\n        this.active_item = value;\n        this.resetSearchString();\n    }\n\n    /**\n     * Registers a callback function that is called when the\n     * control's value changes in the UI.\n     * @param fn The callback function to register\n     */\n    public registerOnChange(fn: (_: T) => void): void {\n        this._onChange = fn;\n    }\n\n    /**\n     * Registers a callback function is called by the forms API\n     * on initialization to update the form model on blur.\n     * @param fn The callback function to register\n     */\n    public registerOnTouched(fn: (_: T) => void): void {\n        this._onTouch = fn;\n    }\n}\n","<div class=\"item-search-field\" form-field>\n    <mat-form-field appearance=\"outline\">\n        <input\n            matInput\n            name=\"item-search\"\n            [(ngModel)]=\"search_str\"\n            (ngModelChange)=\"search$.next($event)\"\n            [placeholder]=\"'Search for ' + (service?.name || service?._name || '') + '...'\"\n            [matAutocomplete]=\"auto\"\n            (focus)=\"search_str = ''; search$.next(' ')\"\n            (blur)=\"resetSearchString()\"\n        />\n        <div class=\"prefix\" matPrefix>\n            <app-icon [icon]=\"{ type: 'icon', class: 'material-icons', content: 'search' }\"></app-icon>\n        </div>\n        <div class=\"suffix\" matSuffix *ngIf=\"loading\">\n            <mat-spinner diameter=\"16\"></mat-spinner>\n        </div>\n    </mat-form-field>\n    <mat-autocomplete #auto=\"matAutocomplete\" (optionSelected)=\"setValue($event.option.value)\">\n        <mat-option *ngFor=\"let option of item_list\" [value]=\"option\">\n            <div class=\"name\" [innerHTML]=\"item_name[option.id] | sanitize\"></div>\n            <div class=\"email\">{{ option.id }}{{ option.extra ? ' - ' + option.extra : '' }}</div>\n        </mat-option>\n    </mat-autocomplete>\n</div>\n","import { Component, forwardRef, Input } from '@angular/core';\nimport { NG_VALUE_ACCESSOR, ControlValueAccessor } from '@angular/forms';\n\nimport { BaseDirective } from 'src/app/shared/globals/base.directive';\nimport { HashMap } from 'src/app/shared/utilities/types.utilities';\n\n@Component({\n    selector: 'object-list-field',\n    templateUrl: './object-list-field.component.html',\n    styleUrls: ['./object-list-field.component.scss'],\n    providers: [\n        {\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: forwardRef(() => ObjectListFieldComponent),\n            multi: true\n        }\n    ]\n})\nexport class ObjectListFieldComponent extends BaseDirective implements ControlValueAccessor {\n    /** List of fields that can be populated for each object */\n    @Input() public fields: string[];\n    /** List of objects */\n    public active_list: HashMap[] = [];\n\n    /** Form control on change handler */\n    private _onChange: (_: HashMap[]) => void;\n    /** Form control on touch handler */\n    private _onTouch: (_: HashMap[]) => void;\n\n    /** Add a new item the the active list */\n    public addRow() {\n        if (!this.active_list) {\n            this.active_list = [];\n        }\n        this.active_list.push({});\n        this.setValue(this.active_list);\n    }\n\n    /**\n     * Remove item from the active list\n     * @param item Item to remove\n     */\n    public removeRow(item: HashMap) {\n        const index = this.active_list.indexOf(item);\n        if (index >= 0) {\n            this.active_list.splice(index, 1);\n        }\n        this.setValue(this.active_list);\n    }\n\n    /**\n     * Update the form field value\n     * @param new_value New value to set on the form field\n     */\n    public setValue(new_value: HashMap[]): void {\n        if (this._onChange) {\n            this._onChange(new_value);\n        }\n    }\n\n    /**\n     * Update local value when form control value is changed\n     * @param value The new value for the component\n     */\n    public writeValue(value: HashMap[]) {\n        this.active_list = value;\n    }\n\n    /**\n     * Registers a callback function that is called when the\n     * control's value changes in the UI.\n     * @param fn The callback function to register\n     */\n    public registerOnChange(fn: (_: HashMap[]) => void): void {\n        this._onChange = fn;\n    }\n\n    /**\n     * Registers a callback function is called by the forms\n     * API on initialization to update the form model on blur.\n     * @param fn The callback function to register\n     */\n    public registerOnTouched(fn: (_: HashMap[]) => void): void {\n        this._onTouch = fn;\n    }\n}\n","<div class=\"object-list\" *ngIf=\"fields && fields.length\">\n    <div class=\"header row\" *ngIf=\"active_list && active_list.length\">\n        <div class=\"field\" *ngFor=\"let field of fields\" [attr.name]=\"field\">\n            {{ field }}\n        </div>\n        <div class=\"gap\"></div>\n    </div>\n    <div class=\"row\" *ngFor=\"let item of active_list\">\n        <div class=\"field\" *ngFor=\"let field of fields\" [attr.name]=\"field\">\n            <mat-form-field appearance=\"outline\">\n                <input\n                    matInput\n                    [name]=\"field\"\n                    [placeholder]=\"field\"\n                    [(ngModel)]=\"item[field]\"\n                    (ngModelChange)=\"setValue(active_list)\"\n                />\n            </mat-form-field>\n        </div>\n        <button mat-icon-button (tapped)=\"removeRow(item)\">\n            <app-icon [icon]=\"{ class: 'backoffice-trash' }\"></app-icon>\n        </button>\n    </div>\n    <div class=\"row footer\">\n        <button mat-button type=\"button\" (tapped)=\"addRow()\">\n            <div class=\"contents\">\n                <app-icon [icon]=\"{ class: 'backoffice-plus' }\"></app-icon>\n                <div class=\"text\">New Item</div>\n            </div>\n        </button>\n    </div>\n</div>\n","/// <reference path=\"../../../../../../node_modules/monaco-editor/monaco.d.ts\" />\n\nimport {\n    Component,\n    forwardRef,\n    ViewChild,\n    ElementRef,\n    OnInit,\n    Input,\n    OnDestroy,\n    SimpleChanges,\n    OnChanges\n} from '@angular/core';\nimport { NG_VALUE_ACCESSOR, ControlValueAccessor } from '@angular/forms';\n\nimport { BaseDirective } from 'src/app/shared/globals/base.directive';\n\n// import * as monaco_yaml from 'monaco-editor/dev/vs/basic-languages/yaml/yaml.js';\n\n@Component({\n    selector: 'settings-form-field',\n    templateUrl: './settings-field.component.html',\n    styleUrls: ['./settings-field.component.scss'],\n    providers: [\n        {\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: forwardRef(() => SettingsFieldComponent),\n            multi: true\n        }\n    ]\n})\nexport class SettingsFieldComponent extends BaseDirective\n    implements OnInit, OnChanges, OnDestroy, ControlValueAccessor {\n    /** Whether form field is readonly */\n    @Input() public readonly = true;\n    /** Resize */\n    @Input() public resize: boolean;\n    /** Input language for syntax highlighting and error checking */\n    @Input() public lang = 'yaml';\n    /** Current value for the */\n    public settings_string = ' ';\n    /** Form control on change handler */\n    private _onChange: (_: string) => void;\n    /** Form control on touch handler */\n    private _onTouch: (_: string) => void;\n\n    /** Reference to the element container the monaco editor */\n    @ViewChild('editor', { static: true }) private element: ElementRef;\n    /** API object for the monaco editor */\n    private editor: any;\n\n    public ngOnInit(): void {\n        this.createEditor();\n    }\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        if (changes.readonly && this.editor) {\n            this.editor.updateOptions({ readOnly: !!this.readonly });\n        }\n        if (changes.lang && this.editor) {\n            this.editor.updateOptions({ language: this.lang || 'yaml' });\n        }\n        if (changes.resize) {\n            this.resizeEditor();\n        }\n    }\n\n    public ngOnDestroy() {\n        if (this.editor) {\n            this.editor.dispose();\n            this.editor = null;\n        }\n    }\n\n    /**\n     * Update the form field value\n     * @param new_value New value to set on the form field\n     */\n    public setValue(new_value: string): void {\n        this.settings_string = new_value;\n        if (this._onChange) {\n            this._onChange(new_value);\n        }\n    }\n\n    /**\n     * Update local value when form control value is changed\n     * @param value The new value for the component\n     */\n    public writeValue(value: string) {\n        this.settings_string = `${value}`;\n        if (this.editor) {\n            if (this.readonly) {\n                this.editor.updateOptions({ readOnly: false });\n                this.editor.setValue(this.settings_string);\n                this.editor.updateOptions({ readOnly: true });\n            } else {\n                this.editor.setValue(this.settings_string);\n            }\n        }\n    }\n\n    /**\n     * Registers a callback function that is called when the control's value changes in the UI.\n     * @param fn The callback function to register\n     */\n    public registerOnChange(fn: (_: string) => void): void {\n        this._onChange = fn;\n    }\n\n    /**\n     * Registers a callback function is called by the forms API on initialization to update the form model on blur.\n     * @param fn The callback function to register\n     */\n    public registerOnTouched(fn: (_: string) => void): void {\n        this._onTouch = fn;\n    }\n\n    /** Update sizing of the editor after window has resized */\n    public resizeEditor() {\n        this.timeout('resize', () => this.createEditor(), 100);\n    }\n\n    /**\n     * Create and render the monaco editor to the component\n     */\n    private createEditor() {\n        if (this.element && this.element.nativeElement) {\n            if (this.editor) {\n                this.editor.dispose();\n                this.editor = null;\n            }\n            // monaco.languages.register(monaco_yaml);\n            this.editor = monaco.editor.create(this.element.nativeElement, {\n                value: this.settings_string || '',\n                language: this.lang || 'yaml',\n                fontFamily: `\"Fira Code\", monospace`,\n\n                lineNumbers: 'on',\n                roundedSelection: false,\n                scrollBeyondLastLine: false,\n                readOnly: this.readonly,\n                theme: 'vs-dark'\n            });\n            this.editor.onDidChangeModelContent(() => {\n                this.setValue(this.editor.getValue());\n            });\n        }\n    }\n}\n","<div class=\"settings-field\" widget (window:resize)=\"resizeEditor()\">\n    <div class=\"editor\" #editor></div>\n</div>\n","import {\n    Component,\n    Input,\n    Output,\n    EventEmitter,\n    OnChanges,\n    ViewChildren,\n    ElementRef,\n    QueryList,\n    SimpleChanges,\n    forwardRef\n} from '@angular/core';\nimport { NG_VALUE_ACCESSOR, ControlValueAccessor } from '@angular/forms';\nimport { MatDialog } from '@angular/material/dialog';\nimport { EngineModuleFunction, HashMap, TriggerFunction, EngineSystem } from '@placeos/ts-client';\n\nimport { ApplicationService } from '../../../../services/app.service';\nimport { BaseDirective } from '../../../globals/base.directive';\nimport { ViewResponseModalComponent } from 'src/app/overlays/view-response-modal/view-response-modal.component';\n\ninterface EngineModuleLike {\n    id: string;\n    name: string;\n    module: string;\n    index: number;\n}\n\ninterface ModuleFunction extends EngineModuleFunction {\n    name?: string;\n}\n\n@Component({\n    selector: 'system-exec-field',\n    templateUrl: './system-exec-field.template.html',\n    styleUrls: ['./system-exec-field.styles.scss'],\n    providers: [\n        {\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: forwardRef(() => SystemExecFieldComponent),\n            multi: true\n        }\n    ]\n})\nexport class SystemExecFieldComponent extends BaseDirective\n    implements OnChanges, ControlValueAccessor {\n    /** ID of the system to execute command on */\n    @Input() public system: EngineSystem;\n    /** Whether the selected function is executable from this field */\n    @Input() public executable = true;\n    /** Emitter for exec results */\n    @Output() public event = new EventEmitter();\n    /** List of modules of the system */\n    public devices: EngineModuleLike[] = [];\n    /** List of available functions for the active module  */\n    public methods: ModuleFunction[] = [];\n    /** Currently selected module */\n    public active_module: EngineModuleLike;\n    /** Current selected module function */\n    public active_method: ModuleFunction;\n    /** Mapping or errors to field names */\n    public error: HashMap<boolean> = {};\n    /** Whether the selected function's params are valid */\n    public fields_valid: boolean;\n    /** Mapping of function arguments to values */\n    public fields: HashMap = {};\n    /** Index of the active function param field */\n    public active_field: number;\n    /** Current location with the input fields for function params */\n    public field_pos: number;\n    /** Previous location with the input fields for function params */\n    public last_location: number;\n    /** Current value of the active input field */\n    public field_value: string;\n    /** Parameter list for the active function */\n    public param_list: [string, string, any?][] = [];\n\n    /** Form control on change handler */\n    private _onChange: (_: TriggerFunction) => void;\n    /** Form control on touch handler */\n    private _onTouch: (_: TriggerFunction) => void;\n\n    /** List of elements containing arguments */\n    @ViewChildren('argument') private arg_list: QueryList<ElementRef>;\n\n    /** Mapping of function execution details */\n    public get function_value(): TriggerFunction {\n        if (!this.fields_valid) {\n            return null;\n        }\n        const args = this.processArguments();\n        const method = this.active_method ? this.active_method : { order: [], params: {}, name: '' };\n        return {\n            mod: `${this.active_module.module}_${this.active_module.index}`,\n            method: method.name,\n            args: args.reduce((map, arg, index) => {\n                map[method.params[method.order[index]][1]] = arg;\n                return map;\n            }, {})\n        };\n    }\n\n    public get placeholder(): HashMap<string> {\n        const map = {};\n        for (const arg of this.param_list) {\n            map[arg[0]] = (arg[2] !== undefined ? '[' + arg[0] + (arg[2] ? '=' + arg[2] : '') + ']' : arg[0])\n        }\n        return map;\n    }\n\n    constructor(private service: ApplicationService, private _dialog: MatDialog) {\n        super();\n    }\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        if (changes.system) {\n            this.devices = [];\n            this.loadModules();\n        }\n    }\n\n    /**\n     * Load the available modules for the active system\n     * @param offset Page offset of the list\n     */\n    public loadModules(offset: number = 0) {\n        if (this.system) {\n            this.service.Modules.query({ control_system_id: this.system.id, offset, limit: 500, complete: true } as any).then(\n                list => {\n                    this.devices = (list || []).filter(device => device.running).map(device => {\n                        const module_name =\n                            device.custom_name ||\n                            device.name\n                        return {\n                            id: device.id,\n                            name: device.name,\n                            module: module_name,\n                            index: 1\n                        };\n                    });\n                    this.devices.sort(\n                        (a, b) =>\n                            this.system.modules.indexOf(a.id) - this.system.modules.indexOf(b.id)\n                    );\n                    this.devices.forEach(\n                        device =>\n                            (device.index =\n                                this.devices\n                                    .filter(d => d.module === device.module)\n                                    .findIndex(mod => mod.id === device.id) + 1)\n                    );\n                    if (\n                        this.active_module &&\n                        !(this.devices || []).find(mod => mod.id === this.active_module.id)\n                    ) {\n                        this.devices.unshift(this.active_module);\n                    }\n                },\n                () => null\n            );\n        }\n    }\n\n    /**\n     * Load the available functions for the given module\n     * @param item Module to grab function list for\n     */\n    public loadFunctions(item: EngineModuleLike) {\n        this.methods = null;\n        this.fields = {};\n        this.active_module = item;\n        this.service.Systems.functionList(this.system.id, item.module, item.index).then(\n            list => {\n                if (list) {\n                    this.methods = Object.keys(list).map(i => ({ name: i, ...list[i] }));\n                    this.setMethod(this.active_method.name, this.fields);\n                }\n            },\n            () => {\n                this.service.notifyInfo('No executable methods returned.');\n            }\n        );\n    }\n\n    public selectFunction(fn: ModuleFunction) {\n        this.active_method = fn;\n        if (fn) {\n            this.param_list = Object.keys(this.active_method.params).map(\n                i => [i, ...this.active_method.params[i]] as any\n            );\n        }\n        this.checkFields();\n    }\n\n    /**\n     * Validate the arguments are valid JSON types\n     */\n    public checkFields() {\n        // Check fields\n        this.fields_valid = !!this.active_method;\n        this.error = {};\n        if (this.active_method) {\n            const params = this.param_list;\n            for (const arg of params || []) {\n                if (arg[2] === undefined && !this.fields[arg[0]]) {\n                    this.fields_valid = false;\n                    return;\n                } else {\n                    try {\n                        JSON.parse(`[${this.fields[arg[0]] || 'null'}]`);\n                    } catch (e) {\n                        this.error[arg[0]] = true;\n                        this.fields_valid = false;\n                    }\n                }\n            }\n        }\n        // Update field state\n        const args = this.arg_list.toArray();\n        if (args && args.length > 0) {\n            const current = args[this.active_field];\n            if (current) {\n                this.field_pos = current.nativeElement.selectionEnd;\n                this.timeout('field', () => (this.field_value = current.nativeElement.value));\n            }\n        }\n        this.setValue(this.function_value);\n    }\n\n    /**\n     * Move cursor to the next argument field\n     */\n    public nextField(e) {\n        if (e && e.preventDefault) {\n            e.preventDefault();\n        }\n        if (this.arg_list) {\n            const args = this.arg_list.toArray();\n            const current = args[this.active_field].nativeElement;\n            const other = e.key.toLowerCase() !== 'arrowright';\n            const right_arrow =\n                e.key.toLowerCase() === 'arrowright' &&\n                this.last_location === (current.value || '').length;\n            if ((other || right_arrow) && this.active_field < args.length - 1) {\n                const el = args[this.active_field + 1].nativeElement;\n                el.focus();\n                el.selectionStart = el.selectionEnd = 0;\n            }\n            this.last_location = current.selectionEnd;\n        }\n    }\n\n    public focused(index: number) {\n        this.active_field = index;\n        const args = this.arg_list.toArray();\n        const current = args[this.active_field];\n        this.field_pos = current.nativeElement.selectionEnd;\n        this.last_location = (current.nativeElement.value || '').length;\n    }\n\n    /**\n     * Move cursor to the previous argument field\n     */\n    public previousField(e) {\n        if (e && e.preventDefault) {\n            e.preventDefault();\n        }\n        if (this.arg_list) {\n            const args = this.arg_list.toArray();\n            const current = args[this.active_field];\n            const backspace = e.key.toLowerCase() === 'backspace' && this.last_location === 0;\n            const left_arrow = e.key.toLowerCase() === 'arrowleft' && this.last_location === 0;\n            if (\n                (backspace || left_arrow) &&\n                current.nativeElement.selectionEnd === 0 &&\n                this.active_field > 0\n            ) {\n                const el = args[this.active_field - 1].nativeElement;\n                el.focus();\n                el.selectionStart = el.selectionEnd = (el.value || '').length;\n            }\n            this.last_location = current.nativeElement.selectionEnd;\n        }\n    }\n\n    /**\n     * Execute the selected method\n     */\n    public execute() {\n        if (!this.executable) {\n            return;\n        }\n        this.checkFields();\n        if (this.fields_valid) {\n            // Check if any optional arguments have a value\n            const args = this.processArguments();\n            // Execute function\n            const details = {\n                method: this.active_method.name,\n                module: this.active_module.module,\n                index: this.active_module.index,\n                args\n            };\n            this.service.Systems.execute(\n                this.system.id,\n                details.method,\n                details.module,\n                details.index,\n                details.args\n            ).then(\n                result => {\n                    this.service.notifySuccess(\n                        'Command successful executed.\\nView Response?',\n                        'View',\n                        () => this.viewDetails(result)\n                    );\n                },\n                err => {\n                    if (typeof err === 'string' && err.length < 64) {\n                        this.service.notifyError(err);\n                    } else {\n                        this.service.notifyError(\n                            `Executing '${this.active_method.name}' failed.\\nView Error?`,\n                            'View',\n                            () => this.viewDetails(err.response)\n                        );\n                    }\n                }\n            );\n        } else {\n            this.service.notifyError('One or more fields are invalid.');\n        }\n    }\n\n    /**\n     * Process the active list of argument values\n     */\n    private processArguments(): any[] {\n        const arg_list = [];\n        for (const arg of this.active_method.order) {\n            arg_list.push(this.fields[arg] || null);\n        }\n        if (this.active_method.arity < 0) {\n            const len = arg_list.length;\n            for (let i = len - 1; i >= Math.abs(this.active_method.arity) - 1; i--) {\n                if (arg_list[i]) {\n                    break;\n                }\n                arg_list.pop();\n            }\n        }\n        // Format arguments\n        let args = `[`;\n        for (const arg of arg_list) {\n            if (args !== '[') {\n                args += ',';\n            }\n            args += `${arg}`;\n        }\n        args += ']';\n        let argument_list = [];\n        try {\n            argument_list = JSON.parse(args);\n        } catch (e) {\n            console.error(e);\n        }\n        return argument_list;\n    }\n\n    /**\n     * Update the form field value\n     * @param new_value New value to set on the form field\n     */\n    public setValue(new_value: TriggerFunction): void {\n        if (this._onChange) {\n            this._onChange(new_value);\n        }\n    }\n\n    /**\n     * Update local value when form control value is changed\n     * @param value The new value for the component\n     */\n    public writeValue(value: TriggerFunction) {\n        if (value) {\n            if (value.mod) {\n                const parts = value.mod.split('_');\n                this.active_module = {\n                    id: value.mod,\n                    name: value.mod,\n                    module: parts[0],\n                    index: +parts[1]\n                };\n                if (!(this.devices || []).find(mod => mod.id === this.active_module.id)) {\n                    this.devices.unshift(this.active_module);\n                }\n            }\n            this.setMethod(value.method, value.args);\n            if (value.args) {\n                this.fields = value.args;\n            }\n        }\n    }\n\n    private setMethod(name: string, args: HashMap = {}) {\n        if (name) {\n            const method = (this.methods || []).find(a_method => a_method.name === name);\n            if (!method) {\n                this.active_method = {\n                    name,\n                    arity: Object.keys(args).length - 1,\n                    params: Object.keys(args).map(key => ['req', key]) as any,\n                    order: Object.keys(args)\n                };\n                this.methods.unshift(this.active_method);\n            } else {\n                this.active_method = method;\n            }\n        }\n    }\n\n    /** View Results of the execute */\n    private viewDetails(content: any) {\n        this._dialog.open<ViewResponseModalComponent>(ViewResponseModalComponent, {\n            data: { content }\n        });\n    }\n\n    /**\n     * Registers a callback function that is called when the control's value changes in the UI.\n     * @param fn The callback function to register\n     */\n    public registerOnChange(fn: (_: TriggerFunction) => void): void {\n        this._onChange = fn;\n    }\n\n    /**\n     * Registers a callback function is called by the forms API on initialization to update the form model on blur.\n     * @param fn The callback function to register\n     */\n    public registerOnTouched(fn: (_: TriggerFunction) => void): void {\n        this._onTouch = fn;\n    }\n}\n","<section class=\"execute\" *ngIf=\"system && system.id && devices && devices.length > 0; else empty_state\">\n    <div class=\"row\">\n        <mat-form-field appearance=\"outline\">\n            <mat-select #select [value]=\"active_module\" (valueChange)=\"loadFunctions($event)\" placeholder=\"Select a device\">\n                <mat-option *ngFor=\"let option of devices || []\" [value]=\"option\">\n                    {{ option.module || option.name || \"&lt;Unnamed&gt;\" }} {{ option.index ? option.index : '' }}\n                </mat-option>\n            </mat-select>\n        </mat-form-field>\n        <ng-container *ngIf=\"active_module\">\n            <mat-form-field appearance=\"outline\" *ngIf=\"methods && methods.length; else empty_function_state\">\n                <mat-select\n                    #select\n                    [value]=\"active_method\"\n                    (valueChange)=\"selectFunction($event)\"\n                    placeholder=\"Select a function\"\n                >\n                    <mat-option *ngFor=\"let option of methods || []\" [value]=\"option\">\n                        {{ option.name }}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n        </ng-container>\n        <button *ngIf=\"active_method && executable\" [class.not-mobile]=\"true\" mat-button [disabled]=\"!fields_valid\" (tapped)=\"execute()\">\n            Execute\n        </button>\n    </div>\n    <div class=\"row function\" *ngIf=\"active_method\">\n        <div class=\"fn-input\">\n            <div class=\"bracket\">{{active_method.name}}(</div>\n            <div class=\"arg\" *ngFor=\"let arg of param_list; let i = index\">\n                <span class=\"seperator\" [class.solid]=\"arg[2] !== undefined || fields[arg[0]]\"\n                    >{{(i > 0 ? ',&nbsp;' : '')}}</span\n                >\n                <input\n                    #argument\n                    [(ngModel)]=\"fields[arg[0]]\"\n                    (ngModelChange)=\"checkFields()\"\n                    [class.error]=\"error && error[arg[0]]\"\n                    [style.width]=\"(.6 * (fields[arg[0]] || placeholder[arg[0]]).length + .3) + 'em'\"\n                    [placeholder]=\"placeholder[arg[0]]\"\n                    (keyup.enter)=\"nextField($event)\"\n                    (keydown.,)=\"nextField($event)\"\n                    (keyup.arrowright)=\"nextField($event)\"\n                    (keyup.backspace)=\"previousField($event)\"\n                    (keyup.arrowleft)=\"previousField($event)\"\n                    (focus)=\"focused(i)\"\n                />\n            </div>\n            <div class=\"bracket\">)</div>\n        </div>\n    </div>\n    <button *ngIf=\"active_method && executable\" [class.mobile-only]=\"true\" mat-button [disabled]=\"!fields_valid\" (tapped)=\"execute()\">\n        Execute\n    </button>\n</section>\n<ng-template #empty_state>\n    <div class=\"info-block\">\n        <div class=\"text\">No running modules on the system</div>\n    </div>\n</ng-template>\n<ng-template #empty_function_state>\n    <div class=\"info-block\">\n        <div class=\"text\">No executable methods on the selected module</div>\n    </div>\n</ng-template>\n","import {\n    Component,\n    forwardRef,\n    Input,\n    ViewChild,\n    OnInit,\n    SimpleChanges,\n    OnChanges\n} from '@angular/core';\nimport { NG_VALUE_ACCESSOR, ControlValueAccessor } from '@angular/forms';\nimport { MatSelect } from '@angular/material/select';\n\nimport { BaseDirective } from 'src/app/shared/globals/base.directive';\nimport { Identity } from 'src/app/shared/utilities/types.utilities';\nimport { timeFormatString } from 'src/app/shared/utilities/general.utilities';\n\nimport * as dayjs from 'dayjs';\n\n@Component({\n    selector: 'a-time-field',\n    templateUrl: './time-field.component.html',\n    styleUrls: ['./time-field.component.scss'],\n    providers: [\n        {\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: forwardRef(() => TimeFieldComponent),\n            multi: true\n        }\n    ]\n})\nexport class TimeFieldComponent extends BaseDirective\n    implements OnInit, OnChanges, ControlValueAccessor {\n    /** Time step between each allowed time option */\n    @Input() public step = 15;\n    /** Whether past times are allowed */\n    @Input() public no_past_times = true;\n    /** String representing the currently set time */\n    public date: number = dayjs().valueOf();\n    /** String representing the currently set time */\n    public time: string = dayjs().format('HH:mm');\n    /** Available time blocks for the selected date */\n    public _time_options: Identity[];\n    /** Whether select field should be shown */\n    public show_select: boolean;\n    /** Form control on change handler */\n    private _onChange: (_: number) => void;\n    /** Form control on touch handler */\n    private _onTouch: (_: number) => void;\n\n    /** Select field for selecting the time */\n    @ViewChild('select') private select_field: MatSelect;\n\n    public ngOnInit(): void {\n        this.show_select = true;\n        this._time_options = this.generateAvailableTimes(this.date, !this.no_past_times, this.step);\n        this.timeout('hide', () => (this.show_select = false));\n    }\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        if (changes.no_past_times || changes.step) {\n            this._time_options = this.generateAvailableTimes(\n                this.date,\n                !this.no_past_times,\n                this.step\n            );\n        }\n    }\n\n    /** Available time blocks for the selected date */\n    public get time_options() {\n        const time = (this.time || '00:00').split(':');\n        const date = dayjs(this.date)\n            .hour(+time[0])\n            .minute(+time[1]);\n        if (\n            date.minute() % 15 !== 0 &&\n            !this._time_options.find(option => option.id === date.format('HH:mm'))\n        ) {\n            this._time_options.push({\n                name: `${date.format(timeFormatString())}`,\n                id: date.format('HH:mm')\n            });\n            this._time_options.sort((a, b) => `${a.id}`.localeCompare(`${b.id}`));\n        }\n        return this._time_options;\n    }\n\n    /**\n     * Update the form field value\n     * @param new_value New value to set on the form field\n     */\n    public setValue(new_value: string): void {\n        this.time = new_value;\n        if (this._onChange) {\n            const time = (this.time || '00:00').split(':');\n            const date = dayjs(this.date)\n                .hour(+time[0])\n                .minute(+time[1]);\n            this._onChange(date.valueOf());\n        }\n    }\n\n    /**\n     * Update local value when form control value is changed\n     * @param value The new value for the component\n     */\n    public writeValue(value: number) {\n        this.date = value;\n        const date = dayjs(this.date);\n        this.time = date.format('HH:mm');\n        this._time_options = this.generateAvailableTimes(this.date, !this.no_past_times, this.step);\n    }\n\n    /**\n     * Registers a callback function that is called when the control's value changes in the UI.\n     * @param fn The callback function to register\n     */\n    public registerOnChange(fn: (_: number) => void): void {\n        this._onChange = fn;\n    }\n\n    /**\n     * Registers a callback function is called by the forms API on initialization to update the form model on blur.\n     * @param fn The callback function to register\n     */\n    public registerOnTouched(fn: (_: number) => void): void {\n        this._onTouch = fn;\n    }\n\n    /**\n     * Show select field for time options\n     */\n    public showSelect() {\n        this.show_select = true;\n        this.timeout('on_shown', () => {\n            if (this.select_field) {\n                this.select_field.focus();\n                this.select_field.open();\n                this.subscription(\n                    'listen_close',\n                    this.select_field.openedChange.subscribe(state => {\n                        if (!state) {\n                            this.show_select = false;\n                        }\n                    })\n                );\n            }\n        });\n    }\n\n    /**\n     * Generate a list of time options for the given date\n     * @param datestamp Date to generate options for\n     * @param show_past Whether past times should be options\n     */\n    private generateAvailableTimes(\n        datestamp: number,\n        show_past: boolean,\n        step: number = 15\n    ): Identity[] {\n        const now = dayjs();\n        let date = dayjs(datestamp);\n        const blocks: Identity[] = [];\n        if (show_past || date.isAfter(now, 'd')) {\n            date = date.startOf('d');\n        }\n        date = date.minute(Math.ceil(date.minute() / step) * step);\n        const end = date.endOf('d');\n        // Add options for the rest of the day\n        while (date.isBefore(end, 'm')) {\n            blocks.push({\n                name: `${date.format(timeFormatString())}`,\n                id: date.format('HH:mm')\n            });\n            date = date.add(step, 'm');\n        }\n        return blocks;\n    }\n}\n","<div class=\"time-field\" role=\"button\" form-field tabindex=\"0\" (keydown.enter)=\"showSelect()\" *ngIf=\"!show_select\">\n    <div class=\"display\">\n        <input matInput type=\"time\" [ngModel]=\"time\" (ngModelChange)=\"setValue($event)\" />\n    </div>\n    <div class=\"icon\" (tapped)=\"showSelect()\">\n        <app-icon\n            [icon]=\"{\n                type: 'icon',\n                class: 'material-icons',\n                content: show_select ? 'arrow_drop_up' : 'arrow_drop_down'\n            }\"\n        ></app-icon>\n    </div>\n</div>\n<mat-form-field appearance=\"outline\" *ngIf=\"show_select\">\n    <mat-select #select [value]=\"time\" (valueChange)=\"setValue($event)\">\n        <mat-option *ngFor=\"let option of time_options\" [value]=\"option.id\">\n            {{ option.name }}\n        </mat-option>\n    </mat-select>\n</mat-form-field>\n","import { Component, OnInit, Renderer2, ViewChild, ElementRef } from '@angular/core';\n\nimport { EngineDebugService } from 'src/app/services/debug.service';\nimport { ANIMATION_SHOW_CONTRACT_EXPAND_BIDIR } from '../../globals/angular-animations';\nimport { BaseDirective } from '../../globals/base.directive';\nimport { eventToPoint } from '../../utilities/general.utilities';\nimport { Point } from '../../utilities/types.utilities';\n\n@Component({\n    selector: 'app-debug-output',\n    templateUrl: './debug-output.component.html',\n    styleUrls: ['./debug-output.component.scss'],\n    animations: [ANIMATION_SHOW_CONTRACT_EXPAND_BIDIR]\n})\nexport class DebugOutputComponent extends BaseDirective implements OnInit {\n    /** Whether display output is shown */\n    public show_content: boolean = true;\n    /** Display string for debug logs */\n    public logs: string;\n    /** Height of the debug console */\n    public height: number = 384;\n    /** Width of the debug console */\n    public width: number = 768;\n    /** Toggle to resize the terminal display */\n    public resize: boolean;\n    /** Start point for resizing the console box */\n    private _resize_start: Point;\n\n    @ViewChild('content', { static: false }) private _content_el: ElementRef<HTMLDivElement>;\n\n    /** Whether user is listening for debug information */\n    public get is_enabled(): boolean {\n        return this._service.is_listening;\n    }\n    constructor(private _service: EngineDebugService, private _renderer: Renderer2) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.subscription(\n            'changes',\n            this._service.events.subscribe(_ => {\n                this.logs = this._service.terminal_string;\n            })\n        );\n    }\n\n    /** Clear all the debug logs */\n    public clearDebugMessages() {\n        this._service.clearEvents();\n    }\n\n    public startResize(event: MouseEvent | TouchEvent, dir: 'x' | 'y' | 'xy') {\n        this._resize_start = eventToPoint(event);\n        if (event instanceof MouseEvent) {\n            this.subscription(\n                'resize_move',\n                this._renderer.listen('window', 'mousemove', event => this.resizeMove(event, dir))\n            );\n            this.subscription(\n                'resize_end',\n                this._renderer.listen('window', 'mouseup', _ => {\n                    this.unsub('resize_move');\n                    this.unsub('resize_end');\n                    const box = this._content_el.nativeElement.getBoundingClientRect();\n                    this.height = box.height;\n                    this.width = box.width;\n                })\n            );\n        } else {\n            this.subscription(\n                'resize_move',\n                this._renderer.listen('window', 'touchmove', event => this.resizeMove(event, dir))\n            );\n            this.subscription(\n                'resize_end',\n                this._renderer.listen('window', 'touchend', _ => {\n                    this.unsub('resize_move');\n                    this.unsub('resize_end');\n                    const box = this._content_el.nativeElement.getBoundingClientRect();\n                    this.height = box.height;\n                    this.width = box.width;\n                })\n            );\n        }\n    }\n\n    private resizeMove(event: MouseEvent | TouchEvent, dir: 'x' | 'y' | 'xy') {\n        const point = eventToPoint(event);\n        const diff = { x: point.x - this._resize_start.x, y: point.y - this._resize_start.y };\n        if (dir.indexOf('x') >= 0) {\n            this.width = this.width - diff.x;\n        }\n        if (dir.indexOf('y') >= 0) {\n            this.height = this.height - diff.y;\n        }\n        this._resize_start = point;\n        this.timeout('resize', () => this.resize = !this.resize, 50);\n    }\n\n}\n","<ng-container *ngIf=\"is_enabled\">\n    <div class=\"debug-output\" [class.disabled]=\"!show_content\">\n        <div class=\"content\" #content [@show]=\"show_content ? 'show' : 'hide'\" [style.height]=\"height + 'px'\" [style.width]=\"width + 'px'\">\n            <div class=\"header\">\n                <div class=\"text\">Debug Console</div>\n                <button mat-button (tapped)=\"clearDebugMessages()\">Clear</button>\n            </div>\n            <a-terminal [content]=\"logs\" [resize]=\"resize\"></a-terminal>\n            <div\n                class=\"resize-bar top\"\n                (mousedown)=\"startResize($event, 'y')\"\n                (touchstart)=\"startResize($event, 'y')\"\n            ></div>\n            <div\n                class=\"resize-bar left\"\n                (mousedown)=\"startResize($event, 'x')\"\n                (touchstart)=\"startResize($event, 'x')\"\n            ></div>\n            <div\n                class=\"resize-bar top-left\"\n                (mousedown)=\"startResize($event, 'xy')\"\n                (touchstart)=\"startResize($event, 'xy')\"\n            ></div>\n        </div>\n        <button mat-icon-button (tapped)=\"show_content = !show_content\">\n            <app-icon\n                [icon]=\"{ class: show_content ? 'backoffice-cross' : 'backoffice-terminal' }\"\n            ></app-icon>\n        </button>\n    </div>\n</ng-container>\n","import { Component, Input } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\n\n@Component({\n    selector: 'application-form',\n    templateUrl: './application-form.component.html',\n    styleUrls: ['./application-form.component.scss']\n})\nexport class ApplicationFormComponent {\n    /** Group of form fields used for creating the system */\n    @Input() public form: FormGroup;\n}\n","<div class=\"application form\" *ngIf=\"form\">\n    <form [formGroup]=\"form\">\n        <div class=\"fieldset\">\n            <div class=\"field\" *ngIf=\"form.controls.name\">\n                <label\n                    for=\"application-name\"\n                    [class.error]=\"form.controls.name.invalid && form.controls.name.touched\"\n                    >Name<span>*</span>:</label\n                >\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"application-name\"\n                        placeholder=\"Application Name\"\n                        formControlName=\"name\"\n                        required\n                    />\n                    <mat-error *ngIf=\"form.controls.name.invalid\"\n                        >Application name is required</mat-error\n                    >\n                </mat-form-field>\n            </div>\n            <div class=\"field\" *ngIf=\"form.controls.scopes\">\n                <label\n                    for=\"scopes\"\n                    >Scopes:</label\n                >\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"scopes\"\n                        placeholder=\"Access Scopes\"\n                        formControlName=\"scopes\"\n                    />\n                </mat-form-field>\n            </div>\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.skip_authorization\">\n            <mat-checkbox name=\"skip-authorization\" formControlName=\"skip_authorization\"\n                >Skip Authorization</mat-checkbox\n            >\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.redirect_uri\">\n            <label for=\"redirect-uri\">Login URL:</label>\n            <mat-form-field appearance=\"outline\">\n                <input\n                    matInput\n                    name=\"redirect-uri\"\n                    placeholder=\"Redirect URI e.g. http://localhost:4200/oauth-resp.html\"\n                    formControlName=\"redirect_uri\"\n                />\n            </mat-form-field>\n        </div>\n    </form>\n</div>\n","import { Component, Input } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { EncryptionLevel } from '@placeos/ts-client';\n\nimport { Identity } from 'src/app/shared/utilities/types.utilities';\n\n@Component({\n    selector: 'domain-form',\n    templateUrl: './domain-form.component.html',\n    styleUrls: ['./domain-form.component.scss']\n})\nexport class DomainFormComponent {\n    /** Group of form fields used for creating the system */\n    @Input() public form: FormGroup;\n}\n","<div class=\"domain form\" *ngIf=\"form\">\n    <form [formGroup]=\"form\">\n        <div class=\"fieldset\">\n            <div class=\"field\" *ngIf=\"form.controls.name\">\n                <label\n                    for=\"domain-name\"\n                    [class.error]=\"form.controls.name.invalid && form.controls.name.touched\"\n                    >Name<span>*</span>:</label\n                >\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"domain-name\"\n                        placeholder=\"Domain Name\"\n                        formControlName=\"name\"\n                        required\n                    />\n                    <mat-error *ngIf=\"form.controls.name.invalid\"\n                        >Domain name is required</mat-error\n                    >\n                </mat-form-field>\n            </div>\n            <div class=\"field\" *ngIf=\"form.controls.dom\">\n                <label\n                    for=\"domain\"\n                    [class.error]=\"form.controls.dom.invalid && form.controls.dom.touched\"\n                    >Domain:</label\n                >\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"domain\"\n                        placeholder=\"Domain e.g localhost\"\n                        formControlName=\"dom\"\n                    />\n                    <mat-error *ngIf=\"form.controls.dom.invalid\"\n                        >A valid Domain is required</mat-error\n                    >\n                </mat-form-field>\n            </div>\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.login_url\">\n            <label\n                for=\"login-url\"\n                [class.error]=\"form.controls.login_url.invalid && form.controls.login_url.touched\"\n                >Login URL:</label\n            >\n            <mat-form-field appearance=\"outline\">\n                <input\n                    matInput\n                    name=\"login-url\"\n                    placeholder=\"Login URL\"\n                    formControlName=\"login_url\"\n                />\n                <mat-error *ngIf=\"form.controls.login_url.invalid\">{{\n                    form.controls.login_url.hasError('pattern')\n                        ? 'A valid Login URL is required'\n                        : 'Login URL is invalid'\n                }}</mat-error>\n            </mat-form-field>\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.logout_url\">\n            <label\n                for=\"logout-url\"\n                [class.error]=\"form.controls.logout_url.invalid && form.controls.logout_url.touched\"\n                >Logout URL:</label\n            >\n            <mat-form-field appearance=\"outline\">\n                <input\n                    matInput\n                    name=\"logout-url\"\n                    placeholder=\"Logout URL\"\n                    formControlName=\"logout_url\"\n                />\n                <mat-error *ngIf=\"form.controls.logout_url.invalid\">{{\n                    form.controls.logout_url.hasError('pattern')\n                        ? 'A valid Logout URL is required'\n                        : 'Logout URL is invalid'\n                }}</mat-error>\n            </mat-form-field>\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.description\">\n            <label for=\"description\">Description:</label>\n            <mat-form-field appearance=\"outline\">\n                <textarea\n                    matInput\n                    name=\"description\"\n                    placeholder=\"Description\"\n                    formControlName=\"description\"\n                ></textarea>\n            </mat-form-field>\n        </div>\n    </form>\n</div>\n","<div class=\"driver form\" *ngIf=\"form\">\n    <div class=\"fieldset\">\n        <div class=\"field discovery\" *ngIf=\"form.controls.repository_id && !editing\">\n            <label for=\"repo\">Repository: </label>\n            <item-search-field\n                name=\"repo\"\n                [service]=\"discovery_service\"\n                [ngModel]=\"base_repo\"\n                (ngModelChange)=\"updateDriverList($event)\"\n            ></item-search-field>\n        </div>\n        <div\n            class=\"field discovery\"\n            *ngIf=\"form.controls.file_name && driver_list && driver_list.length && !editing\"\n        >\n            <label for=\"driver\">Driver Base: </label>\n            <item-search-field\n                name=\"driver\"\n                [options]=\"driver_list\"\n                [loading]=\"loading_drivers\"\n                [ngModel]=\"base_driver\"\n                (ngModelChange)=\"updateCommitList($event)\"\n            ></item-search-field>\n        </div>\n        <div\n            class=\"field discovery\"\n            *ngIf=\"form.controls.commit && commit_list && commit_list.length\"\n        >\n            <label for=\"commit\">Driver Commit: </label>\n            <item-search-field\n                name=\"commit\"\n                [options]=\"commit_list\"\n                [loading]=\"loading_commits\"\n                [ngModel]=\"base_commit\"\n                (ngModelChange)=\"setDriverBase($event)\"\n            ></item-search-field>\n        </div>\n    </div>\n    <ng-container *ngIf=\"!loading; else load_state\">\n    <form [formGroup]=\"form\">\n        <ng-container *ngIf=\"(form.controls.commit && form.controls.commit.value) || base_commit\">\n            <div class=\"field\" *ngIf=\"form.controls.name\">\n                <label\n                    for=\"driver-name\"\n                    [class.error]=\"form.controls.name.invalid && form.controls.name.touched\"\n                    >Name<span>*</span>:</label\n                >\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"driver-name\"\n                        placeholder=\"Driver Name\"\n                        formControlName=\"name\"\n                        required\n                    />\n                    <mat-error *ngIf=\"form.controls.name.invalid\"\n                        >Driver name is required</mat-error\n                    >\n                </mat-form-field>\n            </div>\n            <div class=\"field\" *ngIf=\"form.controls.role\">\n                <label for=\"role\">Role: </label>\n                <mat-form-field appearance=\"outline\">\n                    <mat-select name=\"role\" formControlName=\"role\">\n                        <mat-option *ngFor=\"let type of role_types\" [value]=\"type.id\">\n                            {{ type.name }}\n                        </mat-option>\n                    </mat-select>\n                </mat-form-field>\n            </div>\n            <div class=\"field\" *ngIf=\"form.controls.description\">\n                <label for=\"description\">Description:</label>\n                <mat-form-field appearance=\"outline\">\n                    <textarea\n                        matInput\n                        name=\"description\"\n                        placeholder=\"Description\"\n                        formControlName=\"description\"\n                    ></textarea>\n                </mat-form-field>\n            </div>\n            <div class=\"field\" *ngIf=\"form.controls.module_name\">\n                <label\n                    for=\"module-name\"\n                    [class.error]=\"\n                        form.controls.module_name.invalid && form.controls.module_name.touched\n                    \"\n                    >Module Name<span>*</span>:</label\n                >\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"module-name\"\n                        placeholder=\"Module Name\"\n                        formControlName=\"module_name\"\n                        required\n                    />\n                    <mat-error *ngIf=\"form.controls.module_name.invalid\"\n                        >Module name is required</mat-error\n                    >\n                </mat-form-field>\n            </div>\n            <div class=\"field\" *ngIf=\"form.controls.default_uri\">\n                <label for=\"default-uri\">Default URI:</label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"default-uri\"\n                        placeholder=\"Default URI\"\n                        formControlName=\"default_uri\"\n                    />\n                </mat-form-field>\n            </div>\n            <div class=\"fieldset\">\n                <div class=\"field\" *ngIf=\"form.controls.default_port\">\n                    <label\n                        for=\"default-port\"\n                        [class.error]=\"\n                            form.controls.default_port.invalid && form.controls.default_port.touched\n                        \"\n                    >\n                        Default Port Number:\n                    </label>\n                    <mat-form-field appearance=\"outline\">\n                        <input\n                            matInput\n                            name=\"default-port\"\n                            type=\"number\"\n                            placeholder=\"Port Number\"\n                            formControlName=\"default_port\"\n                        />\n                        <mat-error *ngIf=\"form.controls.default_port.invalid\">\n                            A valid port number between 1 - 65535 is required\n                        </mat-error>\n                    </mat-form-field>\n                </div>\n                <div class=\"field\" *ngIf=\"form.controls.ignore_connected\">\n                    <mat-checkbox name=\"ignore-connected\" formControlName=\"ignore_connected\"\n                        >Ignore Connected</mat-checkbox\n                    >\n                </div>\n            </div>\n        </ng-container>\n    </form>\n    </ng-container>\n</div>\n<ng-template #load_state>\n    <div class=\"info-block\">\n        <div class=\"icon\">\n            <mat-spinner diameter=\"48\"></mat-spinner>\n        </div>\n        <div class=\"text\">Loading driver details for commit...</div>\n    </div>\n</ng-template>\n","import { Component, Input, SimpleChanges, OnChanges } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport {\n    EngineRepositoryCommit,\n    EngineRepository,\n    EngineRepositoriesService,\n    EngineDriverRole,\n} from '@placeos/ts-client';\n\nimport { BaseDirective } from 'src/app/shared/globals/base.directive';\nimport { Identity } from 'src/app/shared/utilities/types.utilities';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { debounceTime, distinctUntilChanged, switchMap, catchError, map } from 'rxjs/operators';\nimport { of, Subject, Observable } from 'rxjs';\n\nimport * as dayjs from 'dayjs';\nimport * as relativeTime from 'dayjs/plugin/relativeTime';\n\ndayjs.extend(relativeTime);\n\n@Component({\n    selector: 'driver-form',\n    templateUrl: './driver-form.component.html',\n    styleUrls: ['./driver-form.component.scss'],\n})\nexport class DriverFormComponent extends BaseDirective implements OnChanges {\n    /** Group of form fields used for creating the system */\n    @Input() public form: FormGroup;\n    /** List of driver roles */\n    public role_types: Identity[] = [\n        { id: EngineDriverRole.SSH, name: 'SSH' },\n        { id: EngineDriverRole.Device, name: 'Device' },\n        { id: EngineDriverRole.Service, name: 'Service' },\n        { id: EngineDriverRole.Websocket, name: 'Websocket' },\n        { id: EngineDriverRole.Logic, name: 'Logic' },\n    ];\n\n    /** Driver used as a template for the new driver being created */\n    public base_repo: EngineRepository;\n    /** Driver used as a template for the new driver being created */\n    public base_commit: EngineRepositoryCommit;\n    /** Driver used as a template for the new driver being created */\n    public base_driver: Identity;\n    /** List of available drivers for the active repository */\n    public driver_list: Identity[] = [];\n    /** List of available commits for the active driver */\n    public commit_list: Identity[] = [];\n    /** List of items from an API search */\n    public driver_list$: Observable<Identity[]>;\n    /** List of items from an API search */\n    public commit_list$: Observable<Identity[]>;\n    /** Subject holding the value of the search */\n    public readonly repo$ = new Subject<string>();\n    /** Subject holding the value of the search */\n    public readonly driver$ = new Subject<string>();\n    /** Whether driver details are being loaded */\n    public loading: boolean;\n    /** Whether driver listings are being loaded */\n    public loading_drivers: boolean;\n    /** Whether driver commits are being loaded */\n    public loading_commits: boolean;\n\n    public get editing(): boolean {\n        return this.form.controls.id && this.form.controls.id.value;\n    }\n\n    /** Service for handling driver discovery */\n    public get discovery_service(): EngineRepositoriesService {\n        return this._service.Repositories;\n    }\n\n    constructor(private _service: ApplicationService) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this.driver_list$ = this.repo$.pipe(\n            debounceTime(100),\n            distinctUntilChanged(),\n            switchMap((repo_id) => {\n                this.loading_drivers = true;\n                this.driver_list = [];\n                return this._service.Repositories.listDrivers(repo_id);\n            }),\n            catchError((_) => {\n                this._service.notifyError(`Error loading driver list. Error: ${_.message || _}`);\n                return of([]);\n            }),\n            map((list: any[]) => {\n                this.loading_drivers = false;\n                this.commit_list = [];\n                return (list || []).map((driver) => ({\n                    id: driver,\n                    name: driver.replace(/\\//g, ' > '),\n                }));\n            })\n        );\n        this.subscription(\n            'driver_list',\n            this.driver_list$.subscribe((list) => (this.driver_list = list))\n        );\n        this.commit_list$ = this.driver$.pipe(\n            debounceTime(100),\n            distinctUntilChanged(),\n            switchMap((driver_id) => {\n                this.loading_commits = true;\n                this.commit_list = [];\n                return this._service.Repositories.listCommits(this.base_repo.id, {\n                    driver: `${driver_id}`,\n                });\n            }),\n            catchError((_) => {\n                this._service.notifyError(\n                    `Error loading driver's commit list. Error: ${_.message || _}`\n                );\n                return of([]);\n            }),\n            map((list: any[]) => {\n                this.loading_commits = false;\n                if (this.form.controls.commit) {\n                    this.base_commit = this.commit_list.find(\n                        (commit) => commit.id === this.form.controls.commit.value\n                    ) as any;\n                }\n                return (list || []).map((commit: EngineRepositoryCommit) => {\n                    const date = dayjs(commit.date);\n                    return {\n                        id: commit.commit,\n                        name: `${commit.subject}`,\n                        extra: date.isAfter(dayjs().subtract(1, 'm'))\n                            ? date.fromNow()\n                            : date.format('DD MMM YYYY'),\n                    };\n                });\n            })\n        );\n        this.subscription(\n            'commit_list',\n            this.commit_list$.subscribe((list) => (this.commit_list = list))\n        );\n    }\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        if (changes.form) {\n            this.initDriver();\n        }\n    }\n\n    /**\n     * Update the list of available drivers\n     * @param repo Repository to grab the drivers for\n     */\n    public async updateDriverList(repo: EngineRepository) {\n        this.form.controls.repository_id.setValue(repo.id);\n        this.base_repo = repo;\n        const promise = this.driver_list$.toPromise();\n        this.repo$.next(repo.id);\n        return await promise;\n    }\n\n    /**\n     * Update the list of available commits\n     * @param driver Driver to grab commits for\n     */\n    public updateCommitList(driver: Identity) {\n        this.form.controls.file_name.setValue(driver.id);\n        this.base_driver = driver;\n        const promise = this.commit_list$.toPromise();\n        this.driver$.next(`${driver.id}`);\n        return promise;\n    }\n\n    /**\n     *\n     * @param event Details of the driver selected\n     */\n    public setDriverBase(event: Identity) {\n        this.form.controls.commit.setValue(event.id);\n        this.base_commit = event as any;\n        this.loading = true;\n        this._service.Repositories.driverDetails(this.base_repo.id, {\n            driver: `${this.base_driver.id}`,\n            commit: `${event.id}`,\n        }).then(\n            (driver) => {\n                this.loading = false;\n                if (!this.form.controls.id.value) {\n                    this.form.controls.name.setValue(driver.descriptive_name || '');\n                    this.form.controls.module_name.setValue(driver.generic_name || '');\n                    this.form.controls.class_name.setValue(this.base_driver.id || '');\n                    this.form.controls.default_port.setValue(\n                        driver.tcp_port || driver.udp_port || ''\n                    );\n                    this.form.controls.default_uri.setValue(driver.uri_base || '');\n                    this.form.controls.role.setValue(\n                        driver.tcp_port || driver.udp_port\n                            ? EngineDriverRole.Device\n                            : driver.uri_base\n                            ? EngineDriverRole.Service\n                            : EngineDriverRole.Logic\n                    );\n                    this.form.controls.settings.setValue(driver.default_settings || '');\n                    this.form.controls.description.setValue(driver.description || '');\n                }\n            },\n            () => (this.loading = false)\n        );\n    }\n\n    /**\n     * Initialise the driver details if set\n     */\n    private async initDriver() {\n        if (this.form.controls.repository_id && this.form.controls.repository_id.value) {\n            const value = this.form.controls.repository_id.value;\n            const repo = await this.discovery_service.show(value);\n            this.base_repo = repo;\n            this.updateDriverList(this.base_repo);\n            const driver = this.form.controls.file_name.value;\n            this.base_driver =\n                typeof driver === 'string'\n                    ? { id: driver, name: driver.split('/').join(' > ') }\n                    : driver;\n            this.updateCommitList(this.base_driver);\n        }\n    }\n}\n","import { Component, Input, SimpleChanges } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { Identity } from 'src/app/shared/utilities/types.utilities';\n\n@Component({\n    selector: 'ldap-source-form',\n    templateUrl: './ldap-source-form.component.html',\n    styleUrls: ['./ldap-source-form.component.scss']\n})\nexport class LdapSourceFormComponent {\n    /** Group of form fields used for creating the system */\n    @Input() public form: FormGroup;\n    /** List of available authentication schemes */\n    public auth_methods: Identity[] = [\n        { id: 'plain', name: 'Plain' },\n        { id: 'ssl', name: 'SSL' },\n        { id: 'tls', name: 'TLS' }\n    ];\n}\n","<div class=\"module form\" *ngIf=\"form\">\n    <form [formGroup]=\"form\">\n        <div class=\"field\" *ngIf=\"form.controls.name\">\n            <label\n                for=\"auth-source-name\"\n                [class.error]=\"form.controls.name.invalid && form.controls.name.touched\"\n            >\n                Name<span>*</span>:\n            </label>\n            <mat-form-field appearance=\"outline\">\n                <input\n                    matInput\n                    name=\"auth-source-name\"\n                    placeholder=\"Auth Source Name\"\n                    formControlName=\"name\"\n                    required\n                />\n                <mat-error *ngIf=\"form.controls.name.invalid\">\n                    Auth source name is required\n                </mat-error>\n            </mat-form-field>\n        </div>\n        <div class=\"fieldset\">\n            <div class=\"field\" *ngIf=\"form.controls.host\">\n                <label\n                    for=\"host\"\n                    [class.error]=\"form.controls.host.invalid && form.controls.host.touched\"\n                >\n                    Host<span>*</span>:\n                </label>\n                <mat-form-field appearance=\"outline\">\n                    <input matInput name=\"host\" placeholder=\"Host\" formControlName=\"host\" />\n                    <mat-error *ngIf=\"form.controls.host.invalid\">\n                        Host is required\n                    </mat-error>\n                </mat-form-field>\n            </div>\n            <div class=\"field\" *ngIf=\"form.controls.port\">\n                <label for=\"port\">Port:</label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        type=\"number\"\n                        name=\"client-id\"\n                        placeholder=\"Client ID\"\n                        formControlName=\"port\"\n                    />\n                </mat-form-field>\n            </div>\n        </div>\n        <div class=\"fieldset\">\n            <div class=\"field\" *ngIf=\"form.controls.uid\">\n                <label for=\"uid\">User ID Key:</label>\n                <mat-form-field appearance=\"outline\">\n                    <input matInput name=\"uid\" placeholder=\"User ID Key\" formControlName=\"uid\" />\n                </mat-form-field>\n            </div>\n            <div class=\"field type\" *ngIf=\"form.controls.auth_method\">\n                <label for=\"auth-method\">Authentication Method: </label>\n                <mat-form-field appearance=\"outline\">\n                    <mat-select name=\"auth-method\" formControlName=\"auth_method\">\n                        <mat-option *ngFor=\"let type of auth_methods\" [value]=\"type.id\">\n                            {{ type.name }}\n                        </mat-option>\n                    </mat-select>\n                </mat-form-field>\n            </div>\n        </div>\n        <div class=\"fieldset\">\n            <div class=\"field\" *ngIf=\"form.controls.base\">\n                <label\n                    for=\"base\"\n                    [class.error]=\"form.controls.base.invalid && form.controls.base.touched\"\n                >\n                    Base<span>*</span>:\n                </label>\n                <mat-form-field appearance=\"outline\">\n                    <input matInput name=\"base\" placeholder=\"Base\" formControlName=\"base\" />\n                    <mat-error *ngIf=\"form.controls.base.invalid\">\n                        Base is required\n                    </mat-error>\n                </mat-form-field>\n            </div>\n            <div class=\"field\" *ngIf=\"form.controls.bind_dn\">\n                <label for=\"bind-dn\">Bind DN:</label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"bind-dn\"\n                        placeholder=\"Bind DN\"\n                        formControlName=\"bind_dn\"\n                    />\n                </mat-form-field>\n            </div>\n        </div>\n        <div class=\"fieldset\">\n            <div class=\"field\" *ngIf=\"form.controls.password\">\n                <label for=\"password\">Password:</label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"password\"\n                        placeholder=\"password\"\n                        formControlName=\"password\"\n                    />\n                </mat-form-field>\n            </div>\n            <div class=\"field\" *ngIf=\"form.controls.filter\">\n                <label for=\"filter\">Filter:</label>\n                <mat-form-field appearance=\"outline\">\n                    <input matInput name=\"filter\" placeholder=\"Filter\" formControlName=\"filter\" />\n                </mat-form-field>\n            </div>\n        </div>\n    </form>\n</div>\n","import { Component, Input, OnDestroy } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { EncryptionLevel, EngineDriverRole } from '@placeos/ts-client';\n\nimport { Identity, EngineServiceLike } from 'src/app/shared/utilities/types.utilities';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { BaseDirective } from 'src/app/shared/globals/base.directive';\n\n@Component({\n    selector: 'module-form',\n    templateUrl: './module-form.component.html',\n    styleUrls: ['./module-form.component.scss']\n})\nexport class ModuleFormComponent extends BaseDirective implements OnDestroy {\n    /** Group of form fields used for creating the system */\n    @Input() public form: FormGroup;\n    /** Whether system is readonly */\n    @Input() public readonly: boolean;\n\n    /** Service for handling system */\n    public get system_service(): EngineServiceLike {\n        return this._service.Systems;\n    }\n\n    /** Service for handling drivers */\n    public get driver_service(): EngineServiceLike {\n        return this._service.Drivers;\n    }\n\n    /** Role of the selected driver */\n    public get role(): string {\n        if (!this.form.controls.driver) {\n            return 'service';\n        }\n        const driver = this.form.controls.driver.value;\n        if (!driver) {\n            return 'logic';\n        }\n        switch (driver.role) {\n            case EngineDriverRole.SSH:\n                return 'ssh';\n            case EngineDriverRole.Device:\n                return 'device';\n            case EngineDriverRole.Service:\n                return 'service';\n            case EngineDriverRole.Websocket:\n                return 'websocket';\n        }\n        return 'logic';\n    }\n\n    constructor(private _service: ApplicationService) {\n        super();\n    }\n}\n","<div class=\"module form\" *ngIf=\"form\">\n    <form [formGroup]=\"form\">\n        <div class=\"field\" *ngIf=\"form.controls.driver\">\n            <label\n                for=\"driver\"\n                [class.error]=\"form.controls.driver.invalid && form.controls.driver.touched\"\n            >\n                Driver<span>*</span>:\n            </label>\n            <item-search-field\n                [service]=\"driver_service\"\n                formControlName=\"driver\"\n            ></item-search-field>\n            <div class=\"error\" *ngIf=\"form.controls.driver.invalid && form.controls.driver.touched\">\n                Driver is required\n            </div>\n        </div>\n        <ng-container *ngIf=\"!form.controls.driver || form.controls.driver.value\">\n            <div class=\"field\" *ngIf=\"form.controls.system && role === 'logic'\">\n                <label\n                    for=\"driver\"\n                    [class.error]=\"form.controls.system.invalid && form.controls.system.touched\"\n                    >Control System<span *ngIf=\"role === 'logic'\">*</span>:\n                </label>\n                <ng-container *ngIf=\"!readonly; else readonly_system\">\n                    <item-search-field\n                        [service]=\"system_service\"\n                        formControlName=\"system\"\n                    ></item-search-field>\n                    <div\n                        class=\"error\"\n                        *ngIf=\"form.controls.system.invalid && form.controls.system.touched\"\n                    >\n                        Control System is required\n                    </div>\n                </ng-container>\n                <ng-template #readonly_system>\n                    <div class=\"value\">{{ form.controls.system.value?.name }} <span>{{ form.controls.system.value?.id }}</span></div>\n                </ng-template>\n            </div>\n            <div class=\"fieldset\">\n                <div class=\"field\" *ngIf=\"form.controls.ip && role !== 'logic'\">\n                    <label\n                        for=\"ip\"\n                        [class.error]=\"form.controls.ip.invalid && form.controls.ip.touched\"\n                    >\n                        IP Address<span *ngIf=\"role === 'ssh' || role === 'device'\">*</span>:\n                    </label>\n                    <mat-form-field appearance=\"outline\">\n                        <input matInput name=\"ip\" placeholder=\"IP Address\" formControlName=\"ip\" />\n                        <mat-error *ngIf=\"form.controls.ip.invalid\">\n                            A valid IP address is required\n                        </mat-error>\n                    </mat-form-field>\n                </div>\n                <div class=\"field\" *ngIf=\"form.controls.port && role !== 'logic'\">\n                    <label\n                        for=\"system-name\"\n                        [class.error]=\"form.controls.port.invalid && form.controls.port.touched\"\n                    >\n                        Port Number<span *ngIf=\"role === 'ssh'\">*</span>:\n                    </label>\n                    <mat-form-field appearance=\"outline\">\n                        <input\n                            matInput\n                            name=\"system-name\"\n                            type=\"number\"\n                            placeholder=\"Port Number\"\n                            formControlName=\"port\"\n                        />\n                        <mat-error *ngIf=\"form.controls.port.invalid\">\n                            A valid port number between 1 - 65535 is required\n                        </mat-error>\n                    </mat-form-field>\n                </div>\n            </div>\n            <div class=\"field\" *ngIf=\"form.controls.tls && role !== 'logic'\">\n                <mat-checkbox name=\"tls\" formControlName=\"tls\">TLS</mat-checkbox>\n            </div>\n            <div\n                class=\"field\"\n                *ngIf=\"form.controls.udp && role !== 'logic' && role !== 'websocket'\"\n            >\n                <mat-checkbox name=\"udp\" formControlName=\"udp\">UDP</mat-checkbox>\n            </div>\n            <div class=\"field\" *ngIf=\"form.controls.makebreak && role !== 'logic'\">\n                <mat-checkbox name=\"makebreak\" formControlName=\"makebreak\">Makebreak</mat-checkbox>\n            </div>\n            <div class=\"field\" *ngIf=\"form.controls.ignore_connected && role !== 'logic'\">\n                <mat-checkbox name=\"ignore-connected\" formControlName=\"ignore_connected\">\n                    Ignore Connected\n                </mat-checkbox>\n            </div>\n            <div class=\"field\" *ngIf=\"form.controls.uri && role !== 'logic'\">\n                <label\n                    for=\"uri\"\n                    [class.error]=\"form.controls.uri.invalid && form.controls.uri.touched\"\n                >\n                    URI<span *ngIf=\"role === 'websocket'\">*</span>:\n                </label>\n                <mat-form-field appearance=\"outline\">\n                    <input matInput name=\"uri\" placeholder=\"Module URI\" formControlName=\"uri\" />\n                    <mat-error *ngIf=\"form.controls.uri.invalid\">A valid URI is required</mat-error>\n                </mat-form-field>\n            </div>\n            <div class=\"field\" *ngIf=\"form.controls.notes\">\n                <label for=\"notes\">Notes:</label>\n                <mat-form-field appearance=\"outline\">\n                    <textarea\n                        matInput\n                        name=\"notes\"\n                        placeholder=\"Module Notes\"\n                        formControlName=\"notes\"\n                    ></textarea>\n                </mat-form-field>\n            </div>\n            <div class=\"field\" *ngIf=\"form.controls.custom_name\">\n                <label for=\"uri\">Custom Name:</label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"uri\"\n                        placeholder=\"Custom Name\"\n                        formControlName=\"custom_name\"\n                    />\n                </mat-form-field>\n            </div>\n        </ng-container>\n    </form>\n</div>\n","import { Component, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\n\nimport { Identity, HashMap } from 'src/app/shared/utilities/types.utilities';\nimport { BaseDirective } from 'src/app/shared/globals/base.directive';\n\n@Component({\n  selector: 'oauth-source-form',\n  templateUrl: './oauth-source-form.component.html',\n  styleUrls: ['./oauth-source-form.component.scss']\n})\nexport class OauthSourceFormComponent extends BaseDirective implements OnChanges {\n    /** Group of form fields used for creating the system */\n    @Input() public form: FormGroup;\n    /** List of available token request methods */\n    public token_methods: Identity[] = [\n        { id: 'get', name: 'GET' },\n        { id: 'post', name: 'POST' },\n        { id: 'put', name: 'PUT' },\n    ];\n    /** List of available authentication schemes */\n    public auth_schemes: Identity[] = [\n        { id: 'request_body', name: 'Request Body' },\n        { id: 'basic_auth', name: 'Basic Auth' },\n    ];\n    /** List of info mapping pairs */\n    public info_mapping_list: any[] = [];\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        if (changes.form && this.form) {\n            if (this.form.controls.info_mappings) {\n                const map = this.form.controls.info_mappings.value || {};\n                this.info_mapping_list = Object.keys(map).map((key) => {\n                    return { Engine: key, Remote: map[key] };\n                });\n            }\n        }\n    }\n\n    public updateMappings(mappings: { Engine: string, Remote: string }[]) {\n        this.timeout('mappings', () => {\n            const map: HashMap = {};\n            for (const pair of mappings) {\n                if (pair.Engine && pair.Remote) {\n                    map[pair.Engine] = pair.Remote;\n                }\n            }\n            this.form.controls.info_mappings.setValue(map);\n        }, 200);\n    }\n\n}\n","<div class=\"module form\" *ngIf=\"form\">\n    <form [formGroup]=\"form\">\n        <div class=\"field\" *ngIf=\"form.controls.name\">\n            <label\n                for=\"auth-source-name\"\n                [class.error]=\"form.controls.name.invalid && form.controls.name.touched\"\n            >\n                Name<span>*</span>:\n            </label>\n            <mat-form-field appearance=\"outline\">\n                <input\n                    matInput\n                    name=\"auth-source-name\"\n                    placeholder=\"Auth Source Name\"\n                    formControlName=\"name\"\n                    required\n                />\n                <mat-error *ngIf=\"form.controls.name.invalid\">\n                    Auth source name is required\n                </mat-error>\n            </mat-form-field>\n        </div>\n        <div class=\"fieldset\">\n            <div class=\"field\" *ngIf=\"form.controls.client_id\">\n                <label for=\"client-id\">Client ID:</label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"client-id\"\n                        placeholder=\"Client ID\"\n                        formControlName=\"client_id\"\n                    />\n                </mat-form-field>\n            </div>\n            <div class=\"field\" *ngIf=\"form.controls.client_secret\">\n                <label for=\"client-secret\">Client Secret:</label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"client-secret\"\n                        placeholder=\"Client Secret\"\n                        formControlName=\"client_secret\"\n                    />\n                </mat-form-field>\n            </div>\n        </div>\n        <div class=\"fieldset\">\n            <div class=\"field\" *ngIf=\"form.controls.site\">\n                <label for=\"site\">Site:</label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"site\"\n                        placeholder=\"URL of the SSO provider\"\n                        formControlName=\"site\"\n                    />\n                </mat-form-field>\n            </div>\n            <div class=\"field\" *ngIf=\"form.controls.scope\">\n                <label for=\"scope\">Scope:</label>\n                <mat-form-field appearance=\"outline\">\n                    <input matInput name=\"scope\" placeholder=\"Scope\" formControlName=\"scope\" />\n                </mat-form-field>\n            </div>\n        </div>\n        <div class=\"fieldset\">\n            <div class=\"field type\" *ngIf=\"form.controls.token_method\">\n                <label for=\"token-method\">Token Method: </label>\n                <mat-form-field appearance=\"outline\">\n                    <mat-select name=\"token-method\" formControlName=\"token_method\">\n                        <mat-option *ngFor=\"let type of token_methods\" [value]=\"type.id\">\n                            {{ type.name }}\n                        </mat-option>\n                    </mat-select>\n                </mat-form-field>\n            </div>\n            <div class=\"field type\" *ngIf=\"form.controls.auth_scheme\">\n                <label for=\"auth-scheme\">Authentication Scheme: </label>\n                <mat-form-field appearance=\"outline\">\n                    <mat-select name=\"auth-scheme\" formControlName=\"auth_scheme\">\n                        <mat-option *ngFor=\"let type of auth_schemes\" [value]=\"type.id\">\n                            {{ type.name }}\n                        </mat-option>\n                    </mat-select>\n                </mat-form-field>\n            </div>\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.token_url\">\n            <label for=\"token-url\">Token URL:</label>\n            <mat-form-field appearance=\"outline\">\n                <input\n                    matInput\n                    name=\"token-url\"\n                    placeholder=\"Token URL\"\n                    formControlName=\"token_url\"\n                />\n            </mat-form-field>\n        </div>\n        <div class=\"fieldset\">\n            <div class=\"field\" *ngIf=\"form.controls.authorize_url\">\n                <label for=\"authorize-url\">Authorize URL:</label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"authorize-url\"\n                        placeholder=\"Authorize URL\"\n                        formControlName=\"authorize_url\"\n                    />\n                </mat-form-field>\n            </div>\n            <div class=\"field\" *ngIf=\"form.controls.raw_info_url\">\n                <label for=\"info-url\">User Profile URL:</label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"raw_info_url\"\n                        placeholder=\"User Profile URL\"\n                        formControlName=\"raw_info_url\"\n                    />\n                </mat-form-field>\n            </div>\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.info_mappings\">\n            <label for=\"client-secret\">Info Mappings:</label>\n            <object-list-field\n                [(ngModel)]=\"info_mapping_list\"\n                (ngModelChange)=\"updateMappings($event)\"\n                [ngModelOptions]=\"{ standalone: true }\"\n                [fields]=\"['Engine', 'Remote']\"\n            ></object-list-field>\n        </div>\n    </form>\n</div>\n","import { Component, Input } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { Identity } from 'src/app/shared/utilities/types.utilities';\nimport { EngineRepositoryType } from '@placeos/ts-client';\n\n@Component({\n    selector: 'repository-form',\n    templateUrl: './repository-form.component.html',\n    styleUrls: ['./repository-form.component.scss']\n})\nexport class RepositoryFormComponent {\n    /** Group of form fields used for creating the system */\n    @Input() public form: FormGroup;\n    /** List of available types of repositories */\n    public repo_types: Identity[] = [\n        { id: EngineRepositoryType.Driver, name: 'Driver' },\n        { id: EngineRepositoryType.Interface, name: 'Interface' }\n    ];\n}\n","<div class=\"repository form\" *ngIf=\"form\">\n    <form [formGroup]=\"form\">\n        <div class=\"field\" *ngIf=\"form.controls.name\">\n            <label\n                for=\"repository-name\"\n                [class.error]=\"form.controls.name.invalid && form.controls.name.touched\"\n                >Name<span>*</span>:</label\n            >\n            <mat-form-field appearance=\"outline\">\n                <input\n                    matInput\n                    name=\"repository-name\"\n                    placeholder=\"Repository Name\"\n                    formControlName=\"name\"\n                    required\n                />\n                <mat-error *ngIf=\"form.controls.name.invalid\"\n                    >Repository name is required</mat-error\n                >\n            </mat-form-field>\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.folder_name\">\n            <label\n                for=\"folder-name\"\n                [class.error]=\"\n                    form.controls.folder_name.invalid && form.controls.folder_name.touched\n                \"\n                >Folder Name<span>*</span>:</label\n            >\n            <mat-form-field appearance=\"outline\">\n                <input\n                    matInput\n                    name=\"folder-name\"\n                    placeholder=\"Folder Name\"\n                    formControlName=\"folder_name\"\n                    required\n                />\n                <mat-error *ngIf=\"form.controls.folder_name.invalid\"\n                    >Folder name is required</mat-error\n                >\n            </mat-form-field>\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.description\">\n            <label for=\"description\">Description:</label>\n            <mat-form-field appearance=\"outline\">\n                <textarea\n                    matInput\n                    name=\"description\"\n                    placeholder=\"Description\"\n                    formControlName=\"description\"\n                ></textarea>\n            </mat-form-field>\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.uri\">\n            <label for=\"uri\" [class.error]=\"form.controls.uri.invalid && form.controls.uri.touched\">\n                Repository URI<span>*</span>:\n            </label>\n            <mat-form-field appearance=\"outline\">\n                <input\n                    matInput\n                    name=\"uri\"\n                    placeholder=\"Repository URI\"\n                    formControlName=\"uri\"\n                    required\n                />\n                <mat-error *ngIf=\"form.controls.uri.invalid\">URI is required</mat-error>\n            </mat-form-field>\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.type\">\n            <label for=\"type\">Repository Type: </label>\n            <mat-form-field appearance=\"outline\">\n                <mat-select name=\"type\" formControlName=\"type\">\n                    <mat-option *ngFor=\"let type of repo_types\" [value]=\"type.id\">\n                        {{ type.name }}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n        </div>\n    </form>\n</div>\n","import { Component, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\n\nimport { BaseDirective } from 'src/app/shared/globals/base.directive';\nimport { HashMap } from 'src/app/shared/utilities/types.utilities';\n\n@Component({\n  selector: 'saml-source-form',\n  templateUrl: './saml-source-form.component.html',\n  styleUrls: ['./saml-source-form.component.scss']\n})\nexport class SamlSourceFormComponent extends BaseDirective implements OnChanges {\n    /** Group of form fields used for creating the system */\n    @Input() public form: FormGroup;\n\n    /** List of attribute statement pairs */\n    public attribute_statement_mappings: any[] = [];\n    /** List of runtime param pairs */\n    public runtime_param_list: any[] = [];\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        if (changes.form && this.form) {\n            if (this.form.controls.attribute_statements) {\n                const map = this.form.controls.attribute_statements.value || {};\n                this.attribute_statement_mappings = Object.keys(map).map((key) => {\n                    return { name: key, mappings: map[key].join(',') };\n                });\n            }\n            if (this.form.controls.idp_sso_target_url_runtime_params) {\n                const map = this.form.controls.idp_sso_target_url_runtime_params.value || {};\n                this.runtime_param_list = Object.keys(map).map((key) => {\n                    return { name: key, mappings: map[key] };\n                });\n            }\n        }\n    }\n\n    /**\n     * Update the form control value for attribute statements\n     * @param mappings Mapping listing\n     */\n    public updateAttributeStatements(mappings: { name: string, mappings: string }[]) {\n        this.timeout('mappings', () => {\n            const map: HashMap = {};\n            for (const pair of mappings) {\n                if (pair.name && pair.mappings) {\n                    map[pair.name] = (pair.mappings || '').split(',');\n                }\n            }\n            this.form.controls.attribute_statements.setValue(map);\n        }, 200);\n    }\n\n    /**\n     * Update the form control value for runtime parameters\n     * @param mappings Mapping listing\n     */\n    public updateRuntimeParams(mappings: { name: string, mapping: string }[]) {\n        this.timeout('mappings', () => {\n            const map: HashMap = {};\n            for (const pair of mappings) {\n                if (pair.name && pair.mapping) {\n                    map[pair.name] = pair.mapping;\n                }\n            }\n            this.form.controls.idp_sso_target_url_runtime_params.setValue(map);\n        }, 200);\n    }\n\n}\n","<div class=\"module form\" *ngIf=\"form\">\n    <form [formGroup]=\"form\">\n        <div class=\"fieldset\">\n            <div class=\"field\" *ngIf=\"form.controls.name\">\n                <label\n                    for=\"auth-source-name\"\n                    [class.error]=\"form.controls.name.invalid && form.controls.name.touched\"\n                >\n                    Name<span>*</span>:\n                </label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"auth-source-name\"\n                        placeholder=\"Auth Source Name\"\n                        formControlName=\"name\"\n                        required\n                    />\n                    <mat-error *ngIf=\"form.controls.name.invalid\">\n                        Auth source name is required\n                    </mat-error>\n                </mat-form-field>\n            </div>\n            <div class=\"field\" *ngIf=\"form.controls.issuer\">\n                <label\n                    for=\"issuer\"\n                    [class.error]=\"form.controls.issuer.invalid && form.controls.issuer.touched\"\n                >\n                    Issuer<span>*</span>:\n                </label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"issuer\"\n                        placeholder=\"Issuer\"\n                        formControlName=\"issuer\"\n                        required\n                    />\n                    <mat-error *ngIf=\"form.controls.issuer.invalid\">\n                        Issuer is required\n                    </mat-error>\n                </mat-form-field>\n            </div>\n        </div>\n        <div class=\"fieldset\">\n            <div class=\"field\" *ngIf=\"form.controls.idp_sso_target_url\">\n                <label\n                    for=\"idp-target\"\n                    [class.error]=\"\n                        form.controls.idp_sso_target_url.invalid &&\n                        form.controls.idp_sso_target_url.touched\n                    \"\n                >\n                    IdP Target URL<span>*</span>:\n                </label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"idp-target\"\n                        placeholder=\"IdP Target URL\"\n                        formControlName=\"idp_sso_target_url\"\n                        required\n                    />\n                    <mat-error *ngIf=\"form.controls.idp_sso_target_url.invalid\">\n                        IdP Target URL is required\n                    </mat-error>\n                </mat-form-field>\n            </div>\n            <div class=\"field\" *ngIf=\"form.controls.name_identifier_format\">\n                <label\n                    for=\"name-identifier-format\"\n                    [class.error]=\"\n                        form.controls.name_identifier_format.invalid &&\n                        form.controls.name_identifier_format.touched\n                    \"\n                >\n                    Name Identifier Format<span>*</span>:\n                </label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"name-identifier-format\"\n                        placeholder=\"Name Identifier Format\"\n                        formControlName=\"name_identifier_format\"\n                        required\n                    />\n                    <mat-error *ngIf=\"form.controls.name_identifier_format.invalid\">\n                        Name Identifier Format is required\n                    </mat-error>\n                </mat-form-field>\n            </div>\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.request_attributes\">\n            <label\n                for=\"request-attributes\"\n                [class.error]=\"form.controls.request_attributes.invalid && form.controls.request_attributes.touched\"\n            >\n                Request Attributes<span>*</span>:\n            </label>\n            <object-list-field\n                formControlName=\"request_attributes\"\n                [fields]=\"['name', 'name_format', 'friendly_name']\"\n            ></object-list-field>\n            <div class=\"error-message\" *ngIf=\"form.controls.request_attributes.invalid && form.controls.request_attributes.touched\">\n                Request Attributes are required\n            </div>\n        </div>\n        <div class=\"fieldset\">\n            <div class=\"field\" *ngIf=\"form.controls.assertion_consumer_service_url\">\n                <label\n                    for=\"assertion-url\"\n                    [class.error]=\"\n                        form.controls.assertion_consumer_service_url.invalid &&\n                        form.controls.assertion_consumer_service_url.touched\n                    \"\n                >\n                    Assertion URL<span>*</span>:\n                </label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"assertion-url\"\n                        placeholder=\"Assertion URL\"\n                        formControlName=\"assertion_consumer_service_url\"\n                        required\n                    />\n                    <mat-error *ngIf=\"form.controls.assertion_consumer_service_url.invalid\">\n                        Assertion URL is required\n                    </mat-error>\n                </mat-form-field>\n            </div>\n            <div class=\"field\" *ngIf=\"form.controls.idp_cert_fingerprint\">\n                <label for=\"cert-fingerprint\">Certificate Fingerprint:</label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"cert-fingerprint\"\n                        placeholder=\"Certificate Fingerprint\"\n                        formControlName=\"idp_cert_fingerprint\"\n                    />\n                </mat-form-field>\n            </div>\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.idp_cert\">\n            <label for=\"cert\">Full Certificate:</label>\n            <mat-form-field appearance=\"outline\">\n                <textarea\n                    matInput\n                    name=\"cert\"\n                    placeholder=\"Full Certificate\"\n                    formControlName=\"idp_cert\"\n                ></textarea>\n            </mat-form-field>\n        </div>\n        <div class=\"fieldset\">\n            <div class=\"field\" *ngIf=\"form.controls.uid_attribute\">\n                <label for=\"uid-attribute\">UID Attribute:</label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"uid-attribute\"\n                        placeholder=\"UID Attribute\"\n                        formControlName=\"uid_attribute\"\n                    />\n                </mat-form-field>\n            </div>\n            <div class=\"field\" *ngIf=\"form.controls.attribute_service_name\">\n                <label for=\"attribute-service-name\">Attribute Service Name:</label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"attribute-service-name\"\n                        placeholder=\"Attribute Service Name\"\n                        formControlName=\"attribute_service_name\"\n                    />\n                </mat-form-field>\n            </div>\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.attribute_statements\">\n            <label for=\"client-secret\">Attribute Statements:</label>\n            <object-list-field\n                [(ngModel)]=\"attribute_statement_mappings\"\n                (ngModelChange)=\"updateAttributeStatements($event)\"\n                [ngModelOptions]=\"{ standalone: true }\"\n                [fields]=\"['name', 'mappings']\"\n            ></object-list-field>\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.idp_sso_target_url_runtime_params\">\n            <label for=\"client-secret\">IdP SSO Runtime Params:</label>\n            <object-list-field\n                [(ngModel)]=\"runtime_param_list\"\n                (ngModelChange)=\"updateRuntimeParams($event)\"\n                [ngModelOptions]=\"{ standalone: true }\"\n                [fields]=\"['name', 'mapping']\"\n            ></object-list-field>\n        </div>\n        <div class=\"fieldset\">\n            <div class=\"field\" *ngIf=\"form.controls.idp_slo_target_url\">\n                <label for=\"slo-target\">IdP SLO Target URL:</label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"slo-target\"\n                        placeholder=\"IdP SLO Target URL\"\n                        formControlName=\"idp_slo_target_url\"\n                    />\n                </mat-form-field>\n            </div>\n            <div class=\"field\" *ngIf=\"form.controls.slo_default_relay_state\">\n                <label for=\"slo-relay\">SLO Default Relay State:</label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"slo-relay\"\n                        placeholder=\"SLO Default Relay State\"\n                        formControlName=\"slo_default_relay_state\"\n                    />\n                </mat-form-field>\n            </div>\n        </div>\n    </form>\n</div>\n","import { Component, Input, SimpleChanges, OnChanges, OnInit } from '@angular/core';\nimport { FormGroup, FormControl } from '@angular/forms';\nimport { EngineSettings, EngineUser, EncryptionLevel } from '@placeos/ts-client';\n\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { BaseDirective } from 'src/app/shared/globals/base.directive';\nimport { Identity } from 'src/app/shared/utilities/types.utilities';\nimport { validateYAML } from 'src/app/shared/utilities/data/systems.utilities';\n\nimport * as yaml from 'js-yaml';\nimport * as merge from 'deepmerge';\n\n@Component({\n    selector: 'a-settings-form',\n    templateUrl: './settings-form.component.html',\n    styleUrls: ['./settings-form.component.scss']\n})\nexport class SettingsFormComponent extends BaseDirective implements OnChanges, OnInit {\n    /** ID of the parent object */\n    @Input() id: string;\n    /** List of settings for the  */\n    @Input() settings: [EngineSettings, EngineSettings, EngineSettings, EngineSettings];\n    /** Whether to display merged settings */\n    @Input() merge: boolean;\n    /** List of settings to merge into the main settings */\n    @Input() merge_settings: EngineSettings[];\n    /** Form fields for settings */\n    public form: FormGroup;\n    /** Whether a setting is being saved */\n    public saving: [boolean, boolean, boolean, boolean] = [false, false, false, false];\n    /** Currently displayed encryption level */\n    public encryption_level: EncryptionLevel;\n    /** Settings available to display on the UI */\n    public used_settings: EngineSettings[] = [];\n    /** List of available settings to view */\n    public available_levels = this.levels;\n    /** Index of the active settings tab */\n    public level_index: number;\n\n    /** Current user */\n    public get user(): EngineUser {\n        return this._service.Users.user.getValue();\n    }\n\n    /** Whether user is admin */\n    public get is_admin(): boolean {\n        return !!this.user.sys_admin;\n    }\n\n    /** Whether user is support */\n    public get is_support(): boolean {\n        return !!this.user.sys_admin || !!this.user.support;\n    }\n\n    /** Currently shown settings */\n    public get shown_option(): { id: EncryptionLevel, name: string, active?: boolean } {\n        return this.available_levels.find(i => i.id === this.encryption_level);\n    }\n\n    /** Whether the currently active settings have been edited */\n    public get active_edited(): boolean {\n        return (\n            this.used_settings &&\n            this.used_settings[this.encryption_level] &&\n            this.used_settings[this.encryption_level].changes &&\n            this.used_settings[this.encryption_level].changes.settings_string !== undefined\n        );\n    }\n\n    /** Number of settings blocks edited */\n    public get edited_count(): number {\n        let count = 0;\n        for (const setting of this.used_settings) {\n            if (setting.changes.settings_string !== undefined) {\n                count++;\n            }\n        }\n\n        return count;\n    }\n\n    /** Whether a settings group has errors */\n    public get has_errors(): boolean {\n        for (const key in this.form.controls) {\n            if (this.form.controls[key] && this.form.controls[key].errors) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /** Displayable encryption levels for settings */\n    public get levels(): any[] {\n        const levels: Identity[] = [\n            { id: EncryptionLevel.None, name: 'Unencrypted', active: true },\n            {\n                id: EncryptionLevel.Support,\n                name: 'Support',\n                active: this.is_support\n            },\n            { id: EncryptionLevel.Admin, name: 'Admin', active: this.is_admin },\n            { id: EncryptionLevel.NeverDisplay, name: 'Encrypted', active: this.is_admin }\n        ];\n        if (this.merge) {\n            levels.unshift({ id: EncryptionLevel.NeverDisplay + 1, name: 'Merged' });\n        }\n        return levels;\n    }\n\n    public type(level: EncryptionLevel) {\n        switch (level) {\n            case EncryptionLevel.None:\n                return 'Unencrypted';\n            case EncryptionLevel.Support:\n                return 'Support';\n            case EncryptionLevel.Admin:\n                return 'Admin';\n        }\n        return 'Never Display';\n    }\n\n    constructor(private _service: ApplicationService) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this.subscription(\n            'save_all',\n            this._service.Hotkeys.listen(['KeyA'], () => this.saveAll())\n        );\n        this.subscription(\n            'clear_all',\n            this._service.Hotkeys.listen(['KeyC'], () => this.clearChanges())\n        );\n    }\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        if (changes.merge) {\n            this.encryption_level = this.merge\n                ? EncryptionLevel.NeverDisplay + 1\n                : EncryptionLevel.None;\n            this.available_levels = this.levels;\n        }\n        if (changes.settings) {\n            this.used_settings = this.processSettings(this.settings || []);\n            this.initForm();\n        }\n    }\n\n    /** Save changes to the given setting level */\n    public save(level: EncryptionLevel) {\n        const item = this.used_settings[level];\n        if (\n            item &&\n            !this.saving[level] &&\n            item.changes &&\n            item.changes.settings_string !== undefined\n        ) {\n            this.saving[level] = true;\n            item.save().then(\n                (new_settings: EngineSettings) => {\n                    this.saving[level] = false;\n                    this.settings[level] = new_settings;\n                    this._service.notifySuccess(`Successfully saved ${this.type(level)} settings.`);\n                    this.used_settings = this.processSettings(this.settings || []);\n                    this.initForm();\n                },\n                err => {\n                    this.saving[level] = false;\n                    this._service.notifyError(\n                        `Error updating settings. Error: ${err.message || err}`\n                    );\n                }\n            );\n        }\n    }\n\n    /** Save all changes to settings */\n    public saveAll() {\n        if (this.has_errors) {\n            return;\n        }\n        const promises = [];\n        for (let i = 0; i < EncryptionLevel.NeverDisplay + 1; i++) {\n            if (\n                this.settings[i] &&\n                !this.saving[i] &&\n                Object.keys(this.used_settings[i].changes || {}).length\n            ) {\n                this.saving[i] = true;\n                promises.push(this.used_settings[i].save());\n            }\n        }\n        if (promises.length) {\n            Promise.all(promises).then(\n                (results: EngineSettings[]) => {\n                    for (const result of results) {\n                        this.saving[result.encryption_level] = false;\n                        this.settings[result.encryption_level] = result;\n                    }\n                    this._service.notifySuccess('Successfully saved all settings.');\n                    this.used_settings = this.processSettings(this.settings || []);\n                    this.initForm();\n                },\n                err => {\n                    for (let i = 0; i < EncryptionLevel.NeverDisplay + 1; i++) {\n                        this.saving[i] = false;\n                    }\n                    this._service.notifyError(\n                        `Error updating settings. Error: ${err.message || err}`\n                    );\n                }\n            );\n        }\n    }\n\n    public clearChanges() {\n        if (this.edited_count < 1) {\n            return;\n        }\n        this.used_settings = this.processSettings(this.settings || []);\n        this.initForm();\n    }\n\n    private initForm() {\n        this.form = new FormGroup({\n            settings0: new FormControl(this.used_settings[0].settings_string, [validateYAML]),\n            settings1: new FormControl(this.used_settings[1].settings_string, [validateYAML]),\n            settings2: new FormControl(this.used_settings[2].settings_string, [validateYAML]),\n            settings3: new FormControl(this.used_settings[3].settings_string, [validateYAML]),\n            settings4: new FormControl(this.used_settings[4].settings_string, [validateYAML])\n        });\n        for (let i = 0; i < EncryptionLevel.NeverDisplay + 1; i++) {\n            this.subscription(\n                `setting_change_${i}`,\n                this.form.controls[`settings${i}`].valueChanges.subscribe(value => {\n                    this.used_settings[i].storePendingChange('settings_string', value);\n                })\n            );\n        }\n    }\n\n    private processSettings(settings: EngineSettings[]): EngineSettings[] {\n        const processed_settings = [];\n        for (let i = 0; i < EncryptionLevel.NeverDisplay + 1; i++) {\n            processed_settings.push(this.processSetting(settings[i]));\n        }\n        processed_settings.push(\n            this.merge ? this.generateMergedSettings(processed_settings) : settings[3]\n        );\n        return processed_settings;\n    }\n\n    private processSetting(setting: EngineSettings): EngineSettings {\n        if (\n            (setting.encryption_level === EncryptionLevel.Admin && !this.is_admin) ||\n            (setting.encryption_level === EncryptionLevel.Support && !this.is_support) ||\n            setting.encryption_level === EncryptionLevel.NeverDisplay\n        ) {\n            const obj = {};\n            for (const key of setting.keys) {\n                obj[key] = '<MASKED>';\n            }\n            const settings_string = (setting.keys || []).length ? yaml.safeDump(obj) : '';\n            return new EngineSettings(this._service.EngineSettings, {\n                ...setting.toJSON(),\n                parent_id: this.id,\n                settings_string\n            });\n        }\n        return new EngineSettings(this._service.EngineSettings, { ...setting, parent_id: this.id });\n    }\n\n    /** Genereate merged settings from all available settings */\n    private generateMergedSettings(settings: EngineSettings[]): EngineSettings {\n        const local_settings = (settings || []).map(\n            item => yaml.safeLoad(item.settings_string) || {}\n        );\n        const remote_settings = (this.merge_settings || []).map(\n            item => yaml.safeLoad(item.settings_string) || {}\n        );\n        const merged_settings = merge.all(remote_settings.concat(local_settings));\n        const settings_string = Object.keys(merged_settings).length ? yaml.safeDump(merged_settings, { strict: true }) : '';\n        return new EngineSettings(null, {\n            settings_string,\n            parent_id: this.id,\n            keys: Object.keys(merged_settings)\n        });\n    }\n}\n","<form *ngIf=\"form && used_settings && used_settings.length\" [formGroup]=\"form\">\n    <div class=\"actions\">\n        <button mat-button *ngIf=\"edited_count > 0\" (tapped)=\"clearChanges()\">\n            <div class=\"text\" *ngIf=\"!saving[shown_option.id]; else spinner\">Clear Changes [C]</div>\n        </button>\n        <button\n            mat-button\n            *ngIf=\"active_edited\"\n            [disabled]=\"has_errors && !saving[shown_option.id]\"\n            (tapped)=\"save(shown_option.id)\"\n        >\n            <div class=\"text\" *ngIf=\"!saving[shown_option.id]; else spinner\">Save [S]</div>\n        </button>\n        <button\n            mat-button\n            *ngIf=\"edited_count > 1\"\n            [disabled]=\"has_errors && !saving[shown_option.id]\"\n            (tapped)=\"saveAll()\"\n        >\n            <div class=\"text\" *ngIf=\"!saving[shown_option.id]; else spinner\">Save All [A]</div>\n        </button>\n    </div>\n    <mat-tab-group\n        [selectedIndex]=\"level_index\"\n        (selectedIndexChange)=\"encryption_level = available_levels[$event].id\"\n    >\n        <mat-tab\n            *ngFor=\"let option of available_levels\"\n            [label]=\"\n                option.name +\n                (option.id !== 4 && used_settings[option.id]?.changes?.settings_string !== undefined\n                    ? ' *'\n                    : '')\n            \"\n        >\n        </mat-tab>\n    </mat-tab-group>\n    <ng-container *ngFor=\"let option of available_levels\">\n        <ng-container\n            *ngIf=\"encryption_level === option.id && form.controls['settings' + option.id]\"\n        >\n            <div [class.error-border]=\"form.controls['settings' + option.id]?.errors\">\n                <settings-form-field\n                    [formControlName]=\"'settings' + option.id\"\n                    [readonly]=\"!option.active || this.saving[option.id]\"\n                ></settings-form-field>\n            </div>\n            <div class=\"error-display\" *ngIf=\"form.controls['settings' + option.id]?.errors\">\n                {{ form.controls['settings' + option.id].errors.yaml }}\n            </div>\n        </ng-container>\n    </ng-container>\n</form>\n<ng-template #spinner>\n    <mat-spinner diameter=\"32\"></mat-spinner>\n</ng-template>\n","import { Component, Input } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { EncryptionLevel } from '@placeos/ts-client';\nimport { SPACE, ENTER } from '@angular/cdk/keycodes';\n\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { BaseDirective } from 'src/app/shared/globals/base.directive';\nimport { EngineServiceLike, Identity } from 'src/app/shared/utilities/types.utilities';\nimport { MatChipInputEvent } from '@angular/material/chips';\n\n@Component({\n    selector: 'system-form',\n    templateUrl: './system-form.component.html',\n    styleUrls: ['./system-form.component.scss']\n})\nexport class SystemFormComponent extends BaseDirective {\n    /** Group of form fields used for creating the system */\n    @Input() public form: FormGroup;\n    /** Levels of encyption available for the system's settings */\n    public encryption_levels: Identity[] = [\n        { id: EncryptionLevel.None, name: 'None' },\n        { id: EncryptionLevel.Support, name: 'Support' },\n        { id: EncryptionLevel.Admin, name: 'Admin' },\n        { id: EncryptionLevel.NeverDisplay, name: 'Never Display' }\n    ]\n\n    /** List of separator characters for features */\n    public readonly separators: number[] = [ENTER, SPACE];\n\n    public get feature_list(): string[] {\n        return this.form.controls.feature_list.value;\n    }\n\n    /** Service for handling zones */\n    public get zone_service(): EngineServiceLike {\n        return this._service.Zones;\n    }\n\n    constructor(private _service: ApplicationService) {\n        super();\n    }\n\n    /**\n     * Add a feature to the list of features for the item\n     * @param event Input event\n     */\n    public addFeature(event: MatChipInputEvent): void {\n        if (!this.form || !this.form.controls.feature_list) return;\n        const input = event.input;\n        const value = event.value;\n        const feature_list = this.feature_list;\n        if ((value || '').trim()) {\n            feature_list.push(value);\n            this.form.controls.feature_list.setValue(feature_list);\n        }\n\n        // Reset the input value\n        if (input) {\n            input.value = '';\n        }\n    }\n\n    /**\n     * Remove feature from the list\n     * @param existing_feature Feature to remove\n     */\n    public removeFeature(existing_feature: string): void {\n        if (!this.form || !this.form.controls.feature_list) return;\n        const feature_list = this.feature_list;\n        const index = feature_list.indexOf(existing_feature);\n\n        if (index >= 0) {\n            feature_list.splice(index, 1);\n            this.form.controls.feature_list.setValue(feature_list);\n        }\n    }\n}\n","<div class=\"system form\" *ngIf=\"form\">\n    <form [formGroup]=\"form\">\n        <div class=\"field\" *ngIf=\"form.controls.zone\">\n            <label\n                for=\"zone\"\n                [class.error]=\"form.controls.zone.invalid && form.controls.zone.touched\"\n                >Zone<span>*</span>:\n            </label>\n            <item-search-field\n                [service]=\"zone_service\"\n                formControlName=\"zone\"\n            ></item-search-field>\n            <div class=\"error\" *ngIf=\"form.controls.zone.invalid && form.controls.zone.touched\">\n                Zone is required\n            </div>\n        </div>\n        <div class=\"fieldset\">\n            <div class=\"field\" *ngIf=\"form.controls.name\">\n                <label\n                    for=\"system-name\"\n                    [class.error]=\"form.controls.name.invalid && form.controls.name.touched\"\n                    >Name<span>*</span>:</label\n                >\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"system-name\"\n                        placeholder=\"System Name\"\n                        formControlName=\"name\"\n                        required\n                    />\n                    <mat-error *ngIf=\"form.controls.name.invalid\"\n                        >System name is required</mat-error\n                    >\n                </mat-form-field>\n            </div>\n            <div class=\"field\" *ngIf=\"form.controls.email\">\n                <label\n                    for=\"system-email\"\n                    [class.error]=\"form.controls.email.invalid && form.controls.email.touched\"\n                    >Email:</label\n                >\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"system-email\"\n                        placeholder=\"System Email\"\n                        formControlName=\"email\"\n                    />\n                    <mat-error *ngIf=\"form.controls.email.invalid\">{{\n                        form.controls.email.hasError('email')\n                            ? 'A valid email is required'\n                            : 'Email is invalid'\n                    }}</mat-error>\n                </mat-form-field>\n            </div>\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.support_url\">\n            <label\n                for=\"support-url\"\n                [class.error]=\"\n                    form.controls.support_url.invalid && form.controls.support_url.touched\n                \"\n                >Support URL:</label\n            >\n            <mat-form-field appearance=\"outline\">\n                <input\n                    matInput\n                    name=\"support-url\"\n                    placeholder=\"Support URL\"\n                    formControlName=\"support_url\"\n                />\n                <mat-error *ngIf=\"form.controls.support_url.invalid\">{{\n                    form.controls.support_url.hasError('pattern')\n                        ? 'A valid URL is required'\n                        : 'Support URL is invalid'\n                }}</mat-error>\n            </mat-form-field>\n        </div>\n        <div class=\"fieldset\">\n            <div class=\"field\" *ngIf=\"form.controls.installed_ui_devices\">\n                <label\n                    for=\"ui-devices\"\n                    [class.error]=\"\n                        form.controls.installed_ui_devices.invalid &&\n                        form.controls.installed_ui_devices.touched\n                    \"\n                    >Number of Touch Panels:</label\n                >\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"ui-devices\"\n                        type=\"number\"\n                        placeholder=\"Number of Touch Panels\"\n                        formControlName=\"installed_ui_devices\"\n                    />\n                    <mat-error *ngIf=\"form.controls.installed_ui_devices.invalid\"\n                        >A valid positive number is required</mat-error\n                    >\n                </mat-form-field>\n            </div>\n            <div class=\"field\" *ngIf=\"form.controls.capacity\">\n                <label\n                    for=\"capacity\"\n                    [class.error]=\"form.controls.capacity.invalid && form.controls.capacity.touched\"\n                    >Capacity:</label\n                >\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"capacity\"\n                        type=\"number\"\n                        placeholder=\"Capacity\"\n                        formControlName=\"capacity\"\n                    />\n                    <mat-error *ngIf=\"form.controls.capacity.invalid\"\n                        >A valid positive number is required</mat-error\n                    >\n                </mat-form-field>\n            </div>\n            <div class=\"field\" *ngIf=\"form.controls.bookable\">\n                <mat-checkbox name=\"bookable\" formControlName=\"bookable\">Bookable</mat-checkbox>\n            </div>\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.description\">\n            <label for=\"description\">Description:</label>\n            <mat-form-field appearance=\"outline\">\n                <textarea\n                    matInput\n                    name=\"description\"\n                    placeholder=\"Description\"\n                    formControlName=\"description\"\n                ></textarea>\n            </mat-form-field>\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.tag_list\">\n            <label\n                for=\"system-email\"\n                [class.error]=\"form.controls.tag_list.invalid && form.controls.tag_list.touched\"\n                >Features:</label\n            >\n            <mat-form-field appearance=\"outline\">\n                <mat-chip-list #chipList aria-label=\"Zone Tags\">\n                    <mat-chip\n                        *ngFor=\"let feature of feature_list\"\n                        [selectable]=\"true\"\n                        [removable]=\"true\"\n                        (removed)=\"removeFeature(feature)\"\n                    >\n                        {{ feature }}\n                        <app-icon matChipRemove [icon]=\"{ class: 'backoffice-cross' }\"></app-icon>\n                    </mat-chip>\n                    <input\n                        placeholder=\"Features...\"\n                        [matChipInputFor]=\"chipList\"\n                        [matChipInputSeparatorKeyCodes]=\"separators\"\n                        [matChipInputAddOnBlur]=\"true\"\n                        (matChipInputTokenEnd)=\"addFeature($event)\"\n                    />\n                </mat-chip-list>\n            </mat-form-field>\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.map_id\">\n            <label for=\"map_id\">Map ID:</label>\n            <mat-form-field appearance=\"outline\">\n                <input\n                    matInput\n                    name=\"map_id\"\n                    placeholder=\"Map SVG ID selector e.g. area-01.10-status\"\n                    formControlName=\"map_id\"\n                />\n            </mat-form-field>\n        </div>\n    </form>\n</div>\n","import { Component, Input } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\n\n@Component({\n  selector: 'system-trigger-form',\n  templateUrl: './system-trigger-form.component.html',\n  styleUrls: ['./system-trigger-form.component.scss']\n})\nexport class SystemTriggerFormComponent {\n    /** Group of form fields used for creating the system */\n    @Input() public form: FormGroup;\n}\n","<div class=\"system-trigger form\" *ngIf=\"form\">\n    <form [formGroup]=\"form\">\n        <div class=\"field\" *ngIf=\"form.controls.name\">\n            <label for=\"name\"> Name: </label>\n            <div class=\"value\" name=\"name\">{{ form.controls.name.value }}</div>\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.name\">\n            <label for=\"triggered\"> Currently Triggered: </label>\n            <div class=\"value\" name=\"triggered\">{{ !!form.controls.triggered.value }}</div>\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.enabled\">\n            <mat-checkbox name=\"enabled\" formControlName=\"enabled\">Enabled</mat-checkbox>\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.important\">\n            <mat-checkbox name=\"important\" formControlName=\"important\">Important</mat-checkbox>\n        </div>\n    </form>\n</div>\n","import { Component, Input, ViewChild } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { ENTER, COMMA, SPACE } from '@angular/cdk/keycodes';\nimport { MatChipList } from '@angular/material/chips';\nimport { EngineSystem } from '@placeos/ts-client';\n\nimport { Identity } from 'src/app/shared/utilities/types.utilities';\n\n@Component({\n    selector: 'trigger-action-form',\n    templateUrl: './trigger-action-form.component.html',\n    styleUrls: ['./trigger-action-form.component.scss']\n})\nexport class TriggerActionFormComponent {\n    /** Group of form fields used for creating the system */\n    @Input() public form: FormGroup;\n    /** Systems used for templating the status variables */\n    @Input() public system: EngineSystem;\n    /** List of seperators for storing emails */\n    public readonly separators: number[] = [ENTER, COMMA, SPACE];\n    /** Variable to hold new email addresses */\n    public new_email = '';\n\n    @ViewChild('chipList') private chip_list: MatChipList;\n\n    /** List of available trigger action types */\n    public action_types: Identity[] = [\n        { id: 'function', name: 'Execute Method' },\n        { id: 'email', name: 'Send Email' }\n    ];\n\n    public get email_list(): string[] {\n        return (\n            (this.form && this.form.controls.emails ? this.form.controls.emails.value : null) || []\n        );\n    }\n\n    /**\n     * Add the given emails to the list\n     * @param email New email\n     */\n    public addEmail(email: string): void {\n        if (!email) {\n            return;\n        }\n        const email_list = this.email_list;\n        if (email_list.indexOf(email) < 0) {\n            email_list.push(email);\n        }\n        this.form.controls.emails.setValue(email_list);\n        this.chip_list.errorState = !this.form.controls.emails.valid;\n    }\n\n    /**\n     * Remove given email from the list\n     * @param email Exisiting email\n     */\n    public removeEmail(email: string): void {\n        const email_list = this.email_list;\n        const index = email_list.indexOf(email);\n        if (index >= 0) {\n            email_list.splice(index, 1);\n        }\n        this.form.controls.emails.setValue(email_list);\n        this.chip_list.errorState = !this.form.controls.emails.valid;\n    }\n}\n","<div class=\"module form\" *ngIf=\"form\">\n    <form [formGroup]=\"form\">\n        <div class=\"field\" *ngIf=\"form.controls.action_type\">\n            <label for=\"type\">Action Type: </label>\n            <mat-form-field appearance=\"outline\">\n                <mat-select name=\"type\" formControlName=\"action_type\">\n                    <mat-option *ngFor=\"let type of action_types\" [value]=\"type.id\">\n                        {{ type.name }}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n        </div>\n        <ng-container [ngSwitch]=\"form.controls.action_type.value\">\n            <ng-container *ngSwitchCase=\"'email'\">\n                <div class=\"field\" *ngIf=\"form.controls.emails\">\n                    <label\n                        for=\"description\"\n                        [class.error]=\"form.controls.emails.touched && form.controls.emails.errors\"\n                    >\n                        Email Addresses<span>*</span>:\n                    </label>\n                    <mat-form-field appearance=\"outline\">\n                        <mat-chip-list #chipList aria-label=\"Email addresses\">\n                            <mat-chip\n                                *ngFor=\"let email of email_list\"\n                                [selectable]=\"true\"\n                                [removable]=\"true\"\n                                (removed)=\"removeEmail(email)\"\n                            >\n                                {{ email }}\n                                <app-icon\n                                    matChipRemove\n                                    [icon]=\"{ class: 'backoffice-cross' }\"\n                                ></app-icon>\n                            </mat-chip>\n                            <input\n                                [(ngModel)]=\"new_email\"\n                                [ngModelOptions]=\"{ standalone: true }\"\n                                placeholder=\"New email...\"\n                                [matChipInputFor]=\"chipList\"\n                                [matChipInputSeparatorKeyCodes]=\"separators\"\n                                [matChipInputAddOnBlur]=\"true\"\n                                (matChipInputTokenEnd)=\"addEmail($event.value); new_email = ''\"\n                            />\n                        </mat-chip-list>\n                        <mat-error>{{\n                            form.controls.emails.hasError('email')\n                                ? 'Email addresses need to be valid'\n                                : 'An email address is required'\n                        }}</mat-error>\n                    </mat-form-field>\n                </div>\n                <div class=\"field\" *ngIf=\"form.controls.content\">\n                    <label for=\"content\">Email Body:</label>\n                    <mat-form-field appearance=\"outline\">\n                        <textarea\n                            matInput\n                            name=\"content\"\n                            placeholder=\"Email body contents...\"\n                            formControlName=\"content\"\n                        ></textarea>\n                    </mat-form-field>\n                </div>\n            </ng-container>\n            <ng-container *ngSwitchDefault>\n                <div class=\"field\" *ngIf=\"form.controls.method_call\">\n                    <label for=\"content\">Select method to execute:</label>\n                    <system-exec-field\n                        formControlName=\"method_call\"\n                        [system]=\"system\"\n                        [executable]=\"false\"\n                    ></system-exec-field>\n                </div>\n            </ng-container>\n        </ng-container>\n    </form>\n</div>\n","import { Component, OnInit, Input, SimpleChanges, OnChanges } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport {\n    EngineModule,\n    EngineSystem,\n    TriggerConditionOperator,\n    TriggerStatusVariable\n} from '@placeos/ts-client';\n\nimport { Identity } from 'src/app/shared/utilities/types.utilities';\nimport { calculateModuleIndex } from 'src/app/shared/utilities/api.utilities';\nimport { ApplicationService } from 'src/app/services/app.service';\n\n@Component({\n    selector: 'trigger-condition-comparison-form',\n    templateUrl: './comparison-form.component.html',\n    styleUrls: ['./comparison-form.component.scss']\n})\nexport class TriggerConditionComparisonFormComponent implements OnInit, OnChanges {\n    /** Group of form fields used for creating the system */\n    @Input() public form: FormGroup;\n    /** Systems used for templating the status variables */\n    @Input() public system: EngineSystem;\n    /** List of modules associated with the template system */\n    public modules: EngineModule[] = [];\n    /** List of status variables associated with the selected module */\n    public module_list: Identity[] = [];\n    /** List of status variables associated with the selected module */\n    public left_status_variables: Identity[] = [];\n    /** List of status variables associated with the selected module */\n    public right_status_variables: Identity[] = [];\n    /** Type of value to compare the left hand side to */\n    public rhs_type: 'constant' | 'status_var' = 'constant';\n    /** Type of value to compare the left hand side to */\n    public rhs_value: string;\n    /** Status variable details for the left side of the comparison */\n    public left_side: TriggerStatusVariable = { mod: '', status: '', keys: [] };\n    /** Status variable details for the right side of the comparison */\n    public right_side: TriggerStatusVariable = { mod: '', status: '', keys: [] };\n\n    /** Types of trigger conditions */\n    public right_var_type: Identity[] = [\n        { id: 'constant', name: 'Constant Value' },\n        { id: 'status_var', name: 'Status Variable' }\n    ];\n\n    /** Allowed comparison operators */\n    public compare_types: Identity[] = [\n        { id: TriggerConditionOperator.EQ, name: 'equal to' },\n        { id: TriggerConditionOperator.NEQ, name: 'not equal to' },\n        { id: TriggerConditionOperator.GT, name: 'greater than' },\n        { id: TriggerConditionOperator.GTE, name: 'greater than or equal' },\n        { id: TriggerConditionOperator.LT, name: 'less than' },\n        { id: TriggerConditionOperator.LTE, name: 'less than or equal' },\n        { id: TriggerConditionOperator.AND, name: 'truthy AND' },\n        { id: TriggerConditionOperator.OR, name: 'truthy OR' },\n        { id: TriggerConditionOperator.XOR, name: 'truthy XOR' }\n    ];\n\n    public get left_keys(): string {\n        return this.left_side.keys.join(',');\n    }\n    public get right_keys(): string {\n        return this.right_side.keys.join(',');\n    }\n\n    constructor(private _service: ApplicationService) {}\n\n    public ngOnInit(): void {}\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        if (changes.system && this.system) {\n            this.loadSystemModules();\n        }\n    }\n\n    public updateFormForSide(side: 'left' | 'right') {\n        if (this.form.controls[side]) {\n            this.form.controls[side].setValue(this[side + '_side']);\n        }\n    }\n\n    /**\n     * Load the list of status variables for the given modules\n     * @param module Module to list status variables\n     */\n    public loadSystemStatusVariables(mod_name: string, side: 'left' | 'right') {\n        const name = mod_name.split('_');\n        this._service.Systems.state(this.system.id, name[0], +name[1]).then(\n            var_map => {\n                if (Object.keys(var_map).length <= 0) {\n                    var_map.connected = true;\n                }\n                this[`${side}_status_variables`] = Object.keys(var_map).map(key => ({\n                    id: key,\n                    name: key\n                }));\n                this.addExistingStatusVariables();\n            },\n            () =>\n                this._service.notifyError(\n                    `Error loading the status variables for ${this.system.id}, ${mod_name}`\n                )\n        );\n    }\n\n    /**\n     * Load the list of modules for the active system\n     */\n    private loadSystemModules() {\n        if (!this.system) {\n            return;\n        }\n        this._service.Modules.query({ control_system_id: this.system.id }).then(module_list => {\n            this.modules = module_list;\n            const mod_list = this.system.modules;\n            this.modules.sort((a, b) => mod_list.indexOf(a.id) - mod_list.indexOf(b.id));\n            this.module_list = this.modules.map(mod => {\n                const module_class =\n                    mod.custom_name || (mod.driver ? mod.driver.class_name : 'System');\n                const index = calculateModuleIndex(this.modules, mod);\n                return {\n                    id: mod.id,\n                    name: `${module_class}_${index}`\n                };\n            });\n            this.addExistingModules();\n        });\n    }\n\n    /**\n     * Add pre-exisiting module detail to the available list\n     */\n    private addExistingModules() {\n        if (this.form.controls.left && this.form.controls.left.value) {\n            const module = this.form.controls.left.value.mod;\n            if (!this.module_list.find(mod => mod.name === module)) {\n                this.module_list.unshift({ id: 'old_left_value', name: module });\n            }\n            this.loadSystemStatusVariables(module, 'left');\n            this.left_side = this.form.controls.left.value;\n        }\n        if (\n            this.form.controls.right &&\n            this.form.controls.right.value &&\n            this.form.controls.right.value.mod\n        ) {\n            this.rhs_type = 'status_var';\n            const module = this.form.controls.right.value.mod;\n            if (!this.module_list.find(mod => mod.name === module)) {\n                this.module_list.unshift({ id: 'old_right_value', name: module });\n            }\n            this.loadSystemStatusVariables(module, 'right');\n            this.right_side = this.form.controls.right_side.value;\n        }\n    }\n\n    /**\n     * Add pre-exisiting status variables to the available list\n     */\n    private addExistingStatusVariables() {\n        if (this.left_side.status) {\n            if (!this.left_status_variables.find(status => status.name === this.left_side.status)) {\n                this.left_status_variables.unshift({\n                    id: this.left_side.status,\n                    name: this.left_side.status\n                });\n            }\n        }\n        if (this.right_side.status) {\n            if (\n                !this.right_status_variables.find(status => status.name === this.right_side.status)\n            ) {\n                this.right_status_variables.unshift({\n                    id: this.right_side.status,\n                    name: this.right_side.status\n                });\n            }\n        }\n    }\n}\n","<div class=\"trigger-condition form comparison\" *ngIf=\"form\" [formGroup]=\"form\">\n    <ng-container\n        *ngTemplateOutlet=\"status_variable_form; context: { side: 'left' }\"\n    ></ng-container>\n    <div *ngIf=\"form.controls.left.touched && form.controls.left.errors\" class=\"error\">\n        A module status variable is required\n    </div>\n    <div class=\"field\" *ngIf=\"form.controls.operator\">\n        <label for=\"operator\" hidden>Operation:</label>\n        <mat-form-field appearance=\"outline\">\n            <mat-select name=\"operator\" formControlName=\"operator\" placeholder=\"Select comparison operator\">\n                <mat-option *ngFor=\"let operation of compare_types\" [value]=\"operation.id\">\n                    {{ operation.name }}\n                </mat-option>\n            </mat-select>\n        </mat-form-field>\n    </div>\n    <div class=\"field\" *ngIf=\"form.controls.operator\">\n        <label for=\"compared-to\" hidden>Compared to:</label>\n        <mat-form-field appearance=\"outline\">\n            <mat-select\n                name=\"compared-to\"\n                [(ngModel)]=\"rhs_type\"\n                (ngModelChange)=\"form.controls.right.setValue(null)\"\n                [ngModelOptions]=\"{ standalone: true }\"\n            >\n                <mat-option *ngFor=\"let type of right_var_type\" [value]=\"type.id\">\n                    {{ type.name }}\n                </mat-option>\n            </mat-select>\n        </mat-form-field>\n    </div>\n    <div class=\"field\" *ngIf=\"rhs_type === 'constant' && form.controls.right; else rhs_status_var\">\n        <label for=\"constant\" hidden>Compared to:</label>\n        <mat-form-field appearance=\"outline\">\n            <input\n                matInput\n                name=\"constant\"\n                formControlName=\"right\"\n                placeholder=\"true/false, 'string', 123.456\"\n            />\n        </mat-form-field>\n    </div>\n    <div *ngIf=\"form.controls.right.touched && form.controls.right.errors\" class=\"error\">\n        A module status variable or value is required\n    </div>\n</div>\n<ng-template #rhs_status_var>\n    <ng-container\n        *ngTemplateOutlet=\"status_variable_form; context: { side: 'right' }\"\n    ></ng-container>\n</ng-template>\n<ng-template #status_variable_form let-side=\"side\">\n    <div class=\"fieldset\">\n        <div class=\"field\">\n            <label for=\"type\">Module:</label>\n            <mat-form-field appearance=\"outline\">\n                <mat-select\n                    name=\"type\"\n                    [(ngModel)]=\"this[side + '_side'].mod\"\n                    (ngModelChange)=\"loadSystemStatusVariables($event, side)\"\n                    [ngModelOptions]=\"{ standalone: true }\"\n                    placeholder=\"Select module\"\n                >\n                    <mat-option *ngFor=\"let mod of module_list\" [value]=\"mod.name\">\n                        {{ mod.name }}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n        </div>\n        <div\n            class=\"field\"\n            *ngIf=\"this[side + '_status_variables'] && this[side + '_status_variables'].length\"\n        >\n            <label [for]=\"side + '-status-var'\">Status Variable:</label>\n            <mat-form-field appearance=\"outline\">\n                <mat-select\n                    [name]=\"side + '-status-var'\"\n                    [(ngModel)]=\"this[side + '_side'].status\"\n                    (ngModelChange)=\"updateFormForSide(side)\"\n                    [ngModelOptions]=\"{ standalone: true }\"\n                    placeholder=\"Select status variable\"\n                >\n                    <mat-option\n                        *ngFor=\"let mod of this[side + '_status_variables']\"\n                        [value]=\"mod.name\"\n                    >\n                        {{ mod.name }}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n        </div>\n    </div>\n    <div\n        class=\"field\"\n        *ngIf=\"this[side + '_status_variables'] && this[side + '_status_variables'].length\"\n    >\n        <label [for]=\"side + '-subkeys'\">Subkeys:</label>\n        <mat-form-field appearance=\"outline\">\n            <input\n                matInput\n                [ngModel]=\"this[side + '_keys']\"\n                (ngModelChange)=\"this[side + '_side'].keys = $event.split(','); updateFormForSide(side);\"\n                [name]=\"side + '-subkeys'\"\n                placeholder=\"Status variable subkeys...\"\n            />\n        </mat-form-field>\n    </div>\n</ng-template>\n","import { Component, Input, SimpleChanges, OnChanges } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\n\nimport { Identity } from 'src/app/shared/utilities/types.utilities';\nimport { numberToPosition } from 'src/app/shared/utilities/general.utilities';\n\nimport * as dayjs from 'dayjs';\nimport * as cron from 'cron-builder';\n\n@Component({\n    selector: 'trigger-condition-time-form',\n    templateUrl: './time-form.component.html',\n    styleUrls: ['./time-form.component.scss']\n})\nexport class TriggerConditionTimeFormComponent implements OnChanges {\n    /** Group of form fields used for creating the system */\n    @Input() public form: FormGroup;\n    /** List of available periods for scheduled repetition */\n    public repeat_period: Identity[] = [\n        { id: 'minute', name: 'Minute' },\n        { id: 'hour', name: 'Hour' },\n        { id: 'day', name: 'Day' },\n        { id: 'week', name: 'Week' },\n        { id: 'month', name: 'Month' },\n        { id: 'year', name: 'Year' }\n    ];\n    /** Whether condition is a cron(recurring) job */\n    public is_cron: boolean;\n    /** The period which the user selects the recurrence */\n    public cron_period: 'minute' | 'hour' | 'day' | 'week' | 'month' | 'year' = 'minute';\n\n    public minutes_in_hour = [0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55];\n    public hours_in_day = [12, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11];\n    public days_of_week = Array(7)\n        .fill(0)\n        .map((_, index) =>\n            dayjs()\n                .day(index)\n                .format('ddd')\n        );\n    public days_of_month: Identity[] = Array(31)\n        .fill(0)\n        .map((_, index) => ({ id: index + 1, name: `${numberToPosition(index + 1)}` }));\n    public months_of_year = Array(12)\n        .fill(0)\n        .map((_, index) =>\n            dayjs()\n                .month(index)\n                .format('MMM')\n        );\n    /** Minute of the hour to recurr on */\n    public cron_minute = 0;\n    /** Hour of the day to recurr on */\n    public cron_hour = 0;\n    /** Hour of the day to recurr on */\n    public cron_hour_period = 'AM';\n    /** Hour of the day to recurr on */\n    public cron_day = this.days_of_week[0];\n    /** Hour of the day to recurr on */\n    public cron_date = 1;\n    /** Hour of the day to recurr on */\n    public cron_month = this.months_of_year[0];\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        if (changes.form && this.form) {\n            this.is_cron = this.form.controls.time_type.value === 'cron';\n            if (this.is_cron) {\n                this.loadCronTab(this.form.controls.cron.value);\n            }\n        }\n    }\n\n    /**\n     * Update the output CRON string for the selected periods\n     */\n    public updateCronString() {\n        if (this.form && this.form.controls.cron) {\n            const current_cron = new cron();\n            const hour = (this.cron_hour % 12) + (this.cron_hour_period === 'AM' ? 0 : 12);\n            const day_of_week = this.days_of_week.indexOf(this.cron_day);\n            const month = this.months_of_year.indexOf(this.cron_month);\n            switch (this.cron_period) {\n                case 'minute':\n                    break;\n                case 'hour':\n                    current_cron.set('minute', [`${this.cron_minute}`]);\n                    break;\n                case 'day':\n                    current_cron.set('minute', [`${this.cron_minute}`]);\n                    current_cron.set('hour', [`${hour}`]);\n                    break;\n                case 'week':\n                    current_cron.set('minute', [`${this.cron_minute}`]);\n                    current_cron.set('hour', [`${hour}`]);\n                    current_cron.set('dayOfTheWeek', [`${day_of_week + 1}`]);\n                    break;\n                case 'month':\n                    current_cron.set('minute', [`${this.cron_minute}`]);\n                    current_cron.set('hour', [`${hour}`]);\n                    current_cron.set('dayOfTheMonth', [`${this.cron_date}`]);\n                    break;\n                case 'year':\n                    current_cron.set('minute', [`${this.cron_minute}`]);\n                    current_cron.set('hour', [`${hour}`]);\n                    current_cron.set('dayOfTheMonth', [`${this.cron_date}`]);\n                    current_cron.set('month', [`${month + 1}`]);\n                    break;\n            }\n            const cron_str = current_cron.build();\n            this.form.controls.cron.setValue(cron_str);\n        }\n    }\n\n    private loadCronTab(cron_tab: string): void {\n        const cron_str = new cron(cron_tab);\n        this.cron_minute =\n            cron_str.get('minute') === '*' ? this.cron_minute : +cron_str.get('minute');\n        this.cron_hour = cron_str.get('hour') === '*' ? this.cron_minute : +cron_str.get('hour');\n        if (this.cron_hour > 12) {\n            this.cron_hour = this.cron_hour % 12;\n            this.cron_hour_period = 'PM';\n        } else {\n            this.cron_hour_period = 'AM';\n        }\n        this.cron_day =\n            cron_str.get('dayOfTheWeek') === '*'\n                ? this.cron_day\n                : this.days_of_week[+cron_str.get('dayOfTheWeek')];\n        this.cron_date =\n            cron_str.get('dayOfTheMonth') === '*' ? this.cron_date : +cron_str.get('dayOfTheMonth');\n        this.cron_month =\n            cron_str.get('month') === '*'\n                ? this.cron_month\n                : this.months_of_year[+cron_str.get('month') - 1];\n        /** Set the cron period */\n        if (cron_str.get('month') !== '*') {\n            this.cron_period = 'year';\n        } else if (cron_str.get('dayOfTheMonth') !== '*') {\n            this.cron_period = 'month';\n        } else if (cron_str.get('dayOfTheWeek') !== '*') {\n            this.cron_period = 'week';\n        } else if (cron_str.get('hour') !== '*') {\n            this.cron_period = 'day';\n        } else if (cron_str.get('minute') !== '*') {\n            this.cron_period = 'hour';\n        } else {\n            this.cron_period = 'minute';\n        }\n    }\n}\n","<div class=\"trigger-condition form time\" *ngIf=\"form\" [formGroup]=\"form\">\n    <div class=\"field\">\n        <mat-checkbox [(ngModel)]=\"is_cron\" (ngModelChange)=\"form.controls.cron.setValue(null)\" [ngModelOptions]=\"{ standalone: true }\">\n            Recurring Schedule\n        </mat-checkbox>\n    </div>\n    <div class=\"fieldset\" *ngIf=\"!is_cron; else cron_time_form\">\n        <div class=\"field\" *ngIf=\"form.controls.time\">\n            <label for=\"type\">Date: </label>\n            <a-date-field name=\"date\" formControlName=\"time\"></a-date-field>\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.time\">\n            <label for=\"type\">Time: </label>\n            <a-time-field name=\"date\" formControlName=\"time\"></a-time-field>\n        </div>\n    </div>\n</div>\n<ng-template #cron_time_form>\n    <div class=\"field\">\n        <label for=\"type\">Repeat every: </label>\n        <mat-form-field appearance=\"outline\">\n            <mat-select\n                name=\"type\"\n                [(ngModel)]=\"cron_period\"\n                (ngModelChange)=\"updateCronString()\"\n                [ngModelOptions]=\"{ standalone: true }\"\n            >\n                <mat-option *ngFor=\"let period of repeat_period\" [value]=\"period.id\">\n                    {{ period.name }}\n                </mat-option>\n            </mat-select>\n        </mat-form-field>\n    </div>\n    <div class=\"field\" *ngIf=\"cron_period === 'month' || cron_period === 'year'\">\n        <label for=\"day\">Day of Month: </label>\n        <mat-form-field appearance=\"outline\">\n            <mat-select\n                name=\"day\"\n                [(ngModel)]=\"cron_date\"\n                (ngModelChange)=\"updateCronString()\"\n                [ngModelOptions]=\"{ standalone: true }\"\n            >\n                <mat-option *ngFor=\"let period of days_of_month\" [value]=\"period.id\">\n                    {{ period.name }}\n                </mat-option>\n            </mat-select>\n        </mat-form-field>\n    </div>\n    <div class=\"field\" *ngIf=\"cron_period === 'year'\">\n        <label for=\"month\">Month of year: </label>\n        <mat-button-toggle-group\n            name=\"month\"\n            [(ngModel)]=\"cron_month\"\n            (ngModelChange)=\"updateCronString()\"\n            [ngModelOptions]=\"{ standalone: true }\"\n        >\n            <mat-button-toggle *ngFor=\"let month of months_of_year\" [value]=\"month\">\n                {{ month }}\n            </mat-button-toggle>\n        </mat-button-toggle-group>\n    </div>\n    <div class=\"field\" *ngIf=\"cron_period === 'week'\">\n        <label for=\"weekday\">Day of week: </label>\n        <mat-button-toggle-group\n            name=\"weekday\"\n            [(ngModel)]=\"cron_day\"\n            (ngModelChange)=\"updateCronString()\"\n            [ngModelOptions]=\"{ standalone: true }\"\n        >\n            <mat-button-toggle *ngFor=\"let weekday of days_of_week\" [value]=\"weekday\">\n                {{ weekday }}\n            </mat-button-toggle>\n        </mat-button-toggle-group>\n    </div>\n    <div class=\"field\" *ngIf=\"cron_period !== 'minute' && cron_period !== 'hour'\">\n        <label for=\"hour\">Hour in the day: </label>\n        <mat-button-toggle-group\n            name=\"hour\"\n            [(ngModel)]=\"cron_hour\"\n            (ngModelChange)=\"updateCronString()\"\n            [ngModelOptions]=\"{ standalone: true }\"\n        >\n            <mat-button-toggle *ngFor=\"let hour of hours_in_day\" [value]=\"hour\">\n                {{ hour }}\n            </mat-button-toggle>\n        </mat-button-toggle-group>\n        <mat-button-toggle-group\n            name=\"hour\"\n            [(ngModel)]=\"cron_hour_period\"\n            (ngModelChange)=\"updateCronString()\"\n            [ngModelOptions]=\"{ standalone: true }\"\n        >\n            <mat-button-toggle *ngFor=\"let hour of ['AM', 'PM']\" [value]=\"hour\">\n                {{ hour }}\n            </mat-button-toggle>\n        </mat-button-toggle-group>\n    </div>\n    <div class=\"field\" *ngIf=\"cron_period !== 'minute'\">\n        <label for=\"minute\">Minute past the hour: </label>\n        <mat-button-toggle-group\n            name=\"minute\"\n            [(ngModel)]=\"cron_minute\"\n            (ngModelChange)=\"updateCronString()\"\n            [ngModelOptions]=\"{ standalone: true }\"\n        >\n            <mat-button-toggle *ngFor=\"let minute of minutes_in_hour\" [value]=\"minute\">\n                {{ minute }}\n            </mat-button-toggle>\n        </mat-button-toggle-group>\n    </div>\n</ng-template>\n","import { Component, Input } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { EngineSystem } from '@placeos/ts-client';\n\nimport { Identity } from 'src/app/shared/utilities/types.utilities';\n\n@Component({\n    selector: 'trigger-condition-form',\n    templateUrl: './trigger-condition-form.component.html',\n    styleUrls: ['./trigger-condition-form.component.scss']\n})\nexport class TriggerConditionFormComponent {\n    /** Group of form fields used for creating the system */\n    @Input() public form: FormGroup;\n    /** Systems used for templating the status variables */\n    @Input() public system: EngineSystem;\n\n    /** Types of trigger conditions */\n    public condition_types: Identity[] = [\n        { id: 'compare', name: 'Compare values' },\n        { id: 'time', name: 'Particular time' }\n    ];\n}\n","<div class=\"module form\" *ngIf=\"form\">\n    <form [formGroup]=\"form\">\n        <div class=\"field\" *ngIf=\"form.controls.condition_type\">\n            <label for=\"type\">Condition Type: </label>\n            <mat-form-field appearance=\"outline\">\n                <mat-select name=\"type\" formControlName=\"condition_type\">\n                    <mat-option *ngFor=\"let type of condition_types\" [value]=\"type.id\">\n                        {{ type.name }}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n        </div>\n        <ng-container *ngIf=\"form.controls.condition_type.value === 'compare'; else time_form\">\n            <trigger-condition-comparison-form [form]=\"form\" [system]=\"system\"></trigger-condition-comparison-form>\n        </ng-container>\n    </form>\n</div>\n<ng-template #time_form>\n    <trigger-condition-time-form [form]=\"form\"></trigger-condition-time-form>\n</ng-template>\n\n\n","import { Component, Input } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\n\n@Component({\n    selector: 'trigger-form',\n    templateUrl: './trigger-form.component.html',\n    styleUrls: ['./trigger-form.component.scss']\n})\nexport class TriggerFormComponent {\n    /** Group of form fields used for creating the system */\n    @Input() public form: FormGroup;\n}\n","<div class=\"zone form\" *ngIf=\"form\">\n    <form [formGroup]=\"form\">\n        <div class=\"field\" *ngIf=\"form.controls.name\">\n            <label\n                for=\"trigger-name\"\n                [class.error]=\"form.controls.name.invalid && form.controls.name.touched\"\n                >Name<span>*</span>:</label\n            >\n            <mat-form-field appearance=\"outline\">\n                <input\n                    matInput\n                    name=\"trigger-name\"\n                    placeholder=\"Trigger Name\"\n                    formControlName=\"name\"\n                    required\n                />\n                <mat-error *ngIf=\"form.controls.name.invalid\">Trigger name is required</mat-error>\n            </mat-form-field>\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.description\">\n            <label for=\"description\">Description:</label>\n            <mat-form-field appearance=\"outline\">\n                <textarea\n                    matInput\n                    name=\"description\"\n                    placeholder=\"Description\"\n                    formControlName=\"description\"\n                ></textarea>\n            </mat-form-field>\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.enable_webhook\">\n            <mat-checkbox name=\"enable-webhook\" formControlName=\"enable_webhook\">\n                Enable Webhook\n            </mat-checkbox>\n        </div>\n    </form>\n</div>\n","import { Component, Input } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\n\n@Component({\n    selector: 'user-form',\n    templateUrl: './user-form.component.html',\n    styleUrls: ['./user-form.component.scss']\n})\nexport class UserFormComponent {\n    /** Group of form fields used for creating the system */\n    @Input() public form: FormGroup;\n    /** Whether password should be visible in plaintext */\n    public show_password: boolean;\n    /** Whether password confirm should be visible in plaintext */\n    public show_confirm: boolean;\n}\n","<form class=\"user form\" *ngIf=\"form\" [formGroup]=\"form\">\n    <!--  fake fields are a workaround for chrome/opera autofill getting the wrong fields -->\n    <input id=\"email\" style=\"display: none;\" type=\"text\" name=\"fakeusernameremembered\" />\n    <input id=\"password\" style=\"display: none;\" type=\"password\" name=\"fakepasswordremembered\" />\n    <div class=\"field\" *ngIf=\"form.controls.name\">\n        <label\n            for=\"system-name\"\n            [class.error]=\"form.controls.name.invalid && form.controls.name.touched\"\n            >Name<span>*</span>:</label\n        >\n        <mat-form-field appearance=\"outline\">\n            <input matInput name=\"name\" placeholder=\"Name\" formControlName=\"name\" required />\n            <mat-error>User's name is required</mat-error>\n        </mat-form-field>\n    </div>\n    <div class=\"field\" *ngIf=\"form.controls.email\">\n        <label\n            for=\"useremail\"\n            [class.error]=\"form.controls.email.invalid && form.controls.email.touched\"\n            >Email<span>*</span>:</label\n        >\n        <mat-form-field appearance=\"outline\">\n            <input\n                matInput\n                name=\"useremail\"\n                placeholder=\"Email\"\n                formControlName=\"email\"\n                autocomplete=\"nope\"\n            />\n            <mat-error>A valid email is required</mat-error>\n        </mat-form-field>\n    </div>\n    <div class=\"field\" *ngIf=\"form.controls.staff_id\">\n        <label\n            for=\"staff-id\"\n            [class.error]=\"form.controls.staff_id.invalid && form.controls.staff_id.touched\"\n            >Card Number:</label\n        >\n        <mat-form-field appearance=\"outline\">\n            <input matInput name=\"staff-id\" placeholder=\"Card Number\" formControlName=\"staff_id\" />\n            <mat-error *ngIf=\"form.controls.staff_id.invalid\"\n                >A valid Card Number is required</mat-error\n            >\n        </mat-form-field>\n    </div>\n    <div class=\"field\" *ngIf=\"form.controls.support\">\n        <mat-checkbox name=\"support\" formControlName=\"support\">Support</mat-checkbox>\n    </div>\n    <div class=\"field\" *ngIf=\"form.controls.sys_admin\">\n        <mat-checkbox name=\"sys_admin\" formControlName=\"sys_admin\">System Admin</mat-checkbox>\n    </div>\n    <div class=\"field\" *ngIf=\"form.controls.staff_id\">\n        <label\n            for=\"new-password\"\n            [class.error]=\"form.controls.password.invalid && form.controls.password.touched\"\n            >Password:</label\n        >\n        <mat-form-field appearance=\"outline\">\n            <input\n                matInput\n                name=\"new-password\"\n                autocomplete=\"new-password\"\n                [type]=\"show_password ? 'text' : 'password'\"\n                placeholder=\"Password\"\n                formControlName=\"password\"\n            />\n            <app-icon\n                matSuffix\n                [icon]=\"{ class: 'material-icons', content: 'visibility' }\"\n                (mousedown)=\"show_password = true\"\n                (window:mouseup)=\"show_password = false\"\n                (touchstart)=\"show_password = true\"\n                (window:touchend)=\"show_password = false\"\n            ></app-icon>\n            <mat-error>A valid password is required</mat-error>\n        </mat-form-field>\n    </div>\n    <div class=\"field\" *ngIf=\"form.controls.confirm_password\">\n        <label\n            for=\"confirm-password\"\n            [class.error]=\"\n                form.controls.confirm_password.invalid && form.controls.confirm_password.touched\n            \"\n            minlength=\"1\"\n            >Confirm Pasword:</label\n        >\n        <mat-form-field appearance=\"outline\">\n            <input\n                matInput\n                [type]=\"show_confirm ? 'text' : 'password'\"\n                name=\"confirm-password\"\n                placeholder=\"Confirm Password\"\n                formControlName=\"confirm_password\"\n                minlength=\"1\"\n            />\n            <app-icon\n                matSuffix\n                [icon]=\"{ class: 'material-icons', content: 'visibility' }\"\n                (mousedown)=\"show_confirm = true\"\n                (window:mouseup)=\"show_confirm = false\"\n                (touchstart)=\"show_confirm = true\"\n                (window:touchend)=\"show_confirm = false\"\n            ></app-icon>\n            <mat-error>Passwords don't match</mat-error>\n        </mat-form-field>\n    </div>\n</form>\n","<div class=\"zone form\" *ngIf=\"form\">\n    <form [formGroup]=\"form\">\n        <div class=\"field\" *ngIf=\"form.controls.parent_zone\">\n            <label\n                for=\"parent-zone\"\n                >Parent Zone:\n            </label>\n            <item-search-field\n                name=\"parent-zone\"\n                [service]=\"zone_service\"\n                [exclude]=\"exclude\"\n                formControlName=\"parent_zone\"\n            ></item-search-field>\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.name\">\n            <label\n                for=\"zone-name\"\n                [class.error]=\"form.controls.name.invalid && form.controls.name.touched\"\n                >Name<span>*</span>:</label\n            >\n            <mat-form-field appearance=\"outline\">\n                <input\n                    matInput\n                    name=\"zone-name\"\n                    placeholder=\"Zone Name\"\n                    formControlName=\"name\"\n                    required\n                />\n                <mat-error *ngIf=\"form.controls.name.invalid\">Zone name is required</mat-error>\n            </mat-form-field>\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.tag_list\">\n            <label\n                for=\"system-email\"\n                [class.error]=\"form.controls.tag_list.invalid && form.controls.tag_list.touched\"\n                >Tags:</label\n            >\n            <mat-form-field appearance=\"outline\">\n                <mat-chip-list #chipList aria-label=\"Zone Tags\">\n                    <mat-chip\n                        *ngFor=\"let tag of tag_list\"\n                        [selectable]=\"true\"\n                        [removable]=\"true\"\n                        (removed)=\"removeTag(tag)\"\n                    >\n                        {{ tag }}\n                        <app-icon matChipRemove [icon]=\"{ class: 'backoffice-cross' }\"></app-icon>\n                    </mat-chip>\n                    <input\n                        placeholder=\"Zone tags...\"\n                        [matChipInputFor]=\"chipList\"\n                        [matChipInputSeparatorKeyCodes]=\"separators\"\n                        [matChipInputAddOnBlur]=\"true\"\n                        (matChipInputTokenEnd)=\"addTag($event)\"\n                    />\n                </mat-chip-list>\n            </mat-form-field>\n        </div>\n        <div class=\"field\" *ngIf=\"form.controls.description\">\n            <label for=\"description\">Description:</label>\n            <mat-form-field appearance=\"outline\">\n                <textarea\n                    matInput\n                    name=\"description\"\n                    placeholder=\"Description\"\n                    formControlName=\"description\"\n                ></textarea>\n            </mat-form-field>\n        </div>\n    </form>\n</div>\n","import { Component, Input, SimpleChanges } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { EngineZone } from '@placeos/ts-client';\nimport { COMMA, ENTER } from '@angular/cdk/keycodes';\nimport { MatChipInputEvent } from '@angular/material/chips';\n\nimport { EngineServiceLike } from 'src/app/shared/utilities/types.utilities';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { BaseDirective } from 'src/app/shared/globals/base.directive';\n\n@Component({\n    selector: 'zone-form',\n    templateUrl: './zone-form.component.html',\n    styleUrls: ['./zone-form.component.scss']\n})\nexport class ZoneFormComponent extends BaseDirective {\n    /** Group of form fields used for creating the system */\n    @Input() public form: FormGroup;\n    /** List of separator characters for tags */\n    public readonly separators: number[] = [ENTER, COMMA];\n    /** Function to exclude zones */\n    public readonly exclude = (zone: EngineZone) => zone.id === this.form.controls.id.value\n\n    /** Service for handling zones */\n    public get zone_service(): EngineServiceLike {\n        return this._service.Zones;\n    }\n\n    public get tag_list(): string[] {\n        return this.form.controls.tag_list.value;\n    }\n\n    constructor(private _service: ApplicationService) {\n        super();\n    }\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        if (changes.form) {\n            this.updateZone();\n        }\n    }\n\n    /**\n     * Add a tag to the list of tags for the item\n     * @param event Input event\n     */\n    public addTag(event: MatChipInputEvent): void {\n        if (!this.form || !this.form.controls.tag_list) return;\n        const input = event.input;\n        const value = event.value;\n        const tag_list = this.tag_list;\n        if ((value || '').trim()) {\n            tag_list.push(value);\n            this.form.controls.tag_list.setValue(tag_list);\n        }\n\n        // Reset the input value\n        if (input) {\n            input.value = '';\n        }\n    }\n\n    /**\n     * Remove tag from the list\n     * @param existing_tag Tag to remove\n     */\n    public removeTag(existing_tag: string): void {\n        if (!this.form || !this.form.controls.tag_list) return;\n        const tag_list = this.tag_list;\n        const index = tag_list.indexOf(existing_tag);\n\n        if (index >= 0) {\n            tag_list.splice(index, 1);\n            this.form.controls.tag_list.setValue(tag_list);\n        }\n    }\n\n    /** Update parent zone details if set */\n    private async updateZone() {\n        const parent_id = this.form.controls.parent_id ? this.form.controls.parent_id.value : '';\n        if (parent_id) {\n            const zone = await this._service.Zones.show(parent_id);\n            this.form.controls.parent_zone.setValue(zone);\n        }\n    }\n}\n","import { Component, Input } from '@angular/core';\nimport { ApplicationIcon } from '../../utilities/settings.interfaces';\nimport { BaseDirective } from '../../globals/base.directive';\n\n@Component({\n    selector: 'app-icon',\n    templateUrl: './icon.component.html',\n    styleUrls: ['./icon.component.scss']\n})\nexport class IconComponent extends BaseDirective {\n    /** Icon to display */\n    @Input() public icon: ApplicationIcon;\n}\n","<div class=\"app-icon\" *ngIf=\"icon\">\n    <i *ngIf=\"icon.type !== 'img'\" [class]=\"icon.class\">{{ icon.content }}</i>\n    <img *ngIf=\"icon.type === 'img'\" [src]=\"icon.src | safe:'resource'\" />\n</div>","import {\n    Component,\n    Input,\n    TemplateRef,\n    Output,\n    EventEmitter,\n    OnInit,\n    ViewChild,\n    ElementRef\n} from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { EngineResource, EngineDriver, EngineDriverRole } from '@placeos/ts-client';\n\nimport { ApplicationService } from '../../../services/app.service';\nimport { BaseDirective } from '../../globals/base.directive';\nimport { DialogEvent, Identity } from '../../utilities/types.utilities';\nimport { ApplicationIcon } from '../../utilities/settings.interfaces';\nimport {\n    ItemCreateUpdateModalComponent,\n    CreateEditModalData\n} from 'src/app/overlays/item-modal/item-modal.component';\nimport { Router } from '@angular/router';\n\nexport interface ApplicationTab {\n    id: string;\n    name: string;\n    icon: ApplicationIcon;\n    template: TemplateRef<any>;\n    count?: number;\n}\n\n@Component({\n    selector: 'item-display',\n    templateUrl: './item-display.template.html',\n    styleUrls: ['./item-display.styles.scss']\n})\nexport class ItemDisplayComponent<T extends Identity = any> extends BaseDirective implements OnInit {\n    /** Name of the type of item being shown */\n    @Input() public name: string;\n    /** Base route of parent component */\n    @Input() public route: string;\n    /** Resource to display details of */\n    @Input() public item: T;\n    /** Whether resouce data is being loaded */\n    @Input() public loading: boolean;\n    /** Whether item is allowed to be edited and deleted */\n    @Input() public has_change = true;\n    /** Tabs available to the item type */\n    @Input() public tabs: ApplicationTab[] = [];\n    /** Emitter for events on the item display */\n    @Output() public event = new EventEmitter();\n    /** ID of the active tab */\n    public active_tab: string;\n\n    @ViewChild('content') public content_el: ElementRef<HTMLDivElement>;\n\n    /** Whether dark mode is enabled */\n    public get dark_mode(): boolean {\n        return this._service.Users.dark_mode;\n    }\n\n    public get is_scrolled() {\n        if (this.content_el) {\n            return this.content_el.nativeElement.scrollTop > 0;\n        }\n        return false;\n    }\n\n    public get driver_type(): string {\n        const item: any = this.item;\n        if (!item.role) {\n            return '';\n        }\n        const driver: EngineDriver = item || {};\n        switch (driver.role) {\n            case EngineDriverRole.Device:\n                return 'Device';\n            case EngineDriverRole.SSH:\n                return 'SSH';\n            case EngineDriverRole.Service:\n                return 'Service';\n            case EngineDriverRole.Websocket:\n                return 'Websocket';\n        }\n        return 'Logic';\n    }\n\n    constructor(private _service: ApplicationService, private _dialog: MatDialog, private _router: Router) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.subscription(\n            'right',\n            this._service.Hotkeys.listen(['ArrowRight'], () => this.changeTab(1))\n        );\n        this.subscription(\n            'left',\n            this._service.Hotkeys.listen(['ArrowLeft'], () => this.changeTab(-1))\n        );\n    }\n\n    public changeTab(direction) {\n        if (!this.item) { return; }\n        console.log('Item:', this.item);\n        this.timeout('change_tab', () => {\n            const index = this.tabs.findIndex(tab => this._router.url.indexOf(tab.id) >= 0);\n            if (index >= 0 && this.tabs[index + direction]) {\n                this._router.navigate([`/${this.route}`, this.item.id, this.tabs[index + direction].id]);\n            }\n        }, 100);\n    }\n\n    /** Copy the ID of the active item to the clipboard */\n    public copy() {\n        if (this.item && this.item.id) {\n            document.execCommand('copy');\n            this._service.notifyInfo('ID copied to clipboard');\n        }\n    }\n\n    /**\n     * Open modal to edit the active item\n     */\n    public edit() {\n        const ref = this._dialog.open<ItemCreateUpdateModalComponent, CreateEditModalData>(\n            ItemCreateUpdateModalComponent,\n            {\n                data: {\n                    service: (this.item as any)._service,\n                    item: this.item,\n                    form: [] as any,\n                    name: this.name\n                }\n            }\n        );\n        this.subscription(\n            'confirm_ref',\n            ref.componentInstance.event.subscribe((e: DialogEvent) => {\n                if (e.reason === 'done') {\n                    this.item = e.metadata.item;\n                }\n            })\n        );\n    }\n\n    /**\n     * Delete the active item\n     */\n    public delete() {\n        this.event.emit({ type: 'delete' });\n    }\n}\n","<div class=\"container\" [class.dark-mode]=\"dark_mode\" >\n    <header *ngIf=\"item && !loading\">\n        <div class=\"heading-group\">\n            <div class=\"heading\">{{ item.display_name || item.custom_name || item.name || \"&lt;Unnamed&gt;\" }}</div>\n            <div class=\"info\">\n                <div class=\"id\" *ngIf=\"item.id\" (click)=\"copy()\">\n                    <span>{{ item.id }}</span>\n                </div>\n                <div class=\"chip driver\" *ngIf=\"driver_type\">\n                    {{ driver_type }}\n                </div>\n                <div\n                    class=\"chip connect\"\n                    *ngIf=\"item.connected !== null && item.connected !== undefined\"\n                    [class.active]=\"item.connected\"\n                >\n                    {{ item.connected ? 'Online' : 'Offline' }}\n                </div>\n                <div class=\"chip secure\" *ngIf=\"item.tls\">\n                    <div class=\"icon\"><i class=\"backoffice-lock\"></i></div>\n                    <div class=\"text\">Secure</div>\n                </div>\n            </div>\n        </div>\n        <div class=\"options\" *ngIf=\"has_change\">\n            <button mat-icon-button (touchrelease)=\"edit()\" matTooltip=\"Edit [E]\">\n                <app-icon [icon]=\"{ class: 'backoffice-edit' }\"></app-icon>\n            </button>\n            <button mat-icon-button (touchrelease)=\"delete()\" matTooltip=\"Delete [D]\">\n                <app-icon [icon]=\"{ class: 'backoffice-trash' }\"></app-icon>\n            </button>\n        </div>\n    </header>\n    <main *ngIf=\"item && !loading\">\n        <div class=\"tabs\">\n            <nav mat-tab-nav-bar [class.scroll]=\"is_scrolled\">\n                <a\n                    class=\"tab\"\n                    mat-tab-link\n                    *ngFor=\"let link of tabs\"\n                    [routerLink]=\"item.id ? ['/' + route, item.id, link.id] : ['/' + route, link.id]\"\n                    routerLinkActive\n                    #rla=\"routerLinkActive\"\n                    [active]=\"rla.isActive\"\n                >\n                    <app-icon [icon]=\"link.icon\"></app-icon>\n                    <div class=\"name\">{{ link.name }}&nbsp;</div>\n                    <div class=\"count\" *ngIf=\"link.count || link.count === 0\">\n                        ({{ link.count || '0' }})\n                    </div>\n                </a>\n            </nav>\n            <div class=\"content\" #content (scroll)=\"is_scrolled\">\n                <router-outlet></router-outlet>\n            </div>\n        </div>\n    </main>\n</div>\n<div class=\"not-mobile center\" *ngIf=\"!item && !loading\">\n    <div class=\"info-block\">\n        <div class=\"icon\">\n            <i class=\"backoffice-arrow-left\"></i>\n        </div>\n        <div class=\"text\">Select a {{ name }} from the sidebar</div>\n    </div>\n</div>\n<div class=\"mobile-only center\" *ngIf=\"!item && !loading\">\n    <div class=\"info-block\">\n        <div class=\"icon\">\n            <i class=\"backoffice-arrow-up\"></i>\n        </div>\n        <div class=\"text\">Select a {{ name }} from the search bar</div>\n    </div>\n</div>\n<div class=\"info-block center\" *ngIf=\"loading\">\n    <div class=\"icon\">\n        <a-spinner circle-ring></a-spinner>\n    </div>\n    <div class=\"text\">Loading {{ name }}...</div>\n</div>\n","\nimport { Component } from '@angular/core';\n\n@Component({\n    selector: 'forgot-pass-form',\n    templateUrl: './forgot-pass-form.template.html',\n    styleUrls: ['./forgot-pass-form.styles.scss']\n})\nexport class ForgotPassFormComponent {\n\n}\n\n","\nimport { LoginComponent } from './login.component';\nimport { ForgotPassFormComponent } from './forgot-pass-form/forgot-pass-form.component';\nimport { RegisterFormComponent } from './register-form/register-form.component';\nimport { LoginFormComponent } from './login-form/login-form.component';\n\nexport const LOGIN_COMPONENTS: any[] = [\n    LoginComponent,\n    LoginFormComponent,\n    RegisterFormComponent,\n    ForgotPassFormComponent\n];\n","\nimport { Component, Input, Output, EventEmitter, OnInit } from '@angular/core';\nimport { ApplicationService } from '../../../../services/app.service';\nimport { FormGroup } from '@angular/forms';\nimport { BaseDirective } from 'src/app/shared/globals/base.directive';\nimport { LoginSettings } from 'src/app/shared/utilities/settings.interfaces';\nimport { first } from 'rxjs/operators';\n\n@Component({\n    selector: 'login-form',\n    templateUrl: './login-form.template.html',\n    styleUrls: ['./login-form.styles.scss']\n})\nexport class LoginFormComponent extends BaseDirective implements OnInit {\n    /** Form fields for logging in */\n    @Input() public form: FormGroup;\n    /** Emitter for user forgot password action */\n    @Output() public forgot = new EventEmitter<void>();\n    /** Emitter for form submission events */\n    @Output() public submitted = new EventEmitter<void>();\n    /** Settings for the login form */\n    public settings: LoginSettings;\n    /** Whether the password should be shown */\n    public show_password: boolean;\n\n    constructor(private _service: ApplicationService) {\n        super();\n    }\n\n    public ngOnInit() {\n        this._service.initialised.pipe(first(_ => _)).subscribe(() => {\n            this.settings = this._service.setting('app.login') || {};\n        });\n    }\n}\n\n","<div\n    class=\"container\"\n    (window:mouseup)=\"show_password = false\"\n    (window:touchend)=\"show_password = false\"\n>\n    <form name=\"login\" *ngIf=\"form\" [formGroup]=\"form\">\n        <div class=\"field\" *ngIf=\"form.controls.username\">\n            <label\n                for=\"username\"\n                [class.error]=\"form.controls.username.invalid && form.controls.username.touched\"\n                >Email:</label\n            >\n            <mat-form-field appearance=\"outline\">\n                <!-- <app-icon matPrefix [icon]=\"{ class: 'backoffice-user' }\"></app-icon> -->\n                <input\n                    matInput\n                    name=\"username\"\n                    placeholder=\"Email/Username\"\n                    formControlName=\"username\"\n                    autocomplete=\"username\"\n                />\n            </mat-form-field>\n        </div>\n        <div class=\"field password\" *ngIf=\"form.controls.password\">\n            <label\n                for=\"password\"\n                [class.error]=\"form.controls.password.invalid && form.controls.password.touched\"\n                >Password:</label\n            >\n            <mat-form-field appearance=\"outline\">\n                <!-- <app-icon matPrefix [icon]=\"{ class: 'backoffice-key' }\"></app-icon> -->\n                <input\n                    matInput\n                    name=\"password\"\n                    [type]=\"show_password ? 'text' : 'password'\"\n                    placeholder=\"Password\"\n                    formControlName=\"password\"\n                    autocomplete=\"current-password\"\n                />\n                <app-icon\n                    matSuffix\n                    [icon]=\"{ class: show_password ? 'backoffice-eye' : 'backoffice-eye' }\"\n                    (mousedown)=\"show_password = true\"\n                    (touchstart)=\"show_password = true\"\n                ></app-icon>\n                <mat-error *ngIf=\"form.controls.password.invalid\"\n                    >Invalid Username or Password</mat-error\n                >\n            </mat-form-field>\n        </div>\n        <!-- <mat-checkbox formControlName=\"remember\">Remember username</mat-checkbox> -->\n        <div class=\"forgot\" *ngIf=\"settings?.forgotten_password\" (tapped)=\"forgot.emit()\">\n            Forgot?\n        </div>\n        <div class=\"options\">\n            <button mat-button type=\"submit\" (tapped)=\"submitted.emit()\">Submit</button>\n        </div>\n    </form>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { FormGroup, FormControl } from '@angular/forms';\n\nimport { ApplicationService } from '../../../services/app.service';\nimport { BaseDirective } from '../../globals/base.directive';\nimport { ApplicationImageIcon } from '../../utilities/settings.interfaces';\nimport { first } from 'rxjs/operators';\n\n@Component({\n    selector: 'login-display',\n    templateUrl: './login.template.html',\n    styleUrls: ['./login.styles.scss']\n})\nexport class LoginComponent extends BaseDirective implements OnInit {\n    public login_form: FormGroup;\n    /** Name of the component contents to show */\n    public show: 'login' | 'forgot' | 'register';\n    /** Whether a user action is being processed */\n    public loading: boolean;\n    /** Logo of the application/organisation */\n    public logo: ApplicationImageIcon;\n    /** Current work environment for the application */\n    public env: string;\n\n    constructor(private _service: ApplicationService) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.show = 'login';\n        this.loading = true;\n        const remembered_name = localStorage.getItem('BACKOFFICE.username');\n        this.login_form = new FormGroup({\n            username: new FormControl(remembered_name || ''),\n            password: new FormControl(''),\n            remember: new FormControl(!!remembered_name)\n        });\n        this._service.initialised.pipe(first(_ => _)).subscribe(() => this.init());\n    }\n\n    public init() {\n        this.env = this._service.setting('env');\n        this.logo = this._service.setting('app.logo') || {};\n        this.subscription(\n            'state',\n            this._service.Users.state.subscribe(state => {\n                this.loading = false;\n                if (state === 'invalid') {\n                    this.show = 'login';\n                } else if (state === 'loading') {\n                    this.loading = true;\n                }\n            })\n        );\n    }\n\n    public processLogin(e: any) {\n        if (e.type === 'login') {\n        } else if (e.type === 'forgot') {\n            this.show = 'forgot';\n        } else {\n            this.show = 'login';\n        }\n    }\n\n    public login() {\n        const form_values = this.login_form.value;\n        this._service.Users.login({\n            email: form_values.username,\n            password: form_values.password\n        }).then(\n            () => {\n                if (form_values.remember) {\n                    localStorage.setItem('BACKOFFICE.username', form_values.username);\n                }\n            },\n            err => {\n                console.log('Error:', err);\n                this.login_form.controls.password.setErrors({ invalid: true });\n            }\n        );\n    }\n\n    public forgottenPassword() {\n        this.show = 'forgot';\n    }\n}\n","<div class=\"container\" [class.uat]=\"env !== 'prod'\">\n    <div class=\"login-container\">\n        <header><div class=\"text\">Login</div></header>\n        <div class=\"form\" *ngIf=\"!loading; else load_state\">\n            <login-form\n                *ngIf=\"show === 'login'\"\n                [form]=\"login_form\"\n                (forgot)=\"forgottenPassword()\"\n                (submitted)=\"login()\"\n            ></login-form>\n            <register-form *ngIf=\"show === 'register'\"></register-form>\n            <forgot-pass-form *ngIf=\"show === 'forgot'\"></forgot-pass-form>\n        </div>\n    </div>\n</div>\n<ng-template #load_state>\n    <div class=\"loader\">\n        <div class=\"icon\">\n            <a-spinner circle-ring color=\"rgba(0,0,0, .54)\"></a-spinner>\n        </div>\n        <div class=\"text\">\n            Loading user data...\n        </div>\n    </div>\n</ng-template>\n","\nimport { Component } from '@angular/core';\n\n@Component({\n    selector: 'register-form',\n    templateUrl: './register-form.template.html',\n    styleUrls: ['./register-form.styles.scss']\n})\nexport class RegisterFormComponent {\n\n}\n\n","\nimport { Component, Input, Output, EventEmitter, ViewChild, ElementRef } from '@angular/core';\nimport { BaseDirective } from '../../globals/base.directive';\nimport { ApplicationService } from 'src/app/services/app.service';\n\n\n@Component({\n    selector: 'searchbar',\n    templateUrl: './searchbar.template.html',\n    styleUrls: ['./searchbar.styles.scss']\n})\nexport class SearchbarComponent extends BaseDirective {\n    @Input() public filter: string;\n    @Input() public limit: string;\n    @Input() public dictation = true;\n    @Input() public clearable = true;\n    @Input() public placeholder = 'Search...';\n    @Output() public filterChange = new EventEmitter();\n    @Output() public focus = new EventEmitter();\n    @Output() public blur = new EventEmitter();\n\n    public model: any = {};\n\n    @ViewChild('input', { static: true }) private input: ElementRef;\n\n    /** Whether dark mode is enabled */\n    public get dark_mode(): boolean {\n        return this._service.Users.dark_mode;\n    }\n\n    constructor(private _service: ApplicationService) {\n        super();\n        const win = window as any;\n        this.model.speech = !!(win.SpeechRecognition || win.webkitSpeechRecognition);\n    }\n\n    /**\n     * Activate dictation search\n     */\n    public startDictation() {\n        if (!this.input) { return; }\n        if (this.model.recognition) {\n            this.model.recognition.stop();\n            this.model.dictate = false;\n            this.model.recognition = null;\n            return;\n        }\n        const win = self as any;\n        const speech: any = win.SpeechRecognition || win.webkitSpeechRecognition;\n        if (speech) {\n            this.model.recognition = new speech();\n\n            this.model.recognition.continuous = false;\n            this.model.recognition.interimResults = false;\n\n            this.model.recognition.lang = 'en-US';\n            this.model.recognition.start();\n            this.model.dictate = true;\n\n            this.model.recognition.onresult = (e: any) => {\n                    // Update search field with dictation result\n                this.input.nativeElement.value = e.results[0][0].transcript;\n                this.filter = e.results[0][0].transcript;\n                this.model.recognition.stop();\n                this.post();\n                this.model.dictate = false;\n            };\n\n            this.model.recognition.onerror = (e: any) => {\n                this.model.recognition.stop();\n                this.model.dictate = false;\n            };\n        }\n    }\n\n    public focusInput() {\n        this.model.focus = true;\n        this.timeout('focus', () => {\n            if (this.input && this.input.nativeElement) {\n                this.input.nativeElement.focus();\n                this.focus.emit();\n            }\n        }, 50);\n    }\n\n    public clear() {\n        this.filter = '';\n        this.post();\n    }\n\n    public post() {\n        this.checkLimitations();\n        this.timeout('post', () => {\n            this.filterChange.emit(this.filter);\n        });\n    }\n\n    public checkLimitations() {\n        if (!this.limit) { return; }\n        for (let i = 0; i < (this.filter || '').length; i++) {\n            if (this.limit.indexOf(this.filter[i]) >= 0) {\n                this.filter = this.filter.substr(0, i) + this.filter.substr(i + 1);\n                i--;\n            }\n        }\n    }\n}\n","<div class=\"searchbar\" [class.dark-mode]=\"dark_mode\" widget>\n    <div class=\"field\" [class.focus]=\"model.focus || filter || model.dictate\">\n        <button mat-icon-button (touchrelease)=\"focusInput()\">\n            <app-icon [icon]=\"{ class: 'backoffice-magnifying-glass' }\"></app-icon>\n        </button>\n        <div class=\"input\">\n            <input #input [(ngModel)]=\"filter\" (ngModelChange)=\"post()\"\n                (focus)=\"model.focus = true; focus.emit($event)\"\n                (blur)=\"model.focus = false; blur.emit($event)\"\n                [placeholder]=\"placeholder\">\n        </div>\n        <button mat-icon-button *ngIf=\"model.speech && dictation\" [class.active]=\"model.dictate\" (tapped)=\"startDictation()\">\n            <app-icon [icon]=\"{ class: 'backoffice-mic' }\"></app-icon>\n        </button>\n        <button mat-icon-button class=\"close\" *ngIf=\"filter && clearable\" (tapped)=\"clear()\">\n            <app-icon [icon]=\"{ class: 'backoffice-cross' }\"></app-icon>\n        </button>\n        <ng-content></ng-content>\n    </div>\n</div>\n","import {\n    Component,\n    Input,\n    Output,\n    EventEmitter,\n    OnChanges,\n    OnInit,\n    ViewChild,\n    ElementRef,\n    ViewChildren,\n    QueryList,\n    SimpleChanges\n} from '@angular/core';\nimport { CdkVirtualScrollViewport } from '@angular/cdk/scrolling';\nimport { EngineModule, EngineDriverRole } from '@placeos/ts-client';\nimport { BehaviorSubject } from 'rxjs';\nimport { first } from 'rxjs/operators';\n\nimport { ApplicationService } from '../../../services/app.service';\nimport { BaseDirective } from '../../globals/base.directive';\nimport { EngineServiceLike, HashMap, Identity } from '../../utilities/types.utilities';\n\nimport * as dayjs from 'dayjs';\nimport { unique } from '../../utilities/general.utilities';\nimport { Router } from '@angular/router';\n\n@Component({\n    selector: 'sidebar',\n    templateUrl: './sidebar.template.html',\n    styleUrls: ['./sidebar.styles.scss']\n})\nexport class SidebarComponent extends BaseDirective implements OnChanges, OnInit {\n    /** Module name to display at the top of the sidebar */\n    @Input() public heading = '';\n    /** List of items to render on the list */\n    @Input() public list: any[] = [];\n    /** Name of the active module */\n    @Input() public module: EngineServiceLike;\n    /** Whether the list is being loaded */\n    @Input() public loading: boolean;\n    /** Additional query params to add to item load requests */\n    @Input('queryParams') public query_params: HashMap = {};\n    /** Whether sidebar is closed */\n    @Input() public close = false;\n    /** Search string */\n    @Input() public search = '';\n    /** Emitter for changes to the search string */\n    @Output() public searchChange = new EventEmitter();\n    /** Emitter for user actions on the component */\n    @Output() public event = new EventEmitter();\n    /** Async list of items to render on the sidebar list */\n    public items: BehaviorSubject<Identity[]> = new BehaviorSubject([]);\n    /** Whether the application has initialised */\n    public intialised: boolean;\n    /** Last time the list was updated */\n    public last_check: number;\n    /** Last total number of items when the list was fetched */\n    public last_total: number;\n\n    /** List of elements for each associated item */\n    @ViewChildren('list_item') private item_list: QueryList<ElementRef>;\n    /** Virtual scrolling viewport */\n    @ViewChild(CdkVirtualScrollViewport)\n    private viewport: CdkVirtualScrollViewport;\n\n    /** Whether dark mode is enabled */\n    public get dark_mode(): boolean {\n        return this._service.Users.dark_mode;\n    }\n\n    /** Whether list is has been scrolled from the top */\n    public get is_scrolled(): boolean {\n        if (this.viewport) {\n            const element = this.viewport.elementRef.nativeElement;\n            if (element) {\n                return element.scrollTop > 0;\n            }\n        }\n        return false;\n    }\n\n    /** Whether new items for the active module can be created */\n    public get new(): boolean {\n        if (this.module) {\n            return this._service.setting(`app.${this.module._api_route}.can_create`);\n        }\n        return false;\n    }\n\n    public get total(): number {\n        return this.search ? this.module.last_total : this.module.total;\n    }\n\n    public get grand_total(): number {\n        return this.module.total;\n    }\n\n    /** Heading value lower cased */\n    public get lowercase_heading() {\n        return (this.heading || '').toLowerCase();\n    }\n\n    /** Path of the active module */\n    public get route() {\n        const route = this.module._api_route;\n        return `/${route}`;\n    }\n\n    /** Maxiumum allowed items for the active module */\n    public get licenses(): number {\n        if (this.module) {\n            return this._service.setting(`app.${this.module._api_route}.licenses`);\n        }\n        return 0;\n    }\n\n    /** Map of item names to their IDs */\n    public get item_name(): HashMap<string> {\n        const map = {};\n        const list = this.items.getValue() || [];\n        for (let item of list) {\n            if (item instanceof EngineModule) {\n                const detail =\n                    item.role === EngineDriverRole.Service\n                        ? item.uri\n                        : item.role === EngineDriverRole.Logic\n                            ? item.control_system_id\n                            : item.ip;\n                map[item.id] = `${item.custom_name || item.name || '<Unnamed>'} <span class=\"small\">${detail}<span>`;\n            } else {\n                map[item.id] = item.custom_name || item.name || '<Unnamed>';\n            }\n        }\n        return map;\n    }\n\n    constructor(private _service: ApplicationService, private _router: Router) {\n        super();\n    }\n\n    public ngOnInit() {\n        this._service.initialised.pipe(first(_ => _)).subscribe(() => {\n            if (!this._service.get('BACKOFFICE.active_item')) {\n                this._service.set('BACKOFFICE.active_item', null);\n            }\n            if (!this._service.get('BACKOFFICE.removed')) {\n                this._service.set('BACKOFFICE.removed', '');\n            }\n            this.subscription(\n                'active_item',\n                this._service.listen('BACKOFFICE.active_item', item => this.replaceActiveItem(item))\n            );\n            this.subscription(\n                'remove_item',\n                this._service.listen('BACKOFFICE.removed', id => this.removeItem(id))\n            );\n            this.subscription(\n                'up',\n                this._service.Hotkeys.listen(['Alt', 'ArrowUp'], () => this.changeSelected(-1))\n            );\n            this.subscription(\n                'down',\n                this._service.Hotkeys.listen(['Alt', 'ArrowDown'], () => this.changeSelected(1))\n            );\n            this.items.next(this.list || []);\n            this.atBottom();\n        });\n    }\n\n    public ngOnChanges(changes: SimpleChanges) {\n        if (this._service.is_initialised && (changes.list || changes.close)) {\n            this.last_check = dayjs().valueOf();\n            this.items.next(this.list || []);\n            this.atBottom();\n        }\n        if (changes.module && changes.module.previousValue !== changes.module.currentValue) {\n            this.searching();\n        }\n        if (changes.query_params && this.query_params) {\n            this.searching();\n        }\n    }\n\n    /** Whether to update the list of items */\n    public get is_stale() {\n        const now = dayjs();\n        const last_check = dayjs(this.last_check);\n        return (\n            this.last_total !== this.items.getValue().length ||\n            last_check.add(1, 'm').isBefore(now, 's')\n        );\n    }\n\n    /**\n     * Check if user has scrolled to the bottom of the sidebar and emit an event to get next page of items\n     */\n    public atBottom() {\n        if (this.loading || !this.is_stale) {\n            return;\n        }\n        if (!this.viewport) {\n            return this.timeout('atBottom', () => this.atBottom());\n        }\n        const end = this.viewport.getRenderedRange().end;\n        const total = this.viewport.getDataLength();\n        if (end === total) {\n            this.last_total = total;\n            this.last_check = dayjs().valueOf();\n            if (this.last_total !== this.module.last_total) {\n                this.searching(this.list.length);\n            }\n        }\n    }\n\n    /**\n     * List item tracking function to reduce shadow dom re-rendering on changes\n     * @param item Item to check\n     * @param index Index of the item\n     */\n    public trackByFn(item: HashMap, index: number) {\n        return item.id || index;\n    }\n\n    /** Emit events to the parent element */\n    public post(type: string) {\n        this.event.emit({ type });\n    }\n\n    /**\n     * Update the list displayed on the sidebar\n     * @param offset Page offset for the list\n     */\n    public searching(offset: number = 0) {\n        this.loading = true;\n        if (this.module) {\n            this.module.query({ q: this.search, offset, ...(this.query_params || {}) }).then(\n                list => {\n                    this.list = offset ? this.list.concat(list) : list;\n                    this.list = unique(this.list, 'id');\n                    this.items.next(this.list);\n                    this.loading = false;\n                },\n                err => {\n                    this._service.notifyError(`Error updating ${this.module._name} list. ${err}`);\n                    this.loading = false;\n                }\n            );\n        } else {\n            this.loading = false;\n        }\n    }\n\n    /**\n     * Update the selected item\n     * @param offset Offset with which to select the new item\n     */\n    public changeSelected(offset: number) {\n        const list = this.item_list.toArray();\n        const item_list = this.items.getValue();\n        if (list && list.length > 0) {\n            let index = item_list.findIndex(item => this._router.url.indexOf(`${item.id}`) >= 0);\n            index += offset;\n            if (index >= 0 && index < list.length) {\n                list[index].nativeElement.scrollIntoView(false);\n                this._service.navigate([this.module._api_route, item_list[index].id]);\n            }\n        }\n    }\n\n    /**\n     * Replaces the active item with the latest local version\n     * @param active_item New active item\n     */\n    private replaceActiveItem(active_item: Identity) {\n        if (!active_item) {\n            return;\n        }\n        console.log('Replace:', active_item);\n        const list = this.items.getValue() || [];\n        const index = list.findIndex(item => item.id === active_item.id);\n        if (index >= 0) {\n            list.splice(index, 1, active_item);\n        } else if (list.length > 0 && list[0].constructor === active_item.constructor) {\n            list.push(active_item);\n        } else {\n            list.push(active_item);\n        }\n        this.items.next([...list]);\n        console.log('Replaced');\n    }\n\n    /**\n     * Remove item from the list\n     * @param id\n     */\n    private removeItem(id: string): void {\n        if (!id) {\n            return;\n        }\n        const list = this.items.getValue() || [];\n        const index = list.findIndex(item => item.id === id);\n        if (index >= 0) {\n            list.splice(index, 1);\n            this.items.next([...list]);\n        }\n    }\n}\n","<div class=\"container\" [class.dark-mode]=\"dark_mode\">\n    <header>\n        <div class=\"heading\">{{ heading }}</div>\n        <div class=\"count\">\n            <div>\n                <div class=\"inline\" [matTooltip]=\"heading + ' count / License count'\">\n                    {{ total || 0 }} of {{ (search ? grand_total : licenses) || '' }}\n                </div>\n            </div>\n        </div>\n        <div class=\"add\" *ngIf=\"new && (total < licenses || !licenses)\" (click)=\"post('new')\" [matTooltip]=\"'Add ' + heading + ' [N]'\">\n            <i class=\"backoffice-plus\"></i>\n        </div>\n        <div\n            class=\"error\"\n            *ngIf=\"new && (total >= licenses && licenses)\"\n            matTooltip=\"\n            Exceeded quota! No new item can be created\n            until the total is below you license count.\"\n        >\n            <i class=\"backoffice-warning\"></i>\n        </div>\n        <button mat-icon-button class=\"mobile-only\" (touchrelease)=\"event.emit({ type: 'toggle' })\">\n            <app-icon [icon]=\"{ class: 'backoffice-' + (close ? 'cross' : 'list') }\"></app-icon>\n        </button>\n    </header>\n    <section class=\"search\">\n        <div class=\"input\">\n            <input\n                [(ngModel)]=\"search\"\n                (ngModelChange)=\"searching()\"\n                [placeholder]=\"'Filter ' + lowercase_heading\"\n            />\n        </div>\n    </section>\n    <section class=\"content\" [class.scroll]=\"is_scrolled\">\n        <ng-content></ng-content>\n    </section>\n    <section class=\"list\">\n        <ng-container *ngIf=\"list\">\n            <cdk-virtual-scroll-viewport itemSize=\"48\" (scroll)=\"is_scrolled\" (scrolledIndexChange)=\"atBottom()\">\n                <ng-container *cdkVirtualFor=\"let item of items | async; trackBy:trackByFn\">\n                    <a [routerLink]=\"[route, item.id]\" routerLinkActive=\"active\">\n                        <div\n                            #list_item\n                            class=\"item\"\n                            [title]=\"\"\n                        >\n                            <div class=\"text\" [innerHTML]=\"item_name[item.id] | sanitize\"></div>\n                            <app-icon\n                                [icon]=\"{ type: 'icon', class: 'backoffice-check' }\"\n                            ></app-icon>\n                        </div>\n                    </a>\n                </ng-container>\n            </cdk-virtual-scroll-viewport>\n        </ng-container>\n        <div class=\"info-block center\" *ngIf=\"!loading && (!list || !list.length)\">\n            <div class=\"icon\">\n                <i class=\"backoffice-cross\"></i>\n            </div>\n            <div class=\"text\">{{ !search ? 'No ' + lowercase_heading : 'No matches found' }}</div>\n            <div class=\"btn\" *ngIf=\"new\">\n                <button mat-button (click)=\"post('new')\">Add new {{ lowercase_heading }}</button>\n            </div>\n        </div>\n    </section>\n    <div class=\"loading\" *ngIf=\"loading\">\n        <a-spinner double-circle-ring color=\"#F44336\"></a-spinner>\n    </div>\n</div>\n","import {\n    Component,\n    OnInit,\n    Input,\n    OnDestroy,\n    ViewChild,\n    ElementRef,\n    SimpleChanges,\n    OnChanges\n} from '@angular/core';\nimport { Terminal } from 'xterm';\n\nimport { BaseDirective } from '../../globals/base.directive';\n\n@Component({\n    selector: 'a-terminal',\n    templateUrl: './terminal.component.html',\n    styleUrls: ['./terminal.component.scss']\n})\nexport class TerminalComponent extends BaseDirective implements OnInit, OnChanges, OnDestroy {\n    /** Contents to display on the terminal */\n    @Input() public content: string;\n    /** Resizes terminal display on change */\n    @Input() public resize: boolean;\n    /** Local instance of an xterm terminal */\n    public terminal: Terminal;\n\n    @ViewChild('terminal', { static: true }) public terminal_element: ElementRef<HTMLDivElement>;\n    @ViewChild('container', { static: true }) public container_el: ElementRef<HTMLDivElement>;\n\n    public ngOnInit(): void {\n        if (this.terminal) {\n            this.ngOnDestroy();\n        }\n        this.terminal = new Terminal({ theme: { background: `#263238` } });\n        this.terminal.open(this.terminal_element.nativeElement);\n        this.timeout('init', () => {\n            this.resizeTerminal();\n            this.updateTerminalContents(this.content || '');\n        });\n    }\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        if (changes.content) {\n            this.updateTerminalContents(this.content || '');\n        }\n        if (changes.resize) {\n            this.timeout('resize', () => this.resizeTerminal());\n        }\n    }\n\n    public ngOnDestroy(): void {\n        this.terminal.clear();\n        this.terminal.dispose();\n    }\n\n    /**\n     * Resize the terminal display to fill the container element\n     */\n    public resizeTerminal(): void {\n        if (!this.terminal || !this.container_el) {\n            return;\n        }\n        const font_size = this.terminal.getOption('fontSize');\n        const line_height = this.terminal.getOption('lineHeight');\n        const box = this.container_el.nativeElement.getBoundingClientRect();\n        const width = Math.floor(box.width / (font_size * 0.6));\n        const height = Math.floor(box.height / (line_height * font_size * 1.28));\n        this.terminal.resize(width - 2, height);\n    }\n\n    /**\n     * Update the rendered contents of the terminal view\n     * @param new_content New contents to render\n     */\n    private updateTerminalContents(new_content: string) {\n        if (!this.terminal) {\n            return;\n        }\n        this.terminal.clear();\n        const lines: string[] = new_content.split('\\n');\n        for (const line of lines) {\n            this.terminal.writeln(line);\n        }\n        this.timeout('scroll', () => this.terminal.scrollToBottom(), 50);\n    }\n}\n","<div class=\"container\" #container (window:resize)=\"resizeTerminal()\">\n    <div class=\"terminal\" #terminal></div>\n</div>","import { trigger, transition, style, animate, state } from '@angular/animations';\n\nexport const ANIMATION_SHOW_ENTER_LEAVE = trigger('show', [\n    transition(':enter', [\n        style({ opacity: 0, height: 0 }),\n        animate(300, style({ opacity: 1, height: '*' }))\n    ]),\n    transition(':leave', [\n        style({ opacity: 1, height: '*' }),\n        animate(300, style({ opacity: 0, height: 0 }))\n    ])\n]);\n\nexport const ANIMATION_SHOW_CONTRACT_EXPAND = trigger('show', [\n    state('show', style({ opacity: 1, height: '*' })),\n    state('hide', style({ opacity: 0, height: 0 })),\n    transition('show <=> hide', animate('200ms ease-in'))\n]);\n\nexport const ANIMATION_SHOW_CONTRACT_EXPAND_BIDIR = trigger('show', [\n    state('show', style({ opacity: 1, height: '*', width: '*' })),\n    state('hide', style({ opacity: 0, height: 0, width: 0 })),\n    transition('show <=> hide', animate('200ms ease-in'))\n]);\n","import { Subscription, BehaviorSubject } from 'rxjs';\n\nexport class BaseClass {\n    /** Store for named timers */\n    protected _timers: { [name: string]: number } = {};\n    /** Store for named intervals */\n    protected _intervals: { [name: string]: number } = {};\n    /** Store for named subscription unsub callbacks */\n    protected _subscriptions: { [name: string]: Subscription | (() => void) } = {};\n    /** Subject which stores the initialised state of the object */\n    protected readonly _initialised = new BehaviorSubject<boolean>(false);\n\n    /** Observable of the initialised state of the object */\n    public get initialised(): BehaviorSubject<boolean> {\n        return this._initialised;\n    }\n    /** Whether the object has been initialised */\n    public get is_initialised(): boolean {\n        return this._initialised.getValue();\n    }\n\n    /**\n     * Creates a named timer\n     * @param name Name of the timer\n     * @param fn Callback function for the timer\n     * @param delay Callback delay\n     */\n    protected timeout(name: string, fn: () => void, delay: number = 300) {\n        if (name && fn && fn instanceof Function) {\n            this.clearTimeout(name);\n            this._timers[name] = setTimeout(() => {\n                fn();\n                this._timers[name] = null;\n            }, delay) as any;\n        } else {\n            throw new Error(\n                name\n                    ? 'Cannot create named timeout without a name'\n                    : 'Cannot create a timeout without a callback'\n            );\n        }\n    }\n\n    /**\n     * Clears the named timer\n     * @param name Timer name\n     */\n    protected clearTimeout(name: string) {\n        if (this._timers[name]) {\n            clearTimeout(this._timers[name]);\n            this._timers[name] = null;\n        }\n    }\n\n    /**\n     * Creates a named interval\n     * @param name Name of the interval\n     * @param fn Callback function for the interval\n     * @param delay Callback delay\n     */\n    protected interval(name: string, fn: () => void, delay: number = 300) {\n        if (name && fn && fn instanceof Function) {\n            this.clearInterval(name);\n            this._intervals[name] = setInterval(() => fn(), delay) as any;\n        } else {\n            throw new Error(\n                name\n                    ? 'Cannot create named interval without a name'\n                    : 'Cannot create a interval without a callback'\n            );\n        }\n    }\n\n    /**\n     * Clears the named interval\n     * @param name Timer name\n     */\n    protected clearInterval(name: string) {\n        if (this._intervals[name]) {\n            clearInterval(this._intervals[name]);\n            this._intervals[name] = null;\n        }\n    }\n\n    /**\n     * Store named subscription\n     * @param name Name of the subscription\n     * @param unsub Unsubscribe callback or Subscription object\n     */\n    protected subscription(name: string, unsub: Subscription | (() => void)) {\n        this.unsub(name);\n        this._subscriptions[name] = unsub;\n    }\n\n    /**\n     * Call unsubscribe callback with the given name\n     * @param name Name of the subscription to clear\n     */\n    protected unsub(name: string) {\n        if (this._subscriptions && this._subscriptions[name]) {\n            this._subscriptions[name] instanceof Subscription\n                ? (this._subscriptions[name] as Subscription).unsubscribe()\n                : (this._subscriptions[name] as any)();\n            this._subscriptions[name] = null;\n        }\n    }\n}\n","\nimport { OnDestroy, Directive } from '@angular/core';\nimport { BaseClass } from './base.class';\n\n@Directive({\n    selector: 'a-very-basic-component-base-that-should-not-be-used'\n})\nexport class BaseDirective extends BaseClass implements OnDestroy {\n\n    public ngOnDestroy(): void {\n        // Clear local timers\n        for (const key in this._timers) {\n            if (this._timers.hasOwnProperty(key)) {\n                this.clearTimeout(key);\n            }\n        }\n        // Clear local intervals\n        for (const key in this._intervals) {\n            if (this._intervals.hasOwnProperty(key)) {\n                this.clearInterval(key);\n            }\n        }\n        // Clear local subscriptions\n        for (const key in this._subscriptions) {\n            if (this._subscriptions.hasOwnProperty(key)) {\n                this.unsub(key);\n            }\n        }\n    }\n}\n\n","import { Injectable } from '@angular/core';\nimport {\n    CanActivate,\n    CanLoad,\n    Route,\n    UrlSegment,\n    ActivatedRouteSnapshot,\n    RouterStateSnapshot,\n    UrlTree,\n    Router\n} from '@angular/router';\nimport { Observable } from 'rxjs';\n\nimport { ApplicationService } from 'src/app/services/app.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class AuthorisedAdminGuard implements CanActivate, CanLoad {\n\n    constructor(private _service: ApplicationService, private _router: Router) {}\n\n    public canActivate(\n        next: ActivatedRouteSnapshot,\n        state: RouterStateSnapshot\n    ): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {\n        const user = this._service.get('user');\n        const can_activate = user && user.sys_admin;\n        if (!can_activate) { this._router.navigate(['/systems']); }\n        return can_activate;\n    }\n\n    public canLoad(\n        route: Route,\n        segments: UrlSegment[]\n    ): Observable<boolean> | Promise<boolean> | boolean {\n        const user = this._service.get('user');\n        const can_load = user && user.sys_admin;\n        if (!can_load) { this._router.navigate(['/systems']); }\n        return can_load;\n    }\n}\n","/*\n * @Author: alex.sorafumo\n * @Date:   2017-04-03 15:50:46\n * @Last Modified by: mikey.zhaopeng\n * @Last Modified time: 2018-09-02 20:25:40\n */\n\nimport * as faker from 'faker';\n\nimport { MockUsersBackend } from './backend/users.mock';\nimport { MockZonesBackend } from './backend/zones.mock';\nimport { MockDriversBackend } from './backend/driver.mock';\nimport { MockTriggersBackend } from './backend/triggers.mock';\nimport { MockModulesBackend } from './backend/modules.mock';\nimport { MockSystemsBackend } from './backend/systems.mock';\nimport { MockDomainsBackend } from './backend/domains.mock';\nimport { MockApplicationsBackend } from './backend/applications.mock';\nimport { MockAuthSourcesBackend } from './backend/auth-sources.mock';\nimport { MockSystemTriggersBackend } from './backend/systems-triggers.mock';\nimport { MockNodesBackend } from './backend/nodes.mock';\nimport { MockStatsBackend } from './backend/stats.mock';\nimport { MockTestsBackend } from './backend/tests.mock';\nimport { MockDiscoveryBackend } from './backend/discovery.mock';\nimport { MockHttpRequestHandlerOptions } from '@placeos/ts-client';\n\ndeclare global {\n    interface Window {\n        backend: MockBackend;\n    }\n}\n\nexport class MockBackend {\n    public model: any = {\n        api_route: 'api/engine/v2',\n        domain: 'acaprojects.com',\n        DESK_OFFSET: 0,\n        scale: 1,\n        city: 'Sydney',\n        predefined_users: [\n            'Alex Sorafumo',\n            'Ben Hoad',\n            'Jonathan McFarlane',\n            'Candy Russo',\n            'Cameron Reeves',\n            'Kim Burgess',\n            'William Le',\n            'Steph Georgiadis',\n            'Shane Boseley',\n            'Matt Mathers'\n        ],\n        backend: {}\n    };\n\n    constructor() {\n        if (!window.control) {\n            window.control = {};\n        }\n        if (!window.control.handlers) {\n            window.control.handlers = [];\n        }\n        this.log('MOCK', 'Initialising Requests');\n        this.model.log = (\n            type: string,\n            msg: string,\n            args?: any,\n            out: string = 'debug',\n            color?: string\n        ) => {\n            this.log(type, msg, args, out, color);\n        };\n        faker.seed(999);\n        // Load engine domain\n        this.model.backend.domains = new MockDomainsBackend(this.model);\n        this.model.backend.domains.listen(dstate => {\n            if (!dstate) {\n                return;\n            }\n            // Load edge nodes\n            this.model.backend.nodes = new MockNodesBackend(this.model);\n            this.model.backend.nodes.listen(nstate => {\n                if (!nstate) {\n                    return;\n                }\n                this.update(this.model.backend.nodes.data);\n                // Load applications\n                this.model.backend.applications = new MockApplicationsBackend(this.model);\n                this.model.backend.applications.listen(astate => {\n                    if (!astate) {\n                        return;\n                    }\n                    this.update(this.model.backend.applications.data);\n                });\n                // Load auth sources\n                this.model.backend.authsources = new MockAuthSourcesBackend(this.model);\n                this.model.backend.authsources.listen(asstate => {\n                    if (!asstate) {\n                        return;\n                    }\n                    this.update(this.model.backend.authsources.data);\n                });\n                // Load users\n                this.model.backend.users = new MockUsersBackend(this.model);\n                this.model.backend.users.listen(ustate => {\n                    if (!ustate) {\n                        return;\n                    }\n                    this.update(this.model.backend.users.data);\n                    this.model.backend.zones = new MockZonesBackend(this.model);\n                    this.model.backend.zones.listen(zstate => {\n                        if (!zstate) {\n                            return;\n                        }\n                        this.update(this.model.backend.zones.data);\n\n                        this.model.backend.systems = new MockSystemsBackend(this.model);\n                        this.model.backend.systems.listen(sysstate => {\n                            if (!sysstate) {\n                                return;\n                            }\n                            this.update(this.model.backend.systems.data);\n\n                            this.model.backend.triggers = new MockTriggersBackend(this.model);\n                            this.model.backend.triggers.listen(tstate => {\n                                if (!tstate) {\n                                    return;\n                                }\n                                this.update(this.model.backend.triggers.data);\n                                // Load system triggers\n                                this.model.backend.system_triggers = new MockSystemTriggersBackend(\n                                    this.model\n                                );\n                                this.model.backend.system_triggers.listen(astate => {\n                                    if (!astate) {\n                                        return;\n                                    }\n                                    this.update(this.model.backend.system_triggers.data);\n                                });\n                            });\n\n                            this.model.backend.drivers = new MockDriversBackend(this.model);\n                            this.model.backend.drivers.listen(depstate => {\n                                if (!depstate) {\n                                    return;\n                                }\n                                this.update(this.model.backend.drivers.data);\n                                this.model.backend.modules = new MockModulesBackend(this.model);\n                                this.model.backend.modules.listen(mstate => {\n                                    if (!mstate) {\n                                        return;\n                                    }\n                                    this.update(this.model.backend.modules.data);\n                                    this.model.loaded = true;\n                                    this.loadSearch();\n                                });\n                                this.model.backend.stats = new MockStatsBackend(this.model);\n                                this.model.backend.stats.listen(stat_state => {\n                                    if (!stat_state) {\n                                        return;\n                                    }\n                                    this.update(this.model.backend.stats.data);\n                                    this.model.loaded = true;\n                                });\n                                this.model.backend.tests = new MockTestsBackend(this.model);\n                                this.model.backend.tests.listen(tests_state => {\n                                    if (!tests_state) {\n                                        return;\n                                    }\n                                    this.update(this.model.backend.tests.data);\n                                    this.model.loaded = true;\n                                });\n                                this.model.backend.discovery = new MockDiscoveryBackend(this.model);\n                                this.model.backend.discovery.listen(discovery_state => {\n                                    if (!discovery_state) {\n                                        return;\n                                    }\n                                    this.update(this.model.backend.discovery.data);\n                                    this.model.loaded = true;\n                                });\n                            });\n                        });\n                    });\n                });\n            });\n        });\n    }\n\n    public get is_loaded() {\n        return this.model.loaded;\n    }\n\n    public log(type: string, msg: string, args?: any, out: string = 'debug', color?: string) {\n        const clr = color ? color : '#009688';\n        const COLOURS = ['color: #6A1B9A', `color:${clr}`, 'color:rgba(#000, 0.87)'];\n        if (args) {\n            if (this.hasColours()) {\n                console[out](`%c[BACKEND]%c[${type}] %c${msg}`, ...COLOURS, args);\n            } else {\n                console[out](`[BACKEND][${type}] ${msg}`, args);\n            }\n        } else {\n            if (this.hasColours()) {\n                console[out](`%c[BACKEND]%c[${type}] %c${msg}`, ...COLOURS);\n            } else {\n                console[out](`[BACKEND][${type}] ${msg}`);\n            }\n        }\n    }\n\n    private hasColours() {\n        const doc = document as any;\n        return !(doc.documentMode || /Edge/.test(navigator.userAgent));\n    }\n\n    private loadSearch() {\n        const handler: MockHttpRequestHandlerOptions = {\n            path: `/${this.model.api_route}/search`,\n            metadata: {},\n            method: 'GET',\n            callback: event => {\n                if (event.query_params.q) {\n                    let limit = 20;\n                    if (event.query_params.offset) {\n                        limit += +event.query_params.offset;\n                    }\n                    event.query_params.limit = limit as any;\n                    const fragment = JSON.parse(JSON.stringify(event.query_params));\n                    fragment.offset = 0;\n                    let total = 0;\n                    let data = [];\n                    if (this.model.backend.systems) {\n                        const list = this.model.backend.systems.search(\n                            this.model.systems,\n                            fragment\n                        );\n                        list.results.forEach(element => (element.type = 'system'));\n                        total += list.total;\n                        data = data.concat(list.results);\n                    }\n                    if (this.model.backend.triggers) {\n                        const list = this.model.backend.triggers.search(\n                            this.model.triggers,\n                            fragment\n                        );\n                        list.results.forEach(element => (element.type = 'trigger'));\n                        total += list.total;\n                        data = data.concat(list.results);\n                    }\n                    if (this.model.backend.modules) {\n                        const list = this.model.backend.modules.search(\n                            this.model.modules,\n                            fragment\n                        );\n                        list.results.forEach(element => (element.type = 'device'));\n                        total += list.total;\n                        data = data.concat(list.results);\n                    }\n                    if (this.model.backend.zones) {\n                        const list = this.model.backend.zones.search(this.model.zones, fragment);\n                        list.results.forEach(element => (element.type = 'zone'));\n                        total += list.total;\n                        data = data.concat(list.results);\n                    }\n                    if (this.model.backend.users) {\n                        const list = this.model.backend.users.search(this.model.users, fragment);\n                        list.results.forEach(element => (element.type = 'user'));\n                        total += list.total;\n                        data = data.concat(list.results);\n                    }\n                    if (event.query_params && event.query_params.offset) {\n                        const start = Math.min(data.length, +event.query_params.offset);\n                        const end = Math.min(data.length, +event.query_params.offset + 20);\n                        return { results: data.slice(start, end), total };\n                    } else {\n                        return { results: data.slice(0, 20), total };\n                    }\n                }\n            }\n        };\n        window.control.handlers.push(handler);\n    }\n\n    private update(model: any) {\n        for (const k in model) {\n            if (model.hasOwnProperty(k)) {\n                this.model[k] = model[k];\n            }\n        }\n    }\n}\n\nwindow.backend = new MockBackend();\n","import { BaseMockBackend } from './base.mock';\nimport { padZero } from '../../utilities/general.utilities';\n\nimport * as faker from 'faker';\nimport * as dayjs from 'dayjs';\n\nexport class MockApplicationsBackend extends BaseMockBackend {\n    constructor(protected model) {\n        super(model);\n    }\n\n    protected load() {\n        this.model.log('APPLICATIONS', 'Loading mock data for applications...');\n        this.loadList();\n    }\n\n    private loadList() {\n        const item_list = [];\n        const count = Math.ceil(Math.floor(Math.random() * 24 + 5) * this.model.scale);\n        const domains = this.model.domains || [];\n        for (let i = 0; i < count; i++) {\n            const domain =\n                domains.length > 0\n                    ? domains[Math.floor(Math.random() * domains.length)]\n                    : { id: 'sgrp-test', name: 'Domain Test' };\n            const id = `${padZero(i, 4)}`;\n            item_list.push({\n                id,\n                name: faker.name.jobDescriptor(),\n                owner_id: domain.id,\n                redirect_uri: `http://${\n                    domain.dom\n                }/${faker.name.jobTitle().toLowerCase()}/oath-resp.html`,\n                scopes: '',\n                secret: '173b2c8f96d4a64608d63e0ac2e7e0e9806c4dd0f7ec0ef8bd65526eeee5f3c9',\n                skip_authorization: Math.floor(Math.random() * 1263811) % 2 === 0,\n                uid: id,\n                created_at: dayjs()\n                    .add(Math.floor(Math.random() * 1200 + 5), 'm')\n                    .unix()\n            });\n        }\n        this.model.applications = item_list;\n        this.setupBasicHandlers('api/engine/v2/applications', this.model.applications, 'app');\n        this.state.next(true);\n    }\n\n    public search(data, fragment) {\n        if (fragment.owner) {\n            data = data.filter(a => a.owner_id === fragment.owner);\n        }\n        return super.search(data, fragment);\n    }\n}\n","\nimport { BaseMockBackend } from './base.mock';\n\nimport { padZero, randomInt } from '../../utilities/general.utilities';\n\nlet counter = 0;\n\nexport class MockAuthSourcesBackend extends BaseMockBackend {\n\n    constructor(protected model) {\n        super(model);\n    }\n\n    protected load() {\n        this.model.log('AUTH SOURCES', 'Loading mock data for authentication sources...');\n        this.loadList();\n    }\n\n    private loadList() {\n        const oauth_sources = generateOAuthAuthSource(this.model.domains);\n        this.setupBasicHandlers('api/engine/v2/oauth_auths', oauth_sources, 'auth');\n        this.model.auth_sources = [].concat(oauth_sources);\n        const saml_sources = generateSAMLAuthSource(this.model.domains);\n        this.setupBasicHandlers('api/engine/v2/saml_auths', saml_sources, 'auth');\n        this.model.auth_sources = this.model.auth_sources.concat(saml_sources);\n        const ldap_sources = generateLDAPAuthSource(this.model.domains);\n        this.setupBasicHandlers('api/engine/v2/ldap_auths', ldap_sources, 'auth');\n        this.model.auth_sources = this.model.auth_sources.concat(ldap_sources);\n        this.state.next(true);\n    }\n\n    public search(data, fragment) {\n        const authority = fragment.authority_id || fragment.authority;\n        if (authority) {\n            data = data.filter((a) => a.authority_id === authority);\n        }\n        return super.search(data, fragment);\n    }\n}\n\nexport function generateOAuthAuthSource(domain_list: any[]) {\n    const list = Array(randomInt(10) + 2).fill(0).map((_, idx) => {\n        return {\n            id: `auth-${padZero(counter++, 4)}`,\n            name: `OAuth Source ${idx + 1}`,\n            authority_id: domain_list[randomInt(domain_list.length)].id,\n            client_id: `${padZero(randomInt(999_999_999), 10)}`,\n            client_secret: `${padZero(randomInt(999_999_999), 10)}`,\n            info_mappings: {\n                name: 'name',\n                email: 'email'\n            },\n            site: `https://${randomInt(99999)}.placeos.com`,\n            authorize_url: 'oauth/authorise',\n            token_method: 'post',\n            auth_scheme: randomInt(9999) % 2 === 0 ? 'request_body' : 'basic_auth',\n            token_url: 'oauth/token',\n            scope: 'admin',\n            raw_info_url: 'user/details'\n        };\n    });\n    return list;\n}\n\nexport function generateLDAPAuthSource(domain_list: any[]) {\n    const list = Array(randomInt(10) + 2).fill(0).map(_ => {\n        const num = randomInt(9999999) % 3;\n        return {\n            id: `auth-${padZero(counter++, 4)}`,\n            name: `LDAP Source ${_ + 1}`,\n            authority_id: domain_list[randomInt(domain_list.length)].id,\n            host: '',\n            port: randomInt(65535, 1000),\n            auth_method: num === 0 ? 'plain' : num === 1 ? 'ssl' : 'tls',\n            uid: `${padZero(randomInt(999_999_999), 10)}`,\n            base: 'placeos.com',\n            bind_dn: 'another.placeos.com',\n            password: `${padZero(randomInt(999_999_999), 10)}`\n        };\n    });\n    return list;\n}\n\nexport function generateSAMLAuthSource(domain_list: any[]) {\n    const list = Array(randomInt(10) + 2).fill(0).map(_ => {\n        return {\n            id: `auth-${padZero(counter++, 4)}`,\n            name: `SAML Source ${_ + 1}`,\n            authority_id: domain_list[randomInt(domain_list.length)].id,\n            issuer: 'sso.placeos.com',\n            idp_sso_target_url_runtime_params: {},\n            name_identifier_format: '',\n            uid_attribute: '',\n            assertion_consumer_service_url: '',\n            idp_sso_target_url: '',\n            idp_cert: '',\n            idp_cert_fingerprint: '',\n            attribute_service_name: '',\n            attribute_statements: {},\n            request_attributes: [],\n            idp_slo_target_url: '',\n            slo_default_relay_state: ''\n        };\n    });\n    return list;\n}\n\n","import { MockHttpRequestHandlerOptions } from '@placeos/ts-client';\nimport { BehaviorSubject } from 'rxjs';\n\nimport { padZero } from '../../utilities/general.utilities';\n\nexport function initialiseGlobals() {\n    if (!window.control) {\n        window.control = {};\n    }\n    if (!window.control.handlers || !(window.control.handlers instanceof Array)) {\n        window.control.handlers = [];\n    }\n}\n\nexport class BaseMockBackend {\n    protected state: BehaviorSubject<boolean>;\n    protected state_obs: any;\n\n    constructor(protected model) {\n        this.state = new BehaviorSubject(false);\n        this.state_obs = this.state.asObservable();\n        this.init();\n    }\n\n    protected listen(next: (state?: boolean) => void) {\n        return this.state.subscribe(next);\n    }\n\n    protected init() {\n        this.load();\n    }\n\n    protected load() {}\n\n    get data() {\n        return this.model;\n    }\n\n    public search(data, fragment) {\n        if (fragment.id) {\n            data = data.filter(a => a.id === fragment.id);\n        }\n        if (fragment.q) {\n            data = data.filter(\n                a => (a.name || '').toLowerCase().indexOf(fragment.q.toLowerCase()) >= 0\n            );\n        }\n        if (fragment && fragment.offset) {\n            const start = Math.min(data.length, +fragment.offset);\n            const end = Math.min(data.length, +fragment.offset + (+fragment.limit || 20));\n            return { results: data.slice(start, end), total: data.length };\n        } else {\n            return { results: data.slice(0, +fragment.limit || 20), total: data.length };\n        }\n    }\n\n    public setupBasicHandlers(base_url: string, list: any[], id_prefix: string) {\n        if (!list) {\n            list = [];\n        }\n        initialiseGlobals();\n        // Mock for index GET\n        window.control.handlers.push({\n            path: `${base_url}`,\n            metadata: list,\n            method: 'GET',\n            callback: event => this.search(list, event.query_params)\n        } as MockHttpRequestHandlerOptions);\n        // Mock for index POST\n        window.control.handlers.push({\n            path: `${base_url}`,\n            metadata: list,\n            method: 'POST',\n            callback: event => {\n                list.push({ ...(event.body || {}), id: `${id_prefix}-${padZero(list.length, 4)}` });\n                return list[list.length - 1];\n            }\n        } as MockHttpRequestHandlerOptions);\n        // Mock for show GET\n        window.control.handlers.push({\n            path: `${base_url}/:id`,\n            metadata: list,\n            method: 'GET',\n            callback: event => {\n                if (event && event.route_params && event.route_params.id) {\n                    return list.find(i => i.id === event.route_params.id);\n                }\n                return null;\n            }\n        } as MockHttpRequestHandlerOptions);\n        // Mock for show PUT\n        const handleUpdate = event => {\n            if (event && event.route_params && event.route_params.id) {\n                for (const item of list) {\n                    if (item.id === event.route_params.id) {\n                        const new_item = { ...item, ...event.body };\n                        list.splice(list.indexOf(item), 1, new_item);\n                        this.updateOtherEndpoints(list);\n                        return new_item;\n                    }\n                }\n            }\n            return null;\n        };\n        window.control.handlers.push({\n            path: `${base_url}/:id`,\n            metadata: list,\n            method: 'PUT',\n            callback: handleUpdate\n        } as MockHttpRequestHandlerOptions);\n        // Mock for show PATCH\n        window.control.handlers.push({\n            path: `${base_url}/:id`,\n            metadata: list,\n            method: 'PATCH',\n            callback: handleUpdate\n        } as MockHttpRequestHandlerOptions);\n        // Mock for show PUT\n        window.control.handlers.push({\n            path: `${base_url}/:id`,\n            metadata: list,\n            method: 'DELETE',\n            callback: event => {\n                if (event && event.route_params && event.route_params.id) {\n                    for (const item of list) {\n                        if (item.id === event.route_params.id) {\n                            list.splice(list.indexOf(item), 1);\n                            this.updateOtherEndpoints(list);\n                            return {};\n                        }\n                    }\n                }\n                return null;\n            }\n        } as MockHttpRequestHandlerOptions);\n        return list;\n    }\n\n    protected updateOtherEndpoints(list: any[]): void {}\n\n    protected request(method, url) {\n        return new Promise((resolve, reject) => {\n            const xhr = new XMLHttpRequest();\n            xhr.open(method, url);\n            xhr.onload = function() {\n                if ((this as any).status >= 200 && (this as any).status < 300) {\n                    resolve(xhr.response);\n                } else {\n                    reject({\n                        status: (this as any).status,\n                        statusText: xhr.statusText\n                    });\n                }\n            };\n            xhr.onerror = function() {\n                reject({\n                    status: (this as any).status,\n                    statusText: xhr.statusText\n                });\n            };\n            xhr.send();\n        });\n    }\n}\n","\nimport { BaseMockBackend } from './base.mock';\nimport { padZero } from '../../utilities/general.utilities';\n\nimport * as faker from 'faker';\nimport * as dayjs from 'dayjs';\n\nexport class MockDiscoveryBackend extends BaseMockBackend {\n\n    constructor(protected model) {\n        super(model);\n    }\n\n    protected load() {\n        this.model.log('DISCOVERY', 'Loading mock data for discovering drivers...');\n        this.loadDrivers();\n    }\n\n    private loadDrivers() {\n        const driver_list = [];\n        const count = Math.ceil(Math.floor(Math.random() * 10 + 5) * this.model.scale);\n        for (let i = 0; i < count; i++) {\n            const department = faker.commerce.department();\n            driver_list.push({\n                id: `dep-${padZero(i, 4)}`,\n                name: `Test ${department} ${i + 1}`,\n                class_name: `::Aca::${department}Test`,\n                module_name: department,\n                description: faker.lorem.paragraph(),\n                default: null,\n                ignore_connected: Math.floor(Math.random() * 324662871) % 2 === 0,\n                role: 'logic',\n                created_at: dayjs().add(-Math.floor(Math.random() * 10000), 'm').unix(),\n                settings: this.generateSettings()\n            });\n        }\n        this.model.discovery = driver_list;\n        this.setupBasicHandlers('api/engine/v2/discovery', this.model.discovery, 'dep');\n        this.state.next(true);\n    }\n\n    public generateSettings(level: number = 1) {\n        if (level > 3) { return null; }\n        const data: any = {};\n        const count = Math.floor(Math.random() * (6 - level) + (4 - level) * 2);\n        const types = ['string', 'number', 'boolean', 'object'];\n        for (let i = 0; i < count; i++) {\n            const type = types[Math.floor(Math.random() * types.length)];\n            switch (type) {\n                case 'string':\n                    data[`field_level_${level}_${i}`] = faker.lorem.sentence();\n                    break;\n                case 'number':\n                    data[`field_level_${level}_${i}`] = Math.floor(Math.random() * 9999);\n                    break;\n                case 'boolean':\n                    data[`field_level_${level}_${i}`] = Math.floor(Math.random() * 9999) % 2 === 0;\n                    break;\n                case 'object':\n                    data[`field_level_${level}_${i}`] = this.generateSettings(level + 1);\n                    break;\n            }\n        }\n        return data;\n    }\n}\n","import { BaseMockBackend } from './base.mock';\nimport { padZero } from '../../utilities/general.utilities';\n\nimport * as faker from 'faker';\nimport * as dayjs from 'dayjs';\n\nexport class MockDomainsBackend extends BaseMockBackend {\n    constructor(protected model) {\n        super(model);\n    }\n\n    protected load() {\n        this.model.log('DOMAINS', 'Loading mock data for domain...');\n        this.loadList();\n    }\n\n    private loadList() {\n        const item_list = [];\n        const count = Math.ceil(Math.floor(Math.random() * 5 + 2) * this.model.scale);\n        for (let i = 0; i < count; i++) {\n            const id = `sgrp-${padZero(i, 4)}`;\n            item_list.push({\n                id,\n                created_at: dayjs()\n                    .add(Math.floor(Math.random() * 1200 + 5), 'm')\n                    .unix(),\n                description: null,\n                dom: faker.internet.domainName(),\n                login_url: '/login?continue={{url}}',\n                logout_url: '/',\n                internals: {},\n                config: {},\n                name: `Test Domain ${i + 1}`\n            });\n        }\n        this.model.domains = item_list;\n        this.setupBasicHandlers('api/engine/v2/domains', this.model.domains, 'sgrp');\n        this.state.next(true);\n    }\n}\n","\nimport { EngineModuleFunction, HashMap, MockHttpRequestHandler } from '@placeos/ts-client';\n\nimport { BaseMockBackend } from './base.mock';\nimport { padZero } from '../../utilities/general.utilities';\nimport { MOCK_SETTINGS } from './settings.mock';\n\nimport * as faker from 'faker';\nimport * as dayjs from 'dayjs';\nimport * as yaml from 'js-yaml';\n\nexport class MockDriversBackend extends BaseMockBackend {\n\n    constructor(protected model) {\n        super(model);\n    }\n\n    protected load() {\n        this.model.log('DRIVERS', 'Loading mock data for dependencies...');\n        this.loadDrivers();\n    }\n\n    private loadDrivers() {\n        const driver_list = [];\n        const count = Math.ceil(Math.floor(Math.random() * 10 + 5) * this.model.scale);\n        for (let i = 0; i < count; i++) {\n            const department = faker.commerce.department();\n            const funcs: HashMap<EngineModuleFunction> = {};\n            const fcount = Math.floor(Math.random() * 10 + 2);\n            for (let k = 0; k < fcount; k++) {\n                const acount = Math.floor(Math.random() * 5);\n                const optional = Math.floor(Math.random() * acount);\n                const params: any[] = [];\n                for (let j = 0; j < acount; j++) {\n                    const arg = [];\n                    arg.push(acount - j <= optional ? 'opt' : 'req');\n                    arg.push(`arg${j + 1}`);\n                    params.push(arg);\n                }\n                funcs[`exec${k}`] = {\n                    arity: optional ? -(acount - (optional)) - 1 : acount,\n                    params: { ...params } as any,\n                    order: Object.keys(params)\n                };\n            }\n            driver_list.push({\n                id: `dep-${padZero(i, 4)}`,\n                name: `Test Driver ${i + 1}`,\n                class_name: `::Aca::${department}Test`,\n                module_name: department,\n                description: faker.lorem.paragraph(),\n                default: null,\n                ignore_connected: Math.floor(Math.random() * 324662871) % 2 === 0,\n                role: 'logic',\n                created_at: dayjs().add(-Math.floor(Math.random() * 10000), 'm').unix(),\n                settings: this.generateSettings(),\n                funcs\n            });\n        }\n        driver_list.forEach(driver => MOCK_SETTINGS.push({\n            id: `setting-${Math.floor(Math.random() * 999_999_999)}`,\n            parent_id: driver.id,\n            encryption_level: Math.floor(Math.random() * 4),\n            settings_string: driver.settings.settings_string,\n            keys: Object.keys(yaml.safeLoad(driver.settings.settings_string)),\n            updated_at: dayjs().subtract(Math.floor(Math.random() * 2000), 'm').valueOf()\n        }));\n        this.model.drivers = driver_list;\n        this.setupBasicHandlers('api/engine/v2/drivers', this.model.drivers, 'dep');\n        window.control.handlers.push({\n            path: 'api/engine/v2/drivers/:id/reload',\n            method: 'POST',\n            callback: _ => ({})\n        } as MockHttpRequestHandler);\n        this.state.next(true);\n    }\n\n    public generateSettings(level: number = 1) {\n        if (level > 3) { return null; }\n        const data: any = {};\n        const count = Math.floor(Math.random() * (10 - level) + (5 - level) * 2);\n        const types = ['string', 'number', 'boolean', 'object'];\n        for (let i = 0; i < count; i++) {\n            const type = types[Math.floor(Math.random() * types.length)];\n            switch(type) {\n                case 'string':\n                    data[`field_level_${level}_${i}`] = faker.lorem.sentence();\n                    break;\n                case 'number':\n                    data[`field_level_${level}_${i}`] = Math.floor(Math.random() * 9999);\n                    break;\n                case 'boolean':\n                    data[`field_level_${level}_${i}`] = Math.floor(Math.random() * 9999) % 2 === 0;\n                    break;\n                case 'object':\n                    data[`field_level_${level}_${i}`] = this.generateSettings(level + 1);\n                    break;\n            }\n        }\n        return yaml.safeDump(data);\n    }\n}\n","import { MockHttpRequest, MockHttpRequestHandler } from '@placeos/ts-client';\n\nimport { BaseMockBackend } from './base.mock';\nimport { padZero } from '../../utilities/general.utilities';\nimport { MOCK_SETTINGS } from './settings.mock';\n\nimport * as faker from 'faker';\nimport * as dayjs from 'dayjs';\nimport * as yaml from 'js-yaml';\n\nexport class MockModulesBackend extends BaseMockBackend {\n    constructor(protected model) {\n        super(model);\n    }\n\n    protected load() {\n        this.model.log('Modules', 'Loading mock data for modules...');\n        this.loadList();\n    }\n\n    private loadList() {\n        const item_list = [];\n        const count = Math.ceil(Math.floor(Math.random() * 500 + 120) * this.model.scale);\n        const systems = this.model.systems || [];\n        const drivers = this.model.drivers || [];\n        if (!window.control.systems) {\n            window.control.systems = {};\n        }\n        for (let i = 0; i < count; i++) {\n            const sys =\n                systems.length > 0\n                    ? systems[Math.floor(Math.random() * systems.length)]\n                    : { id: 'sys-test', name: 'sys' };\n            const driver =\n                drivers.length > 0\n                    ? drivers[Math.floor(Math.random() * drivers.length)]\n                    : { id: 'dep-test', name: 'dep' };\n            const ip = Math.floor(Math.random() * 999) % 2 === 0 ? this.generateIP() : '';\n            const id = `mod-${padZero(i, 4)}`;\n            sys.modules.push(id);\n            sys.funcs[id] = driver.funcs || {};\n            const item = {\n                id,\n                name: `Test Module ${i + 1}`,\n                custom_name:\n                    Math.floor(Math.random() * 999) % 2 === 0 ? faker.name.firstName() : '',\n                connected: Math.floor(Math.random() * 1234321) % 2 === 0,\n                running: Math.floor(Math.random() * 1234321) % 2 === 0,\n                control_system_id: sys.id,\n                control_system: sys,\n                driver_id: driver.id,\n                driver: driver,\n                edge_id: 'edge-0001',\n                edge: { id: 'edge-0001' },\n                role: sys.modules.length - 1,\n                ip,\n                port: ip ? Math.floor(Math.random() * 32_767) + 32_768 : '',\n                tls: Math.floor(Math.random() * 1234321) % 2 === 0,\n                udp: Math.floor(Math.random() * 1234321) % 2 === 0,\n                makebreak: Math.floor(Math.random() * 1234321) % 2 === 0,\n                notes: Math.floor(Math.random() * 999) % 2 === 0 ? faker.lorem.sentence() : '',\n                uri: '',\n                created_at: dayjs()\n                    .add(-Math.floor(Math.random() * 10000 + 10), 'm')\n                    .unix(),\n                updated_at: dayjs()\n                    .add(-Math.floor(Math.random() * 2000 + 1), 'm')\n                    .unix(),\n                settings: {\n                    settings_string: this.generateSettings()\n                }\n            };\n            if (!window.control.systems[sys.id]) {\n                window.control.systems[sys.id] = {};\n            }\n            const mod = item.custom_name || driver.module_name;\n            if (!window.control.systems[sys.id][mod]) {\n                window.control.systems[sys.id][mod] = [];\n            }\n            window.control.systems[sys.id][mod].push({ connected: item.connected });\n            item_list.push(item);\n        }\n        item_list.forEach(mod =>\n            MOCK_SETTINGS.push({\n                id: `setting-${Math.floor(Math.random() * 999_999_999)}`,\n                parent_id: mod.id,\n                encryption_level: Math.floor(Math.random() * 4),\n                settings_string: mod.settings.settings_string,\n                keys: Object.keys(yaml.safeLoad(mod.settings.settings_string)),\n                updated_at: dayjs()\n                    .subtract(Math.floor(Math.random() * 2000), 'm')\n                    .valueOf()\n            })\n        );\n        this.model.modules = item_list;\n        this.setupBasicHandlers('api/engine/v2/modules', this.model.modules, 'mod');\n        window.control.handlers.push({\n            path: 'api/engine/v2/modules/:id/start',\n            method: 'POST',\n            callback: (event: MockHttpRequest) => {\n                this.setActiveState(event.route_params.id, true);\n                return {};\n            }\n        } as MockHttpRequestHandler);\n        window.control.handlers.push({\n            path: 'api/engine/v2/modules/:id/stop',\n            method: 'POST',\n            callback: (event: MockHttpRequest) => {\n                this.setActiveState(event.route_params.id, false);\n                return {};\n            }\n        } as MockHttpRequestHandler);\n        this.state.next(true);\n    }\n\n    public search(data, fragment) {\n        if (fragment.sys_id) {\n            data = data.filter(\n                a =>\n                    a.control_system_id === fragment.sys_id ||\n                    (a.systems || []).indexOf(fragment.sys_id) >= 0\n            );\n        } else if (fragment.system_id) {\n            data = data.filter(\n                a =>\n                    a.control_system_id === fragment.system_id ||\n                    (a.systems || []).indexOf(fragment.system_id) >= 0\n            );\n        } else if (fragment.driver_id) {\n            data = data.filter(a => a.driver_id === fragment.driver_id);\n        }\n        if (fragment.q) {\n            const search = fragment.q.toLowerCase();\n            data = data.filter(a => (a.name || '').toLowerCase().indexOf(search) >= 0);\n        }\n        return super.search(data, fragment);\n    }\n\n    public generateSettings(level: number = 1) {\n        if (level > 3) {\n            return null;\n        }\n        const data: any = {};\n        const count = Math.floor(Math.random() * (10 - level) + (5 - level) * 2);\n        const types = ['string', 'number', 'boolean', 'object'];\n        for (let i = 0; i < count; i++) {\n            const type = types[Math.floor(Math.random() * types.length)];\n            switch (type) {\n                case 'string':\n                    data[`field_level_${level}_${i}`] = faker.lorem.sentence();\n                    break;\n                case 'number':\n                    data[`field_level_${level}_${i}`] = Math.floor(Math.random() * 9999);\n                    break;\n                case 'boolean':\n                    data[`field_level_${level}_${i}`] = Math.floor(Math.random() * 9999) % 2 === 0;\n                    break;\n                case 'object':\n                    data[`field_level_${level}_${i}`] = this.generateSettings(level + 1);\n                    break;\n            }\n        }\n        return yaml.safeDump(data);\n    }\n\n    public generateIP() {\n        let address = ['192', '176', '10'][Math.floor(Math.random() * 3)];\n        for (let i = 1; i < 4; i++) {\n            if (address) {\n                address += '.';\n            }\n            address += Math.floor(Math.random() * 256);\n        }\n        return address;\n    }\n\n    private setActiveState(id: string, state: boolean = false) {\n        const system = window.control.systems[id];\n        if (!system) {\n            throw { status: 404, message: `Module ${id} not found` };\n        }\n        const selected_module = this.model.modules.find(mod => mod.id === id);\n        if (!selected_module) {\n            throw { status: 404, message: `Module ${id} not found` };\n        }\n        const mod_class = selected_module.custom_name || selected_module.driver.class_name;\n        const module_list = system[mod_class];\n        if (!module_list || !module_list.length) {\n            throw { status: 404, message: `Module ${id} not found` };\n        }\n        module_list.forEach(mod => (mod.connected = state));\n    }\n}\n","\nimport { BaseMockBackend } from './base.mock';\nimport { padZero } from '../../utilities/general.utilities';\n\nimport * as dayjs from 'dayjs';\n\nexport class MockNodesBackend extends BaseMockBackend {\n\n    constructor(protected model) {\n        super(model);\n    }\n\n    protected load() {\n        this.model.log('NODES', 'Loading mock data for nodes...');\n        this.loadList();\n    }\n\n    private loadList() {\n        const item_list = [];\n        const count = Math.ceil(Math.floor(Math.random() * 4 + 2) * this.model.scale);\n        for (let i = 0; i < count; i++) {\n            const id = `edge-${padZero(i, 4)}`;\n            item_list.push({\n                id,\n                created_at: dayjs().add(Math.floor(Math.random() * 1200 + 5), 'm').unix(),\n                name: `Test Node ${i + 1}`,\n                admins: [],\n                description: null,\n                failover: true,\n                failover_active: false,\n                failover_time: 0,\n                host_origin: 'http://127.0.0.1',\n                master_id: null,\n                online: true,\n                password: '',\n                server_port: 17400,\n                settings: {},\n                startup_time: 0,\n                timeout: 20000,\n                window_length: null,\n                window_start: null\n            });\n        }\n        this.model.nodes = item_list;\n        this.setupBasicHandlers('api/engine/v2/nodes', this.model.nodes, 'edge');\n        this.state.next(true);\n    }\n}\n","import { MockHttpRequestHandler } from '@placeos/ts-client';\n\nimport { padZero, randomInt } from '../../utilities/general.utilities';\nimport { API } from '../common.mock';\n\nimport * as faker from 'faker';\nimport * as dayjs from 'dayjs';\n\nexport function generateMockRepository(overrides: any = {}) {\n    if (typeof overrides !== 'object' || !overrides) {\n        overrides = {};\n    }\n    const company = faker.company\n        .companyName()\n        .split(' ')\n        .join('-')\n        .toLowerCase();\n    const product = faker.commerce\n        .productName()\n        .split(' ')\n        .join('-');\n    return {\n        id: `repo-${Math.floor(Math.random() * 999_999_999)}`,\n        name: `${product}`,\n        folder_name: `${company}/${product}`,\n        description: faker.lorem.paragraph(),\n        uri: `https://github.com/placeos/${company}-drivers`,\n        commit_hash: 'HEAD',\n        type: Math.floor(Math.random() * 999_999_999) % 2,\n        ...overrides\n    };\n}\n\nexport const MOCK_REPOSITORIES = Array(5)\n    .fill(0)\n    .map(_ => generateMockRepository());\n\nconst MOCK_DRIVERS = window.backend.model.backend.drivers.model.drivers;\n\nMOCK_REPOSITORIES.forEach(repo => {\n    repo.commits = Array(5)\n        .fill(0)\n        .map(_ => padZero(randomInt(99_999_999), 8));\n    repo.drivers = Array(randomInt(10))\n        .fill(0)\n        .map(_ => MOCK_DRIVERS[randomInt(MOCK_DRIVERS.length)].id);\n});\n\n// Add handler for repositories index endpoint\nwindow.control.handlers.push({\n    path: `${API}/repositories`,\n    metadata: MOCK_REPOSITORIES,\n    callback: event => {\n        let data = [...MOCK_REPOSITORIES];\n        if (event.query_params.q) {\n            const search = event.query_params.q.toLowerCase();\n            data = data.filter(repo => (repo.name || '').toLowerCase().indexOf(search));\n        }\n        return { total: data.length, results: data };\n    }\n} as MockHttpRequestHandler);\n\n// Add handler for repository show endpoint\nwindow.control.handlers.push({\n    path: `${API}/repositories/:id`,\n    metadata: MOCK_REPOSITORIES,\n    callback: event => {\n        const item = MOCK_REPOSITORIES.find(repo => repo.id === event.route_params.id);\n        if (item) {\n            return item;\n        }\n        throw {\n            status: 404,\n            message: `Unable to find repository with ID ${event.route_params.id}`\n        };\n    }\n} as MockHttpRequestHandler);\n\n// Add handler for repository POST endpoint\nwindow.control.handlers.push({\n    path: `${API}/repositories`,\n    metadata: MOCK_REPOSITORIES,\n    method: 'POST',\n    callback: event => {\n        const new_item = { ...event.body, id: `repo-${randomInt(999_999_999)}` };\n        MOCK_REPOSITORIES.push(new_item);\n        return new_item;\n    }\n} as MockHttpRequestHandler);\n\n// Add handler for repository PUT endpoint\nwindow.control.handlers.push({\n    path: `${API}/repositories/:id`,\n    metadata: MOCK_REPOSITORIES,\n    method: 'PUT',\n    callback: event => {\n        const item = MOCK_REPOSITORIES.find(repo => repo.id === event.route_params.id);\n        if (item) {\n            const updated_item = { ...item, ...event.body };\n            MOCK_REPOSITORIES.splice(MOCK_REPOSITORIES.indexOf(item), 1, updated_item);\n            return updated_item;\n        }\n        throw {\n            status: 404,\n            message: `Unable to find repository with ID ${event.route_params.id}`\n        };\n    }\n} as MockHttpRequestHandler);\n\n// Add handler for repository show endpoint\nwindow.control.handlers.push({\n    path: `${API}/repositories/:id/drivers`,\n    metadata: MOCK_REPOSITORIES,\n    callback: event => {\n        const repo = MOCK_REPOSITORIES.find(a_repo => a_repo.id === event.route_params.id);\n        if (repo) {\n            const driver_list = repo.drivers.map(id =>\n                MOCK_DRIVERS.find(a_driver => a_driver.id === id)\n                    .name.split(' ')\n                    .join('/')\n            );\n            return driver_list;\n        }\n        throw {\n            status: 404,\n            message: `Unable to find repository with ID ${event.route_params.id}`\n        };\n    }\n} as MockHttpRequestHandler);\n\n// Add handler for repository show endpoint\nwindow.control.handlers.push({\n    path: `${API}/repositories/:id/commits`,\n    metadata: MOCK_REPOSITORIES,\n    callback: event => {\n        const repo = MOCK_REPOSITORIES.find(a_repo => a_repo.id === event.route_params.id);\n        if (repo) {\n            const driver = MOCK_DRIVERS.find(\n                a_driver => a_driver.name.split(' ').join('/') === event.query_params.driver\n            );\n            if (!driver)\n                throw {\n                    status: 404,\n                    message: `Unable to find driver with ID ${event.query_params.driver}`\n                };\n            return repo.commits\n                .map(hash => ({\n                    commit: hash,\n                    date: dayjs()\n                        .subtract(randomInt(999, 10) * 20, 'm')\n                        .unix(),\n                    author: `${faker.name.firstName()} ${faker.name.lastName()}`,\n                    subject: `chore(${driver.class}): various changes`\n                }))\n                .sort((a, b) => a.date - b.date);\n        }\n        throw {\n            status: 404,\n            message: `Unable to find repository with ID ${event.route_params.id}`\n        };\n    }\n} as MockHttpRequestHandler);\n\n// Add handler for repository show endpoint\nwindow.control.handlers.push({\n    path: `${API}/repositories/:id/details`,\n    metadata: MOCK_REPOSITORIES,\n    callback: event => {\n        const repo = MOCK_REPOSITORIES.find(a_repo => a_repo.id === event.route_params.id);\n        if (repo) {\n            const driver = MOCK_DRIVERS.find(\n                a_driver => a_driver.name.split(' ').join('/') === event.query_params.driver\n            );\n            if (!driver)\n                throw {\n                    status: 404,\n                    message: `Unable to find driver with ID ${event.query_params.driver}`\n                };\n            return {\n                descriptive_name: driver.name,\n                generic_name: driver.module_name,\n                class_name: driver.class,\n                description: driver.description,\n                default_settings: driver.settings\n            };\n        }\n        throw {\n            status: 404,\n            message: `Unable to find repository with ID ${event.route_params.id}`\n        };\n    }\n} as MockHttpRequestHandler);\n","import { MockHttpRequestHandler, MockHttpRequest } from '@placeos/ts-client';\nimport { API } from '../common.mock';\nimport { initialiseGlobals } from './base.mock';\n\nexport const MOCK_SETTINGS: any[] = [];\n\ninitialiseGlobals();\n\n// Add handler for users index\nwindow.control.handlers.push({\n    path: `${API}/settings`,\n    metadata: MOCK_SETTINGS,\n    callback: event => {\n        if (event.query_params.parent_id) {\n            return MOCK_SETTINGS.filter(item => item.parent_id === event.query_params.parent_id);\n        }\n        return [];\n    }\n} as MockHttpRequestHandler);\n\nconst handlerCreateEdit = (event: MockHttpRequest) => {\n    const old_version = event.route_params.id\n        ? MOCK_SETTINGS.filter(item => item.id === event.route_params.id)[0]\n        : null;\n    if (!old_version && !event.body && !event.body.parent_id) {\n        throw { status: 400, message: 'Settings require a parent' };\n    }\n    const version =\n        MOCK_SETTINGS.filter(item => item.parent_id === event.body.parent_id).length + 1;\n    MOCK_SETTINGS.push(\n        old_version ? { ...old_version, ...event.body, version } : { ...event.body, version }\n    );\n    return '';\n};\n\n// Add handler for settings index\nwindow.control.handlers.push({\n    path: `${API}/settings`,\n    metadata: MOCK_SETTINGS,\n    method: 'POST',\n    callback: handlerCreateEdit\n} as MockHttpRequestHandler);\n\n// Add handler for settings show\nwindow.control.handlers.push({\n    path: `${API}/settings/:id`,\n    metadata: MOCK_SETTINGS,\n    method: 'GET',\n    callback: _ => {\n        throw { status: 400, message: 'Endpoint does not resolve' };\n    }\n});\n\n// Add handler for users index\nwindow.control.handlers.push({\n    path: `${API}/settings/:id`,\n    metadata: MOCK_SETTINGS,\n    method: 'PUT',\n    callback: handlerCreateEdit\n} as MockHttpRequestHandler);\n\n// Add handler for users index\nwindow.control.handlers.push({\n    path: `${API}/settings/:id`,\n    metadata: MOCK_SETTINGS,\n    method: 'DELETE',\n    callback: event => {\n        const settings = MOCK_SETTINGS.find(item => item.id === event.route_params.id);\n        if (!settings) {\n            throw {\n                status: 404,\n                message: `Setting with the ID ${event.route_params.id} not found`\n            };\n        }\n        MOCK_SETTINGS.splice(MOCK_SETTINGS.indexOf(settings), 1);\n        return '';\n    }\n} as MockHttpRequestHandler);\n","import { MockHttpRequestHandlerOptions } from '@placeos/ts-client';\n\nimport { BaseMockBackend } from './base.mock';\nimport { padZero } from '../../utilities/general.utilities';\n\nimport * as faker from 'faker';\nimport * as dayjs from 'dayjs';\n\nexport class MockStatsBackend extends BaseMockBackend {\n    constructor(protected model) {\n        super(model);\n    }\n\n    protected load() {\n        this.model.log('STATS', 'Loading mock data for stats...');\n        this.loadData();\n        this.loadList();\n    }\n\n    private loadData() {\n        this.createHistogram('graph_connections');\n        this.createHistogram('graph_offline');\n        this.createHistogram('graph_triggers');\n    }\n\n    private createHistogram(name: string) {\n        const start = dayjs().add(-(5 * 60), 's');\n        this.model[name] = {\n            histogram: [],\n            interval: 30 * 60,\n            period_name: 'day',\n            period_start: start.unix()\n        };\n        const value = Math.floor(Math.random() * 100);\n        this.model[name].histogram.push({\n            avg: value,\n            min: value,\n            max: value,\n            sum: value,\n            count: 1\n        });\n        this.model[name].histogram.push({\n            avg: value + 2,\n            min: value + 2,\n            max: value + 2,\n            sum: value + 2,\n            count: 1\n        });\n        setInterval(() => {\n            const old_value = this.model[name].histogram[this.model[name].histogram.length - 1].max;\n            let new_value = old_value + Math.floor(Math.random() * 10) - 5;\n            if (new_value < 0) {\n                new_value = 0;\n            }\n            this.model[name].histogram.push({\n                avg: new_value,\n                min: new_value,\n                max: new_value,\n                sum: new_value,\n                count: 1\n            });\n        }, 5 * 60 * 1000);\n    }\n\n    private loadList() {\n        const item_list = [];\n        const count = Math.floor(Math.random() * 10 + 5);\n        for (let i = 0; i < count; i++) {\n            item_list.push({\n                id: `trigger-${padZero(i, 4)}`,\n                name: `Test Trigger ${i + 1}`,\n                description: faker.lorem.paragraph(),\n                important: Math.floor(Math.random() * 124631) % 5,\n                debounce_period: 0,\n                conditions: [],\n                action: [],\n                created_at: dayjs()\n                    .add(-Math.floor(Math.random() * 10000), 'm')\n                    .unix()\n            });\n        }\n        this.model.states = item_list;\n        window.control.handlers.push({\n            path: 'api/engine/v2/stats/:id',\n            metadata: this.model.stats,\n            method: 'GET',\n            callback: event => {\n                const period = event.query_params.period || 'day';\n                const interval =\n                    period === 'hour'\n                        ? 5 * 60\n                        : period === 'week'\n                        ? 6 * 60 * 60\n                        : period === 'month'\n                        ? 24 * 60 * 60\n                        : 30 * 60;\n                if (\n                    event.route_params.id &&\n                    this.model[`graph_${event.route_params.id}`] &&\n                    this.model[`graph_${event.route_params.id}`].histogram\n                ) {\n                    const item = JSON.parse(\n                        JSON.stringify(this.model[`graph_${event.route_params.id}`])\n                    );\n                    item.interval = interval;\n                    item.period_name = period;\n                    return item;\n                }\n                return null;\n            }\n        } as MockHttpRequestHandlerOptions);\n        this.state.next(true);\n    }\n}\n","import { BaseMockBackend } from './base.mock';\nimport { padZero } from '../../utilities/general.utilities';\n\nimport * as faker from 'faker';\nimport * as dayjs from 'dayjs';\n\nexport class MockSystemTriggersBackend extends BaseMockBackend {\n    constructor(protected model) {\n        super(model);\n    }\n\n    protected load() {\n        this.model.log('SYS_TRIGGRES', 'Loading mock data for system triggers...');\n        this.loadList();\n    }\n\n    private loadList() {\n        const item_list = [];\n        const count = Math.ceil(Math.floor(Math.random() * 100 + 25) * this.model.scale);\n        const systems = this.model.systems || [];\n        const triggers = this.model.triggers || [];\n        const zones = this.model.zones || [];\n        for (let i = 0; i < count; i++) {\n            const id = `sys-${padZero(i, 4)}`;\n            const trigger = triggers[Math.floor(Math.random() * triggers.length)];\n            const system = systems[Math.floor(Math.random() * systems.length)];\n            const zone =\n                Math.floor(Math.random() * 1234565421) % 4 === 0\n                    ? zones[Math.floor(Math.random() * zones.length)]\n                    : null;\n            item_list.push({\n                id,\n                binding: id,\n                name: trigger.name,\n                description: faker.lorem.sentence(),\n                trigger_id: trigger.id,\n                control_system_id: zone ? null : system.id,\n                control_system: zone ? null : system,\n                enabled: Math.floor(Math.random() * 1234565421) % 2 === 0,\n                conditions: [],\n                actions: [],\n                important: Math.floor(Math.random() * 1234565421) % 2 === 0,\n                override: {},\n                trigger_count: Math.floor(Math.random() * 10000),\n                triggered: Math.floor(Math.random() * 1234565421) % 2 === 0,\n                zone_id: zone ? zone.id : null,\n                webhook_secret: `secret_${i + 1}`,\n                updated_at: dayjs()\n                    .add(-Math.floor(Math.random() * 100), 'm')\n                    .unix(),\n                created_at: dayjs()\n                    .add(-Math.floor(Math.random() * 10000), 'm')\n                    .unix()\n            });\n        }\n        this.model.system_triggers = item_list;\n        this.setupBasicHandlers('api/engine/v2/system-triggers', this.model.system_triggers, 'sys');\n        this.state.next(true);\n    }\n\n    public search(data, fragment) {\n        if (fragment.trigger_id) {\n            data = data.filter(a => a.trigger_id === fragment.trigger_id);\n        } else if (fragment.zone_id) {\n            data = data.filter(a => a.zone_id === fragment.zone_id);\n        } else if (fragment.sys_id) {\n            data = data.filter(a => a.control_system_id === fragment.sys_id);\n        }\n        return super.search(data, fragment);\n    }\n}\n","\nimport { MockHttpRequestHandler } from '@placeos/ts-client';\n\nimport { BaseMockBackend } from './base.mock';\nimport { padZero } from '../../utilities/general.utilities';\n\nimport * as faker from 'faker';\nimport * as dayjs from 'dayjs';\nimport * as yaml from 'js-yaml';\nimport { MOCK_SETTINGS } from './settings.mock';\n\nexport class MockSystemsBackend extends BaseMockBackend {\n\n    constructor(protected model) {\n        super(model);\n    }\n\n    protected load() {\n        this.model.log('SYSTEMS', 'Loading mock data for systems...');\n        this.loadList();\n    }\n\n    private loadList() {\n        const count = Math.ceil(Math.floor(Math.random() * 100 + 25) * this.model.scale);\n        const zones = this.model.zones || [];\n        let i = 0;\n        this.model.systems = Array(count)\n            .fill(1)\n            .map(_ => {\n                const zone_list = [];\n                const id = `sys-${padZero(i++, 4)}`;\n                if (zones) {\n                    const c = Math.floor(Math.random() * 3 + 1);\n                    for (let j = 0; j < c; j++) {\n                        const zone = zones[Math.floor(Math.random() * zones.length)];\n                        if (zone_list.indexOf(zone) < 0) {\n                            if (!zone.systems) { zone.systems = []; }\n                            zone.systems.push(id);\n                            zone_list.push(zone.id);\n                        }\n                    }\n                }\n                return {\n                    id,\n                    edge_id: 'edge-0001',\n                    name: `Test System ${i}`,\n                    description: faker.lorem.paragraph(),\n                    bookable: Math.floor(Math.random() * 1234321) % 3,\n                    capacity: Math.floor(Math.random() * 64),\n                    email: `sys-${padZero(i, 4)}@room.tools`,\n                    features: ``, installed_ui_devices: 0, support_url: '', modules: [], funcs: {},\n                    zones: zone_list,\n                    settings: {\n                        settings_string: this.generateSettings()\n                    },\n                    created_at: dayjs().add(-Math.floor(Math.random() * 10000), 'm').unix()\n                };\n            });\n        this.model.systems.forEach(system => MOCK_SETTINGS.push({\n            id: `setting-${Math.floor(Math.random() * 999_999_999)}`,\n            parent_id: system.id,\n            encryption_level: Math.floor(Math.random() * 4),\n            settings_string: system.settings.settings_string,\n            keys: Object.keys(yaml.safeLoad(system.settings.settings_string)),\n            updated_at: dayjs().subtract(Math.floor(Math.random() * 2000), 'm').valueOf()\n        }));\n        this.model.systems.forEach(system => this.generateMockSystem(system))\n        this.model.systems = this.setupBasicHandlers('api/engine/v2/systems', this.model.systems, 'sys');\n        window.control.handlers.push({\n            path: 'api/engine/v2/systems/:id/:opt',\n            metadata: this.model.systems,\n            method: 'GET',\n            callback: (event) => {\n                if (event && event.route_params && event.route_params.id) {\n                    if (!event.route_params.opt) {\n                        for (const item of this.model.systems) {\n                            if (item.id === event.route_params.id) {\n                                return item;\n                            }\n                        }\n                    } else if (event.route_params.opt === 'funcs') {\n                        for (const item of this.model.systems) {\n                            if (item.id === event.route_params.id) {\n                                return item.funcs[item.modules[+event.query_params.index - 1]];\n                            }\n                        }\n                    } else if (event.route_params.opt === 'state') {\n                        return yaml.safeLoad(this.generateSettings());\n                    }\n                }\n                return null;\n            }\n        } as MockHttpRequestHandler);\n        window.control.handlers.push({\n            path: 'api/engine/v2/systems/:id/functions/:mod',\n            metadata: this.model.systems,\n            method: 'GET',\n            callback: (event) => {\n                if (event.route_params.mod) {\n                    for (const item of this.model.systems) {\n                        if (item.id === event.route_params.id) {\n                            const parts = event.route_params.mod.split('_');\n                            return item.funcs[item.modules[+parts[parts.length - 1] - 1]];\n                        }\n                    }\n                }\n                throw { status: 404, message: 'Module not found' }\n            }\n        } as MockHttpRequestHandler)\n        this.state.next(true);\n    }\n\n    public updateOtherEndpoints(list) {\n        this.model.zones.forEach(i => i.systems = []);\n        this.model.modules.forEach(i => i.systems = []);\n        for (const system of list) {\n            for (const zone_id of system.zones) {\n                const zone = this.model.zones.find(i => i.id === zone_id);\n                if (zone) {\n                    zone.systems.push(system.id);\n                }\n            }\n            for (const mod_id of system.modules) {\n                const mod = this.model.modules.find(i => i.id === mod_id);\n                if (mod) {\n                    mod.systems.push(system.id);\n                }\n            }\n        }\n    }\n\n    public search(data, fragment) {\n        if (fragment.module_id) {\n            data = data.filter((a) => a.modules.indexOf(fragment.module_id) >= 0);\n        } else if (fragment.zone_id) {\n            data = data.filter((a) => a.zones.indexOf(fragment.zone_id) >= 0);\n        }\n        return super.search(data, fragment);\n    }\n\n    public generateSettings(level: number = 1) {\n        if (level > 4) { return null; }\n        const data: any = {};\n        const count = Math.floor(Math.random() * (10 - level) + (5 - level) * 2);\n        const types = ['string', 'number', 'boolean', 'object'];\n        for (let i = 0; i < count; i++) {\n            const type = types[Math.floor(Math.random() * types.length)];\n            switch(type) {\n                case 'string':\n                    data[`field_level_${level}_${i}`] = faker.lorem.sentence();\n                    break;\n                case 'number':\n                    data[`field_level_${level}_${i}`] = Math.floor(Math.random() * 9999);\n                    break;\n                case 'boolean':\n                    data[`field_level_${level}_${i}`] = Math.floor(Math.random() * 9999) % 2 === 0;\n                    break;\n                case 'object':\n                    data[`field_level_${level}_${i}`] = this.generateSettings(level + 1);\n                    break;\n            }\n        }\n        const output = yaml.safeDump(data, { indent: 4 });\n        return output;\n    }\n\n    private generateMockSystem(data) {\n        window.control.systems[data.id] = {\n            System: [{\n                connected: Math.floor(Math.random() * 999999) % 3 === 0\n            }]\n        }\n    }\n}\n","\nimport { MockHttpRequestHandlerOptions } from '@placeos/ts-client';\n\nimport { BaseMockBackend } from './base.mock';\nimport { padZero } from '../../utilities/general.utilities';\n\nimport * as faker from 'faker';\n\nexport class MockTestsBackend extends BaseMockBackend {\n\n    constructor(protected model) {\n        super(model);\n    }\n\n    protected load() {\n        this.model.log('TESTS', 'Loading mock data for tests...');\n        this.loadTests();\n    }\n\n    private loadTests() {\n        const zone_list = [];\n        const count = Math.ceil(Math.floor(Math.random() * 10 + 5) * this.model.scale);\n        for (let i = 0; i < count; i++) {\n            const company = faker.company.companyName().toLowerCase().split(' ').join('_');\n            zone_list.push(`/home/aca-apps/aca-device-modules/modules/${company}/module_${i + 1}`);\n        }\n        this.model.tests = zone_list;\n        window.control.handlers.push({\n            path: 'api/engine/v2/tests',\n            metadata: this.model.tests,\n            method: 'GET',\n            callback: (event) => this.search(event.metadata, event.query_params)\n        } as MockHttpRequestHandlerOptions);\n        window.control.handlers.push({\n            path: 'api/engine/v2/tests/:id',\n            metadata: this.model.tests,\n            method: 'GET',\n            callback: (event) => {\n                if (event && event.route_params && event.route_params.id) {\n                    const id = decodeURIComponent(event.route_params.id);\n                    if (this.model.tests.indexOf(id) >= 0) {\n                        const company = faker.company.companyName().toLowerCase().split(' ').join('_');\n                        const parts = id.split('/');\n                        return {\n                            details: {\n                                module_name: ``,\n                                name: `Test Module ${parts[parts.length - 1].split('_')[1]}`,\n                                role: 'logic',\n                                settings: this.generateSettings()\n                            },\n                            documentation: [\n                                'https://acaprojects.com',\n                                'https://developer.acaprojects.com',\n                                'https://www.google.com'\n                            ],\n                            klass: `${company}::Module::Driver_${padZero(+parts[parts.length - 1].split('_')[1], 4)}`\n                        };\n                    }\n                }\n                return null;\n            }\n        } as MockHttpRequestHandlerOptions);\n        this.state.next(true);\n    }\n\n    public generateSettings(level: number = 1) {\n        if (level > 4) { return null; }\n        const data: any = {};\n        const count = Math.floor(Math.random() * (10 - level) + (5 - level) * 2);\n        const types = ['string', 'number', 'boolean', 'object'];\n        for (let i = 0; i < count; i++) {\n            const type = types[Math.floor(Math.random() * types.length)];\n            switch(type) {\n                case 'string':\n                    data[`field_level_${level}_${i}`] = faker.lorem.sentence();\n                    break;\n                case 'number':\n                    data[`field_level_${level}_${i}`] = Math.floor(Math.random() * 9999);\n                    break;\n                case 'boolean':\n                    data[`field_level_${level}_${i}`] = Math.floor(Math.random() * 9999) % 2 === 0;\n                    break;\n                case 'object':\n                    data[`field_level_${level}_${i}`] = this.generateSettings(level + 1);\n                    break;\n            }\n        }\n        return data;\n    }\n}\n","import {\n    TriggerComparison,\n    TriggerTimeCondition,\n    TriggerFunction,\n    TriggerMailer,\n    TriggerConditionOperator,\n    TriggerTimeConditionType\n} from '@placeos/ts-client';\n\nimport { BaseMockBackend } from './base.mock';\nimport { padZero, randomInt } from '../../utilities/general.utilities';\n\nimport * as faker from 'faker';\nimport * as dayjs from 'dayjs';\n\nexport class MockTriggersBackend extends BaseMockBackend {\n    constructor(protected model) {\n        super(model);\n    }\n\n    protected load() {\n        this.model.log('TRIGGERS', 'Loading mock data for triggers...');\n        this.loadList();\n    }\n\n    private loadList() {\n        const item_list = [];\n        const count = Math.ceil(Math.floor(Math.random() * 10 + 5) * this.model.scale);\n        for (let i = 0; i < count; i++) {\n            item_list.push({\n                id: `trigger-${padZero(i, 4)}`,\n                name: `Test Trigger ${i + 1}`,\n                description: faker.lorem.paragraph(),\n                important: Math.floor(Math.random() * 124631) % 5,\n                debounce_period: 0,\n                conditions: {\n                    comparisons: Array(randomInt(5) + 1)\n                        .fill(0)\n                        .map(() => generateTriggerComparison()),\n                    time_dependents: Array(randomInt(5) + 1)\n                        .fill(0)\n                        .map(() => generateTriggerTimeDependant())\n                },\n                actions: {\n                    functions: Array(randomInt(5) + 1)\n                        .fill(0)\n                        .map(() => generateTriggerFunction()),\n                    mailers: Array(randomInt(5) + 1)\n                        .fill(0)\n                        .map(() => generateTriggerMailer())\n                },\n                created_at: dayjs()\n                    .add(-Math.floor(Math.random() * 10000), 'm')\n                    .unix()\n            });\n        }\n        this.model.triggers = item_list;\n        this.setupBasicHandlers('api/engine/v2/triggers', this.model.triggers, 'trigger');\n        this.setupBasicHandlers('api/engine/v2/system-triggers', this.model.triggers, 'trigger');\n        this.state.next(true);\n    }\n}\n\nconst OP_MAP = [];\nfor (const n in TriggerConditionOperator) {\n    if (typeof TriggerConditionOperator[n] === 'string') {\n        OP_MAP.push({ id: TriggerConditionOperator[n] as any, name: n });\n    }\n}\n\nexport function generateTriggerComparison(): TriggerComparison {\n    return {\n        left: {\n            mod: `${faker.commerce.department()}_${randomInt(9, 1)}`,\n            status: `power`,\n            keys: []\n        },\n        operator: OP_MAP[randomInt(OP_MAP.length)].id as any,\n        right: randomInt(999_999_999)\n    };\n}\n\nexport function generateTriggerTimeDependant(): TriggerTimeCondition {\n    return randomInt(999) % 2 === 0\n        ? {\n              type: TriggerTimeConditionType.CRON,\n              cron: `${randomInt(12) * 5 || '*'} ${randomInt(24) || '*'} ${randomInt(31) ||\n                  '*'} ${randomInt(12) || '*'} ${randomInt(7) || '*'}`\n          }\n        : {\n              type: TriggerTimeConditionType.AT,\n              time: dayjs()\n                  .add(randomInt(999_999) + 10, 'm')\n                  .unix()\n          };\n}\n\nexport function generateTriggerFunction(): TriggerFunction {\n    return {\n        mod: `${faker.commerce.department()}_${randomInt(9, 1)}`,\n        method: `power`,\n        args: {}\n    };\n}\n\nexport function generateTriggerMailer(): TriggerMailer {\n    return {\n        emails: Array(randomInt(15, 1))\n            .fill(0)\n            .map(\n                i =>\n                    `${faker.name\n                        .firstName()\n                        .toLowerCase()}.${faker.name.lastName().toLowerCase()}@placeos.com`\n            ),\n        content: faker.lorem.paragraph()\n    };\n}\n","/*\n * @Author: alex.sorafumo\n * @Date:   2017-04-03 15:50:46\n * @Last Modified by: mikey.zhaopeng\n * @Last Modified time: 2018-09-02 20:25:07\n */\n\nimport { BaseMockBackend } from './base.mock';\n\nimport * as faker from 'faker';\n\nexport class MockUsersBackend extends BaseMockBackend {\n\n    constructor(protected model) {\n        super(model);\n    }\n\n    protected load() {\n        this.model.log('USERS', 'Loading mock data for users...');\n        this.loadUsers();\n    }\n\n    private loadUsers() {\n        this.model.users = [];\n        const count = Math.ceil(Math.floor(Math.random() * 200 + 50) * this.model.scale);\n        for (let i = 0; i < count; i++) {\n            const firstName: string = faker.name.firstName();\n            const lastName: string = faker.name.lastName();\n            this.model.users.push({\n                department: `${faker.company.companyName()}`,\n                phone: Math.floor(Math.random() * 8999 + 1000).toString(),\n                email: `${firstName.toLowerCase()}.${lastName.toLowerCase()}@${this.model.domain}`,\n                support: Math.floor(Math.random() * 999_999_999) % 5 === 0,\n                sys_admin: Math.floor(Math.random() * 999_999_999) % 5 === 0,\n                name: `${firstName} ${lastName}`,\n                id: `user-${Math.floor(Math.random() * 899999 + 100000).toString()}`,\n                avatar_url: '',\n            });\n        }\n            // Add predefined users\n        for (const name of this.model.predefined_users) {\n            const split = name.split(' ');\n            this.model.users.push({\n                department: `${faker.company.companyName()}`,\n                // phone: Math.floor(Math.random() * 8999 + 1000).toString(),\n                email: `${split[0].toLowerCase()}.${split[1].toLowerCase()}@${this.model.domain}`,\n                name,\n                id: `user-${Math.floor(Math.random() * 899999 + 100000).toString()}`,\n                support: true,\n                sys_admin: Math.floor(Math.random() * 999_999_999) % 5 === 0,\n                avatar_url: '',\n                organisation_id: 12,\n                organisation_name: 'ACA'\n            });\n        }\n        this.model.users.push({\n            id: 'current',\n            name: 'ACA Test Robot',\n            avatar_url: '',\n            email: 'robot@acaprojects.com',\n            sys_admin: true\n        });\n        this.model.users.sort((a, b) => a.name.localeCompare(b.name));\n        this.setupBasicHandlers('api/engine/v2/users', this.model.users, 'user');\n        this.state.next(true);\n    }\n\n}\n","\nimport { BaseMockBackend } from './base.mock';\nimport { padZero } from '../../utilities/general.utilities';\nimport { MOCK_SETTINGS } from './settings.mock';\n\nimport * as faker from 'faker';\nimport * as dayjs from 'dayjs';\nimport * as yaml from 'js-yaml';\n\nexport class MockZonesBackend extends BaseMockBackend {\n\n    constructor(protected model) {\n        super(model);\n    }\n\n    protected load() {\n        this.model.log('ZONES', 'Loading mock data for zones...');\n        this.loadZones();\n    }\n\n    private loadZones() {\n        const zone_list = [];\n        const count = Math.ceil(Math.floor(Math.random() * 10 + 5) * this.model.scale);\n        for (let i = 0; i < count; i++) {\n            zone_list.push({\n                id: `zone-${padZero(i, 4)}`,\n                name: `Test Zone ${i + 1}`,\n                description: `### Test Title\\n\\n${faker.lorem.paragraph()}`,\n                tags: `test zone`,\n                created_at: dayjs().add(-Math.floor(Math.random() * 10000), 'm').unix(),\n                triggers: [],\n                systems: [],\n                trigger_data: [],\n                settings: {\n                    settings_string: this.generateSettings()\n                }\n            });\n        }\n        zone_list.forEach(zone => MOCK_SETTINGS.push({\n            id: `setting-${Math.floor(Math.random() * 999_999_999)}`,\n            parent_id: zone.id,\n            encryption_level: Math.floor(Math.random() * 4),\n            settings_string: zone.settings.settings_string,\n            keys: Object.keys(yaml.safeLoad(zone.settings.settings_string)),\n            updated_at: dayjs().subtract(Math.floor(Math.random() * 2000), 'm').valueOf()\n        }));\n        this.model.zones = zone_list;\n        this.setupBasicHandlers('api/engine/v2/zones', this.model.zones, 'zone');\n        this.state.next(true);\n    }\n\n    public search(data, fragment) {\n        if (fragment.sys_id) {\n            data = data.filter((a) => {\n                return (a.systems || []).indexOf(fragment.sys_id) >= 0;\n            });\n        }\n        return super.search(data, fragment);\n    }\n\n    public generateSettings(level: number = 1) {\n        if (level > 4) { return null; }\n        const data: any = {};\n        const count = Math.floor(Math.random() * (10 - level) + (5 - level) * 2);\n        const types = ['string', 'number', 'boolean', 'object'];\n        for (let i = 0; i < count; i++) {\n            const type = types[Math.floor(Math.random() * types.length)];\n            switch(type) {\n                case 'string':\n                    data[`field_level_${level}_${i}`] = faker.lorem.sentence();\n                    break;\n                case 'number':\n                    data[`field_level_${level}_${i}`] = Math.floor(Math.random() * 9999);\n                    break;\n                case 'boolean':\n                    data[`field_level_${level}_${i}`] = Math.floor(Math.random() * 9999) % 2 === 0;\n                    break;\n                case 'object':\n                    data[`field_level_${level}_${i}`] = this.generateSettings(level + 1);\n                    break;\n            }\n        }\n        return yaml.safeDump(data);\n    }\n}\n","\n/** Domain of the organisation */\nexport const DOMAIN = 'acaprojects.com';\n/** Endpoint where the staff API is located */\nexport const API = '/api/engine/v2';\n","\nimport './system.mockup';\nimport './backend/settings.mock';\nimport './backend.mock';\nimport './backend/repositories.mock';\n\nexport * from './system.mockup';\n","/**\n * @Author: Alex Sorafumo <alex.sorafumo>\n * @Date:   11/01/2017 4:16 PM\n * @Email:  alex@yuion.net\n * @Filename: mock-system.ts\n * @Last modified by:   Alex Sorafumo\n * @Last modified time: 03/02/2017 2:26 PM\n */\n\nimport * as dayjs from 'dayjs';\n\nconst win = self as any;\n\nwin.systemData = win.systemData || {};\nwin.control = win.control || {};\nwin.control.systems = win.control.systems || {};\nwin.control.systems['sys-B0'] = {\n    System: [\n        {\n            name: 'Demo System'\n        }\n    ],\n    Demo: [\n        {\n            volume: 0,\n            mute: false,\n            views: 0,\n            state: 'Idle',\n\n            $play: () => {\n                win.control.systems['sys-B0'].Demo[0].state = 'Playing';\n            },\n\n            $stop: () => {\n                win.control.systems['sys-B0'].Demo[0].state = 'Stopped';\n            },\n\n            $volume: (value: number) => {\n                this.volume = value;\n                if (this.volume > 100) {\n                    this.volume = 100;\n                } else if (this.volume < 0) {\n                    this.volume = 0;\n                }\n            },\n\n            $mute: (state: boolean) => {\n                this.mute = state;\n            },\n\n            $state: (status: string) => {\n                this.state = status;\n            }\n        }\n    ]\n};\n\nsetTimeout(() => initMessages(), 500);\n\nfunction initMessages() {\n    if (win.backend && win.backend.model.user) {\n        const messages = [\n            'Testing',\n            'Response to Testing',\n            `Hello I'm ${win.backend.model.user.name}`,\n            `Hello ${win.backend.model.user.name}, this is the concierge`,\n            'Can I book a room for tomorrow at 9:30am?',\n            'Sure, how does Activity Space 31.04 sound?',\n            'That\\'s exactly what I\\'m looking for, thanks',\n            'Alright, you now have a booking for Activity Space 31.04 at 9:30am tomorrow.'\n        ];\n        const time = dayjs()\n            .add(-messages.length * 30, 'm')\n            .startOf('s');\n        let index = 0;\n        for (const msg of messages) {\n            win.control.systems['sys-B0'].Slack[0].threads.local.push({\n                text: msg,\n                username: index % 2 === 0 ? win.backend.model.user.name : '',\n                ts: time.valueOf()\n            });\n            index++;\n            time.add(30, 'm');\n        }\n    } else {\n        setTimeout(() => initMessages(), 500);\n    }\n}\n\nwin.systemData['sys-B0'] = win.control.systems['sys-B0'];\n","import { Pipe, PipeTransform } from '@angular/core';\n\nimport * as dayjs from 'dayjs';\n\n@Pipe({\n    name: 'dateFrom'\n})\nexport class DateFromPipe implements PipeTransform {\n    public transform(value: number): string {\n        const now = dayjs();\n        const date = dayjs(value);\n        let diff = now.diff(date, 'm');\n        const direction = diff < 0;\n        diff = Math.abs(diff);\n        if (diff < 1) { // Less than a minute\n            return direction ? 'In less than a minute' : 'Less than a minute ago';\n        } else if (diff === 1) { // 1 minute\n            return direction ? 'In about 1 minute' : 'About a minute ago';\n        } else if (diff < 60) { // Minutes\n            return direction ? `In ${diff} minutes` : `${diff} minutes ago`;\n        } else if (diff < 24 * 60) { // Hours\n            const hours = Math.floor(diff / 60);\n            return direction\n                ? `In ${hours} hour${hours === 1 ? '' : 's'}`\n                : `${hours} hour${hours === 1 ? '' : 's'} ago`;\n        } else if (diff < 30 * 24 * 60) { // Days\n            const days = Math.floor(diff / (24 * 60));\n            return direction\n                ? `In ${days} day${days === 1 ? '' : 's'}`\n                : `${days} day${days === 1 ? '' : 's'} ago`;\n        } else if (diff < 365 * 24 * 60) { // Months\n            const months = Math.floor(diff / (30 * 24 * 60));\n            return direction\n                ? `In ${months} month${months === 1 ? '' : 's'}`\n                : `${months} month${months === 1 ? '' : 's'} ago`;\n        } else if (diff >= 365 * 24 * 60) { // Years\n            const years = Math.floor(diff / (365 * 24 * 60));\n            return direction\n                ? `In ${years} year${years === 1 ? '' : 's'}`\n                : `${years} year${years === 1 ? '' : 's'} ago`;\n        }\n        return 'Just now';\n    }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n    name: 'driverFormat'\n})\nexport class DriverFormatPipe implements PipeTransform {\n    public transform(format: string): string {\n        if (typeof format !== 'string') return '';\n        if ((format || '').indexOf('/') >= 0) {\n            const parts = format.split('/');\n            parts.splice(0, 1);\n            return `<div class=\"formatted-driver-name\">${parts\n                .map(i => `<div class=\"name-part\">${i}</div>`)\n                .join(\n                    '<div class=\"icon\"><i class=\"material-icons\">keyboard_arrow_right</i></div>'\n                )}</div>`;\n        }\n        return format || '';\n    }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n    name: 'formatList'\n})\nexport class FormatListPipe implements PipeTransform {\n    public transform(value: string[]): any {\n        return value.join('\\n');\n    }\n}\n","\nimport { NgModule, Type } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { ScrollingModule } from '@angular/cdk/scrolling';\nimport { RouterModule } from '@angular/router';\n\nimport { ASpinnerModule } from '@acaprojects/ngx-spinners';\nimport { APipesModule } from '@acaprojects/ngx-pipes';\nimport { ACustomEventsModule } from '@acaprojects/ngx-custom-events';\nimport { ComposerModule } from '@placeos/composer';\n\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\n// import { MatProgressBarModule } from '@angular/material/progress-bar';\nimport { MatAutocompleteModule } from '@angular/material/autocomplete';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { MatButtonToggleModule } from '@angular/material/button-toggle';\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatExpansionModule } from '@angular/material/expansion';\nimport { CdkTableModule } from '@angular/cdk/table';\n\nimport { BaseDirective } from './globals/base.directive';\nimport { ContextMenuComponent } from './components/context-menu/context-menu.component';\nimport { ItemDisplayComponent } from './components/item-display/item-display.component';\nimport { LOGIN_COMPONENTS } from './components/login';\nimport { SearchbarComponent } from './components/searchbar/searchbar.component';\nimport { SidebarComponent } from './components/sidebar/sidebar.component';\nimport { BaseRootComponent } from './components/base-root.component';\nimport { IconComponent } from './components/icon/icon.component';\nimport { TerminalComponent } from './components/terminal/terminal.component';\n\nimport { SettingsFieldComponent } from './components/custom-fields/settings-field/settings-field.component';\nimport { ItemSearchFieldComponent } from './components/custom-fields/item-search-field/item-search-field.component';\nimport { DateFieldComponent } from './components/custom-fields/date-field/date-field.component';\nimport { TimeFieldComponent } from './components/custom-fields/time-field/time-field.component';\nimport { SystemExecFieldComponent } from './components/custom-fields/system-exec-field/system-exec-field.component';\n\nimport { SystemFormComponent } from './components/forms/system-form/system-form.component';\nimport { ModuleFormComponent } from './components/forms/module-form/module-form.component';\nimport { ZoneFormComponent } from './components/forms/zone-form/zone-form.component';\nimport { DriverFormComponent } from './components/forms/driver-form/driver-form.component';\nimport { UserFormComponent } from './components/forms/user-form/user-form.component';\nimport { DomainFormComponent } from './components/forms/domain-form/domain-form.component';\nimport { ApplicationFormComponent } from './components/forms/application-form/application-form.component';\nimport { RepositoryFormComponent } from './components/forms/repository-form/repository-form.component';\nimport { TriggerFormComponent } from './components/forms/trigger-form/trigger-form.component';\nimport { TriggerConditionFormComponent } from './components/forms/trigger-condition-form/trigger-condition-form.component';\nimport { TriggerConditionComparisonFormComponent } from './components/forms/trigger-condition-form/comparison-form/comparison-form.component';\nimport { TriggerConditionTimeFormComponent } from './components/forms/trigger-condition-form/time-form/time-form.component';\nimport { TriggerActionFormComponent } from './components/forms/trigger-action-form/trigger-action-form.component';\nimport { SystemTriggerFormComponent } from './components/forms/system-trigger-form/system-trigger-form.component';\n\nimport { DriverFormatPipe } from './pipes/driver-format.pipe';\nimport { DateFromPipe } from './pipes/date-from.pipe';\nimport { FormatListPipe } from './pipes/format-list.pipe';\nimport { OauthSourceFormComponent } from './components/forms/oauth-source-form/oauth-source-form.component';\nimport { LdapSourceFormComponent } from './components/forms/ldap-source-form/ldap-source-form.component';\nimport { SamlSourceFormComponent } from './components/forms/saml-source-form/saml-source-form.component';\nimport { ObjectListFieldComponent } from './components/custom-fields/object-list-field/object-list-field.component';\nimport { DebugOutputComponent } from './components/debug-output/debug-output.component';\nimport { SettingsFormComponent } from './components/forms/settings-form/settings-form.component';\nimport { ADatePickerModule } from '@acaprojects/ngx-date-picker';\n\nconst FORM_COMPONENTS: Type<any>[] = [\n    SystemFormComponent,\n    ModuleFormComponent,\n    ZoneFormComponent,\n    DriverFormComponent,\n    UserFormComponent,\n    DomainFormComponent,\n    ApplicationFormComponent,\n    TriggerFormComponent,\n    RepositoryFormComponent,\n    TriggerConditionFormComponent,\n    TriggerActionFormComponent,\n    SystemTriggerFormComponent,\n    OauthSourceFormComponent,\n    LdapSourceFormComponent,\n    SamlSourceFormComponent,\n    SettingsFormComponent,\n];\n\nconst COMPONENTS: Type<any>[] = [\n    BaseDirective,\n    BaseRootComponent,\n    ItemDisplayComponent,\n    SearchbarComponent,\n    SidebarComponent,\n    ...LOGIN_COMPONENTS,\n    IconComponent,\n    ...FORM_COMPONENTS,\n    TerminalComponent,\n    DebugOutputComponent,\n];\n\nconst PIPES: Type<any>[] = [\n    DriverFormatPipe,\n    DateFromPipe,\n    FormatListPipe,\n];\n\nconst ENTRY_COMPONENT: Type<any>[] = [\n    ItemSearchFieldComponent,\n    SettingsFieldComponent,\n    DateFieldComponent,\n    TimeFieldComponent,\n    ContextMenuComponent,\n    SystemExecFieldComponent,\n    ObjectListFieldComponent,\n];\n\nconst MATERIAL_MODULES: any[] = [\n    MatButtonModule,\n    MatButtonToggleModule,\n    MatSnackBarModule,\n    MatDialogModule,\n    MatFormFieldModule,\n    MatInputModule,\n    MatProgressSpinnerModule,\n    // MatProgressBarModule,\n    MatAutocompleteModule,\n    MatSelectModule,\n    MatTooltipModule,\n    MatMenuModule,\n    MatCheckboxModule,\n    MatSlideToggleModule,\n    MatChipsModule,\n    MatTabsModule,\n    MatCardModule,\n    MatExpansionModule,\n    CdkTableModule\n];\n\n@NgModule({\n    declarations: [\n        ...COMPONENTS,\n        ...PIPES,\n        ...ENTRY_COMPONENT,\n        TriggerConditionComparisonFormComponent,\n        TriggerConditionTimeFormComponent,\n    ],\n    imports: [\n        CommonModule,\n        ASpinnerModule,\n        FormsModule,\n        APipesModule,\n        ReactiveFormsModule,\n        ACustomEventsModule,\n        ADatePickerModule,\n        ScrollingModule,\n        ComposerModule,\n        ...MATERIAL_MODULES,\n        RouterModule.forChild([])\n    ],\n    exports: [\n        ASpinnerModule,\n        APipesModule,\n        ACustomEventsModule,\n        ADatePickerModule,\n        ComposerModule,\n        ...COMPONENTS,\n        ...PIPES,\n        ...ENTRY_COMPONENT,\n        ...MATERIAL_MODULES\n    ]\n})\nexport class SharedContentModule {}\n","import { EngineModule } from '@placeos/ts-client';\n\nimport { HashMap } from './types.utilities';\n\n/**\n * Convert map into a query string\n * @param map Key value pairs to convert\n */\nexport function toQueryString(map: HashMap) {\n    let str = '';\n    if (map) {\n        for (const key in map) {\n            if (map.hasOwnProperty(key) && map[key] !== undefined && map[key] !== null) {\n                str += `${str ? '&' : ''}${key}=${map[key]}`;\n            }\n        }\n    }\n    return str;\n}\n\n/**\n * Calculate the index of the module\n * @param module_list List of modules in the parent system\n * @param module Module to work out index\n */\nexport function calculateModuleIndex(module_list: EngineModule[], module: EngineModule): number {\n    const driver = module.driver || { class_name: 'System' };\n    const module_class = module.custom_name || driver.class_name;\n    const modules_with_class = module_list.filter(mod => {\n        const d = mod.driver || { class_name: 'System' };\n        const mod_class = mod.custom_name || d.class_name;\n        return mod_class === module_class;\n    });\n    return Math.max(1, modules_with_class.findIndex(mod => mod.id === module.id) + 1);\n}\n","import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { EngineApplication } from '@placeos/ts-client';\n\nimport { FormDetails } from './systems.utilities';\nimport { HashMap } from '../types.utilities';\n\nexport function generateApplicationFormFields(app: EngineApplication): FormDetails {\n    if (!app) {\n        throw Error('No domain application passed to generate form fields');\n    }\n    const fields: HashMap<FormControl> = {\n        name: new FormControl(app.name || '', [Validators.required]),\n        scopes: new FormControl(app.scopes || ''),\n        skip_authorization: new FormControl(app.skip_authorization || ''),\n        redirect_uri: new FormControl(app.redirect_uri || '')\n    };\n    const subscriptions = [];\n    for (const key in fields) {\n        if (fields[key] && key.indexOf('confirm') < 0) {\n            subscriptions.push(\n                fields[key].valueChanges.subscribe(value =>\n                    app.storePendingChange(key as any, value)\n                )\n            );\n        }\n    }\n    return {\n        form: new FormGroup(fields),\n        subscriptions\n    };\n}\n","import { EngineOAuthSource, EngineLDAPSource, EngineSAMLSource } from '@placeos/ts-client';\n\nimport { FormDetails } from './systems.utilities';\nimport { HashMap } from '../types.utilities';\nimport { Validators, FormControl, FormGroup } from '@angular/forms';\n\n/**\n * Generate form controls for an OAuth authentication source\n * @param auth_source Auth source to apply changes to\n */\nexport function generateOAuthSourceForm(auth_source: EngineOAuthSource): FormDetails {\n    if (!auth_source) {\n        throw Error('No OAuth source passed to generate form fields');\n    }\n    const fields: HashMap<FormControl> = {\n        name: new FormControl(auth_source.name || '', [Validators.required]),\n        client_id: new FormControl(auth_source.client_id || ''),\n        client_secret: new FormControl(auth_source.client_secret || ''),\n        info_mappings: new FormControl(auth_source.info_mappings || {}),\n        site: new FormControl(auth_source.site || ''),\n        authorize_url: new FormControl(auth_source.authorize_url || ''),\n        token_method: new FormControl(auth_source.token_method || 'post'),\n        auth_scheme: new FormControl(auth_source.auth_scheme || 'request_body'),\n        token_url: new FormControl(auth_source.token_url || ''),\n        scope: new FormControl(auth_source.scope || ''),\n        raw_info_url: new FormControl(auth_source.raw_info_url || '')\n    };\n    const subscriptions = [];\n    for (const key in fields) {\n        if (fields[key] && key.indexOf('confirm') < 0) {\n            subscriptions.push(\n                fields[key].valueChanges.subscribe(value =>\n                    auth_source.storePendingChange(key as any, value)\n                )\n            );\n        }\n    }\n    return {\n        form: new FormGroup(fields),\n        subscriptions\n    };\n}\n\n/**\n * Generate form controls for an SAML authentication source\n * @param auth_source Auth source to apply changes to\n */\nexport function generateSAMLSourceForm(auth_source: EngineSAMLSource): FormDetails {\n    if (!auth_source) {\n        throw Error('No OAuth source passed to generate form fields');\n    }\n    const fields: HashMap<FormControl> = {\n        name: new FormControl(auth_source.name || '', [Validators.required]),\n        issuer: new FormControl(auth_source.issuer || '', [Validators.required]),\n        idp_sso_target_url: new FormControl(auth_source.issuer || '', [Validators.required]),\n        name_identifier_format: new FormControl(auth_source.name_identifier_format || '', [\n            Validators.required\n        ]),\n        assertion_consumer_service_url: new FormControl(\n            auth_source.assertion_consumer_service_url || '',\n            [Validators.required]\n        ),\n        request_attributes: new FormControl(auth_source.request_attributes || [], [\n            Validators.required\n        ]),\n        idp_sso_target_url_runtime_params: new FormControl(\n            auth_source.idp_sso_target_url_runtime_params || {}\n        ),\n        uid_attribute: new FormControl(auth_source.uid_attribute || ''),\n        idp_cert: new FormControl(auth_source.idp_cert || ''),\n        idp_cert_fingerprint: new FormControl(auth_source.idp_cert_fingerprint || ''),\n        attribute_service_name: new FormControl(auth_source.attribute_service_name || ''),\n        attribute_statements: new FormControl(auth_source.attribute_statements || {}),\n        idp_slo_target_url: new FormControl(auth_source.idp_slo_target_url || ''),\n        slo_default_relay_state: new FormControl(auth_source.slo_default_relay_state || '')\n    };\n    const subscriptions = [];\n    for (const key in fields) {\n        if (fields[key] && key.indexOf('confirm') < 0) {\n            subscriptions.push(\n                fields[key].valueChanges.subscribe(value =>\n                    auth_source.storePendingChange(key as any, value)\n                )\n            );\n        }\n    }\n    return {\n        form: new FormGroup(fields),\n        subscriptions\n    };\n}\n\n/**\n * Generate form controls for an LDAP authentication source\n * @param auth_source Auth source to apply changes to\n */\nexport function generateLDAPSourceForm(auth_source: EngineLDAPSource): FormDetails {\n    if (!auth_source) {\n        throw Error('No OAuth source passed to generate form fields');\n    }\n    const fields: HashMap<FormControl> = {\n        name: new FormControl(auth_source.name || '', [Validators.required]),\n        host: new FormControl(auth_source.host || '', [Validators.required]),\n        port: new FormControl(auth_source.port || '', [Validators.min(1), Validators.max(65535)]),\n        auth_method: new FormControl(auth_source.auth_method || 'plain'),\n        uid: new FormControl(auth_source.uid || ''),\n        base: new FormControl(auth_source.base || '', [Validators.required]),\n        bind_dn: new FormControl(auth_source.bind_dn || ''),\n        password: new FormControl(auth_source.password || ''),\n        filter: new FormControl(auth_source.filter || '')\n    };\n    const subscriptions = [];\n    for (const key in fields) {\n        if (fields[key] && key.indexOf('confirm') < 0) {\n            subscriptions.push(\n                fields[key].valueChanges.subscribe(value =>\n                    auth_source.storePendingChange(key as any, value)\n                )\n            );\n        }\n    }\n    return {\n        form: new FormGroup(fields),\n        subscriptions\n    };\n}\n","import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { EngineDomain } from '@placeos/ts-client';\n\nimport { FormDetails } from './systems.utilities';\nimport { HashMap } from '../types.utilities';\n\nexport function generateDomainFormFields(authority: EngineDomain): FormDetails {\n    if (!authority) {\n        throw Error('No User passed to generate form fields');\n    }\n    const fields: HashMap<FormControl> = {\n        name: new FormControl(authority.name || '', [Validators.required]),\n        dom: new FormControl(authority.dom || '', [Validators.required]),\n        login_url: new FormControl(authority.login_url || ''),\n        logout_url: new FormControl(authority.logout_url || ''),\n        config: new FormControl(authority.config || ''),\n        internals: new FormControl(authority.internals || ''),\n        description: new FormControl(authority.description || ''),\n    };\n    const subscriptions = [];\n    for (const key in fields) {\n        if (fields[key] && key.indexOf('confirm') < 0) {\n            subscriptions.push(\n                fields[key].valueChanges.subscribe(value =>\n                    authority.storePendingChange(key as any, value)\n                )\n            );\n        }\n    }\n    return {\n        form: new FormGroup(fields),\n        subscriptions\n    };\n}\n","\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { EngineDriver, EngineRepository, EngineDriverRole } from '@placeos/ts-client';\n\nimport { FormDetails } from './systems.utilities';\nimport { HashMap } from '../types.utilities';\n\nexport interface DriverInitData {\n    repo: EngineRepository;\n    driver: EngineDriver;\n}\n\nexport function generateDriverFormFields(driver: EngineDriver): FormDetails {\n    if (!driver) {\n        throw Error('No Driver passed to generate form fields');\n    }\n    const fields: HashMap<FormControl> = {\n        id: new FormControl(driver.id || ''),\n        repository_id: new FormControl(driver.repository_id),\n        file_name: new FormControl(driver.file_name),\n        commit: new FormControl(driver.commit),\n        name: new FormControl(driver.name || '', [Validators.required]),\n        role: new FormControl(driver.role || EngineDriverRole.Logic),\n        module_name: new FormControl(driver.module_name || '', [Validators.required]),\n        default_uri: new FormControl(driver.default_uri || ''),\n        default_port: new FormControl(driver.default_port || 1, [Validators.min(1), Validators.max(65535)]),\n        class_name: new FormControl(driver.class_name || ''),\n        description: new FormControl(driver.description || ''),\n        ignore_connected: new FormControl(driver.ignore_connected || false),\n        settings: new FormControl('')\n    };\n    const subscriptions = [];\n    for (const key in fields) {\n        if (fields[key] && key.indexOf('settings') < 0) {\n            subscriptions.push(\n                fields[key].valueChanges.subscribe(value =>\n                    driver.storePendingChange(key as any, value)\n                )\n            );\n        }\n    }\n    if (driver.id) {\n        delete fields.class_name;\n        delete fields.role;\n    }\n    return {\n        form: new FormGroup(fields),\n        subscriptions\n    };\n}\n","\nimport { FormControl, Validators, FormGroup } from '@angular/forms';\nimport { EngineModule, EngineSystem, EngineDriver, EncryptionLevel, EngineDriverRole } from '@placeos/ts-client';\n\nimport { FormDetails, validateYAML } from './systems.utilities';\nimport { HashMap } from '../types.utilities';\nimport { validateURI, validateIpAddress } from '../validation.utilities';\n\nexport function generateModuleFormFields(module: EngineModule): FormDetails {\n    if (!module) {\n        throw Error('No Module passed to generate form fields');\n    }\n    const fields: HashMap<FormControl> = {\n        ip: new FormControl(module.ip || '', [validateIpAddress]),\n        port: new FormControl(module.port || '', [Validators.min(1), Validators.max(65535)]),\n        tls: new FormControl(module.tls || false),\n        udp: new FormControl(module.udp || false),\n        makebreak: new FormControl(module.makebreak || false),\n        ignore_connected: new FormControl(module.ignore_connected || false),\n        uri: new FormControl(module.uri || '', [validateURI]),\n        notes: new FormControl(module.notes || ''),\n        name: new FormControl(module.name || ''),\n        custom_name: new FormControl(module.custom_name || ''),\n        system: new FormControl(module.system),\n        driver: new FormControl('', [Validators.required])\n    };\n    const subscriptions = [];\n    for (const key in fields) {\n        if (fields[key] && key.indexOf('settings') < 0 && key.indexOf('driver') < 0) {\n            subscriptions.push(\n                fields[key].valueChanges.subscribe(value =>{\n                    console.log('Change:', key, value, fields[key]);\n                    module.storePendingChange(key as any, value);\n                })\n            );\n        }\n    }\n    if (!module.id) {\n        subscriptions.push(\n            fields.system.valueChanges.subscribe((value: EngineSystem) =>\n                module.storePendingChange('control_system_id', value.id)\n            )\n        );\n        subscriptions.push(\n            fields.driver.valueChanges.subscribe((value: EngineDriver) =>{\n                module.storePendingChange('driver_id', value.id);\n                fields.name.setValue(value.name || value.module_name);\n                fields.uri.setValue(value.default_uri);\n                fields.port.setValue(value.default_port || 1)\n                resetModuleFormValidators(fields);\n                switch (value.role) {\n                    case EngineDriverRole.Websocket:\n                        fields.uri.setValidators([Validators.required, validateURI]);\n                        fields.udp.setValue(false);\n                        break;\n                    case EngineDriverRole.SSH:\n                        fields.ip.setValidators([validateIpAddress, Validators.required]);\n                        fields.port.setValidators([Validators.min(1), Validators.max(65535), Validators.required]);\n                        break;\n                    case EngineDriverRole.Logic:\n                        fields.system.setValidators([Validators.required])\n                        break;\n                }\n            })\n        );\n    } else {\n        delete fields.system;\n        delete fields.driver;\n    }\n    return {\n        form: new FormGroup(fields),\n        subscriptions\n    };\n}\n\nexport function resetModuleFormValidators(fields: HashMap<FormControl>) {\n    fields.ip.setValidators([validateIpAddress]),\n    fields.port.setValidators([Validators.min(1), Validators.max(65535)]),\n    fields.uri.setValidators([Validators.pattern('\\w+:(\\/?\\/?)[^\\s]+')]),\n    fields.settings_string.setValidators([validateYAML]),\n    fields.system.setValidators([]),\n    fields.driver.setValidators([Validators.required])\n}\n","\nimport { Validators, FormControl, FormGroup } from '@angular/forms';\nimport { HashMap, EngineRepository, EngineRepositoryType } from '@placeos/ts-client';\n\nimport { FormDetails } from './systems.utilities';\n\n/**\n * Generate angular form controls\n * @param repository Trigger to generate the form controls for\n */\nexport function generateRepositoryFormFields(repository: EngineRepository): FormDetails {\n    if (!repository) {\n        throw Error('No Zone passed to generate form fields');\n    }\n    const fields: HashMap<FormControl> = {\n        name: new FormControl(repository.name || '', [Validators.required]),\n        folder_name: new FormControl(repository.folder_name || '', [Validators.required]),\n        description: new FormControl(repository.description || ''),\n        uri: new FormControl(repository.uri || '', [Validators.required]),\n        type: new FormControl(repository.type || EngineRepositoryType.Driver),\n    };\n    const subscriptions = [];\n    for (const key in fields) {\n        if (fields[key] && key.indexOf('settings') < 0) {\n            subscriptions.push(\n                fields[key].valueChanges.subscribe(value =>\n                    repository.storePendingChange(key as any, value)\n                )\n            );\n        }\n    }\n    if (!repository.id) {\n        repository.storePendingChange('commit_hash', 'head');\n    } else {\n        delete fields.type;\n        delete fields.folder_name;\n    }\n    return {\n        form: new FormGroup(fields),\n        subscriptions\n    };\n}\n","import { EngineSystem, EngineZone, EncryptionLevel } from '@placeos/ts-client';\nimport { FormGroup, FormControl, Validators, AbstractControl } from '@angular/forms';\nimport { Subscription } from 'rxjs';\n\nimport { HashMap } from '../types.utilities';\n\nimport * as yaml from 'js-yaml';\n\nexport interface FormDetails {\n    form: FormGroup;\n    subscriptions: Subscription[];\n}\n\nexport function validateYAML(control: AbstractControl) {\n    const value = control.value || '';\n    let message = '';\n    try {\n        yaml.safeLoad(value, { strict: true });\n    } catch (e) {\n        console.error(e);\n        message = e.message;\n    }\n    return message ? { yaml: message } : null;\n}\n\nexport const URL_PATTERN =\n    '^(?:(?:(?:https?|ftp):)?//)(?:S+(?::S*)?@)?(?:(?!(?:10|127)(?:.d{1,3}){3})(?!(?:169.254|192.168)(?:.d{1,3}){2})(?!172.(?:1[6-9]|2d|3[0-1])(?:.d{1,3}){2})(?:[1-9]d?|1dd|2[01]d|22[0-3])(?:.(?:1?d{1,2}|2[0-4]d|25[0-5])){2}(?:.(?:[1-9]d?|1dd|2[0-4]d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:.(?:[a-z\\u00a1-\\uffff]{2,})))(?::d{2,5})?(?:[/?#]S*)?$';\n\nexport function generateSystemsFormFields(system: EngineSystem): FormDetails {\n    if (!system) {\n        throw Error('No System passed to generate form fields');\n    }\n    const fields: HashMap<FormControl> = {\n        name: new FormControl(system.name || '', [Validators.required]),\n        email: new FormControl(system.email || '', [Validators.email]),\n        support_url: new FormControl(system.support_url || '', [Validators.pattern(URL_PATTERN)]),\n        installed_ui_devices: new FormControl(system.installed_ui_devices || 0, [\n            Validators.pattern('[0-9]*')\n        ]),\n        feature_list: new FormControl(system.features ? system.features.split(' ') : []),\n        capacity: new FormControl(system.capacity || 0, [Validators.pattern('[0-9]*')]),\n        bookable: new FormControl(system.bookable || false),\n        description: new FormControl(system.description || ''),\n        map_id: new FormControl(system.map_id || ''),\n        zone: new FormControl('', [Validators.required])\n    };\n    const subscriptions = [];\n    for (const key in fields) {\n        if (fields[key] && key.indexOf('settings') < 0) {\n            subscriptions.push(\n                fields[key].valueChanges.subscribe(value =>\n                    system.storePendingChange(key as any, value)\n                )\n            );\n        }\n    }\n    if (!system.id) {\n        subscriptions.push(\n            fields.zone.valueChanges.subscribe((value: EngineZone) =>\n                system.storePendingChange('zones', [value.id])\n            )\n        );\n    } else {\n        delete fields.zone;\n    }\n    return {\n        form: new FormGroup(fields),\n        subscriptions\n    };\n}\n","import { Validators, FormControl, FormGroup, AbstractControl } from '@angular/forms';\nimport {\n    EngineTrigger,\n    HashMap,\n    TriggerStatusVariable,\n    TriggerConditionOperator,\n    TriggerComparison,\n    TriggerTimeCondition,\n    TriggerAtTimeCondition,\n    TriggerCronTimeCondition,\n    TriggerFunction,\n    TriggerMailer\n} from '@placeos/ts-client';\n\nimport { FormDetails } from './systems.utilities';\n\nimport * as dayjs from 'dayjs';\n\n/**\n * Generate angular form controls\n * @param trigger Trigger to generate the form controls for\n */\nexport function generateTriggerFormFields(trigger: EngineTrigger): FormDetails {\n    if (!trigger) {\n        throw Error('No Zone passed to generate form fields');\n    }\n    const fields: HashMap<FormControl> = {\n        name: new FormControl(trigger.name || '', [Validators.required]),\n        description: new FormControl(trigger.description || ''),\n        enable_webhook: new FormControl(trigger.enable_webhook || '')\n    };\n    const subscriptions = [];\n    for (const key in fields) {\n        if (fields[key] && key.indexOf('settings') < 0) {\n            subscriptions.push(\n                fields[key].valueChanges.subscribe(value =>\n                    trigger.storePendingChange(key as any, value)\n                )\n            );\n        }\n    }\n    return {\n        form: new FormGroup(fields),\n        subscriptions\n    };\n}\n/**\n * Generate angular form controls\n * @param trigger Trigger to generate the form controls for\n */\nexport function generateTriggerSettingsFormFields(trigger: EngineTrigger): FormDetails {\n    if (!trigger) {\n        throw Error('No Zone passed to generate form fields');\n    }\n    const fields: HashMap<FormControl> = {\n        name: new FormControl(trigger.name || ''),\n        triggered: new FormControl(+trigger.activated_count > 0),\n        enabled: new FormControl(!!trigger.enabled),\n        important: new FormControl(!!trigger.important)\n    };\n    const subscriptions = [];\n    for (const key in fields) {\n        if (fields[key] && key.indexOf('settings') < 0) {\n            subscriptions.push(\n                fields[key].valueChanges.subscribe(value =>\n                    trigger.storePendingChange(key as any, value)\n                )\n            );\n        }\n    }\n    return {\n        form: new FormGroup(fields),\n        subscriptions\n    };\n}\n\n/**\n * Validate a side of the comparison pair\n * @param control Control holding the comparison\n */\nexport function validateCompare(control: AbstractControl) {\n    const form = control.parent;\n    if (\n        form &&\n        form instanceof FormGroup &&\n        form.controls.condition_type &&\n        form.controls.condition_type.value === 'compare'\n    ) {\n        if (control.value instanceof Object) {\n            const value: TriggerStatusVariable = control.value;\n            return !value.mod ? { module: true } : !value.status ? { status: true } : null;\n        } else {\n            return !control.value ? { required: true } : null;\n        }\n    }\n    return null;\n}\n\n/**\n * Generate form controls for creating a trigger condition\n */\nexport function generateTriggerConditionForm(\n    condition: TriggerComparison | TriggerTimeCondition = {} as any\n) {\n    const type = (condition as TriggerTimeCondition).type ? 'time' : 'compare';\n    const left =\n        typeof (condition as TriggerComparison).left === 'object'\n            ? { ...((condition as TriggerComparison).left as any) }\n            : (condition as TriggerComparison).left;\n    const right =\n        typeof (condition as TriggerComparison).right === 'object'\n            ? { ...((condition as TriggerComparison).right as any) }\n            : (condition as TriggerComparison).right;\n    const fields: HashMap<FormControl> = {\n        condition_type: new FormControl(type),\n        left: new FormControl({ ...(left || {}) }, [validateCompare]),\n        operator: new FormControl(\n            (condition as TriggerComparison).operator || TriggerConditionOperator.EQ\n        ),\n        right: new FormControl(right || undefined, [validateCompare]),\n        time_type: new FormControl((condition as TriggerTimeCondition).type || 'at'),\n        time: new FormControl(\n            (+(condition as TriggerAtTimeCondition).time || 0) * 1000 || dayjs().valueOf()\n        ),\n        cron: new FormControl((condition as TriggerCronTimeCondition).cron || undefined)\n    };\n    const subscriptions = [];\n    return {\n        form: new FormGroup(fields),\n        subscriptions\n    };\n}\n\n/**\n * Validate form control storing a list of emails\n * @param control Form control to valid\n */\nexport function validateEmailList(control: AbstractControl) {\n    if (control.value && control.value instanceof Array) {\n        const value: string[] = control.value;\n        return value.reduce(\n            (valid, email) => valid && !Validators.email({ value: email } as any),\n            true\n        )\n            ? null\n            : { email: true };\n    }\n    return null;\n}\n\n/**\n * Generate form controls for creating a trigger action\n */\nexport function generateTriggerActionForm(action: TriggerFunction | TriggerMailer = {} as any) {\n    const type = action && (action as TriggerMailer).emails ? 'email' : 'function';\n    const fields: HashMap<FormControl> = {\n        action_type: new FormControl(type),\n        emails: new FormControl((action as TriggerMailer).emails || [], [\n            Validators.min(1),\n            Validators.required,\n            validateEmailList\n        ]),\n        content: new FormControl((action as TriggerMailer).emails || '', [Validators.required]),\n        method_call: new FormControl((action as TriggerFunction) || null, [])\n    };\n    const subscriptions = [];\n    return {\n        form: new FormGroup(fields),\n        subscriptions\n    };\n}\n","import { FormControl, FormGroup, Validators, AbstractControl } from '@angular/forms';\nimport { EngineUser } from '@placeos/ts-client';\n\nimport { FormDetails } from './systems.utilities';\nimport { HashMap } from '../types.utilities';\n\nexport function validateMatch(name: string) {\n    return (control: AbstractControl) => {\n        const group = control.parent;\n        if (group) {\n            const value = group.controls[name] ? group.controls[name].value : '';\n            return value !== control.value ? { match: true } : null;\n        }\n        return null;\n    }\n}\n\nexport function generateUserFormFields(user: EngineUser): FormDetails {\n    if (!user) {\n        throw Error('No User passed to generate form fields');\n    }\n    const fields: HashMap<FormControl> = {\n        name: new FormControl(user.name || '', [Validators.required]),\n        email: new FormControl(user.email || '', [Validators.email, Validators.required]),\n        staff_id: new FormControl(user.staff_id || ''),\n        support: new FormControl(user.support || false),\n        sys_admin: new FormControl(user.sys_admin || false),\n        password: new FormControl('', !user.id ? [Validators.required] : undefined),\n        confirm_password: new FormControl('', [validateMatch('password')]),\n    };\n    const subscriptions = [];\n    for (const key in fields) {\n        if (fields[key] && key.indexOf('confirm') < 0) {\n            subscriptions.push(\n                fields[key].valueChanges.subscribe(value =>\n                    user.storePendingChange(key as any, value)\n                )\n            );\n        }\n    }\n    subscriptions.push(fields.password.valueChanges.subscribe(() => {\n        fields.confirm_password.updateValueAndValidity();\n    }));\n    return {\n        form: new FormGroup(fields),\n        subscriptions\n    };\n}\n","import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { EngineZone } from '@placeos/ts-client';\n\nimport { FormDetails } from './systems.utilities';\nimport { HashMap } from '../types.utilities';\n\nexport function generateZoneFormFields(zone: EngineZone): FormDetails {\n    if (!zone) {\n        throw Error('No Zone passed to generate form fields');\n    }\n    const fields: HashMap<FormControl> = {\n        id: new FormControl(zone.id),\n        name: new FormControl(zone.name || '', [Validators.required]),\n        tag_list: new FormControl(zone.tags ? zone.tags.split(',') : []),\n        description: new FormControl(zone.description || ''),\n        parent_zone: new FormControl(null),\n        parent_id: new FormControl(zone.parent_id)\n    };\n    const subscriptions = [];\n    for (const key in fields) {\n        if (fields[key] && zone.hasOwnProperty(key) && key.indexOf('settings') < 0) {\n            subscriptions.push(\n                fields[key].valueChanges.subscribe(value =>\n                    {\n                        zone.storePendingChange(key as any, value)}\n                )\n            );\n        }\n    }\n    subscriptions.push(\n        fields.tag_list.valueChanges.subscribe((value: string[]) =>\n            zone.storePendingChange('tags', value.join(','))\n        )\n    );\n    subscriptions.push(\n        fields.parent_zone.valueChanges.subscribe((zone: EngineZone) =>\n            {\n                console.log('Zone:', zone);\n                fields.parent_id.setValue(zone.id);\n            }\n        )\n    );\n    return {\n        form: new FormGroup(fields),\n        subscriptions\n    };\n}\n","import { HashMap, Point } from './types.utilities';\n\nimport * as dayjs from 'dayjs';\nimport * as merge from 'deepmerge';\nimport * as yaml from 'js-yaml';\n\nexport function getItemWithKeys(keys: string[], map: HashMap) {\n    const key = keys.shift();\n    if (map[key]) {\n        return keys.length > 0 ? getItemWithKeys(keys, map[key]) : map[key];\n    }\n    return null;\n}\n\n/**\n * Checks whether the platform is a mobile device.\n */\nexport function isMobileModule(): boolean {\n    const r = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i;\n    return !!navigator.userAgent.match(r);\n}\n\n/**\n * Checks whether the browser is Mobile Safari.\n */\nexport function isMobileSafari(): boolean {\n    const agent = navigator.userAgent;\n    return !!(\n        agent.match(/iPhone|iPad|iPod/) &&\n        agent.match(/AppleWebKit/) &&\n        !agent.match('CriOS')\n    );\n}\n\n/**\n * Checks whether the browser is Android Chrome.\n */\nexport function isAndroidChrome(): boolean {\n    const agent = navigator.userAgent;\n    return !!(agent.match(/Android/) && agent.match(/Chrome/));\n}\n\n/**\n * Generate a random number\n * @param ceil Biggest value to generate not inclusive\n * @param floor Smallest value to generate. Defaults to 0\n */\nexport function randomInt(ceil: number, floor: number = 0) {\n    return Math.floor(Math.random() * (ceil - floor)) + floor;\n}\n\n/**\n * Generate string representation of a number with zeros padding the length\n * @param value Number to pad with zeros\n * @param length Length of the resulting string\n */\nexport function padZero(value: number, length: number): string {\n    let str = value.toString();\n    while (str.length < length) {\n        str = '0' + str;\n    }\n    return str;\n}\n\n/**\n * Remove duplicates from the given array\n * @param array List of items to remove duplicates from\n * @param key Key on array objects to compare for uniqueness\n */\nexport function unique(array: any[], key: string = '') {\n    return array.filter((element, index) =>\n        (key\n            ? array.findIndex(i => i[key] === element[key])\n            : array.findIndex(item => item === element)) === index\n    );\n}\n\n/**\n * Convert duration to human readable string\n * @param duration Duration in minutes\n * @param short Whether to use short form of duration words e.g. hours as h\n */\nexport function humaniseDuration(duration: number, short: boolean = false) {\n    if (!duration || duration < 0) {\n        return '';\n    }\n    const h = Math.floor(duration / 60);\n    let d = `${h >= 1 ? h + (short ? 'h' : ' hour' + (h === 1 ? '' : 's')) : ''}`;\n    if (duration % 60 !== 0) {\n        if (d) {\n            d += short ? ' ' : ', ';\n        }\n        const m = duration % 60;\n        d += `${m >= 1 ? m + (short ? 'm' : ' minute' + (m === 1 ? '' : 's')) : ''}`;\n    }\n    return d;\n}\n\n/**\n * Get a filtered list of items\n * @param filter Value to filter on\n * @param items List of results to filter\n * @param fields Fields to check for matches on each item\n */\nexport function filterList<T = HashMap>(\n    filter: string,\n    items?: T[],\n    fields: string[] = ['id']\n): T[] {\n    let results: any[];\n    // Tokenise filter string\n    const filters = (filter || '').toLowerCase().split(' ');\n    const list = {};\n    for (const f of filters) {\n        if (f) {\n            if (!list[f]) {\n                list[f] = 0;\n            }\n            list[f]++;\n        }\n    }\n    // Group similar tokens\n    const parts = [];\n    for (const f in list) {\n        if (list.hasOwnProperty(f)) {\n            parts.push({ word: f, count: list[f], regex: new RegExp(f, 'gi') });\n        }\n    }\n    parts.sort((a, b) => b.word.length - a.word.length || a.word.localeCompare(b.word));\n    const item_list = JSON.parse(JSON.stringify(items || []));\n    if (filter) {\n        results = item_list.filter(item => {\n            let match_count = 0;\n            item.match_index = 65535;\n            item.match = '';\n            const field_list = {};\n            // Initialise field match variables\n            for (const f of fields) {\n                field_list[f] = {\n                    value: (item[f] || '').toLowerCase(),\n                    index: 65536,\n                    matched: 0\n                };\n            }\n            // Search for matches with the tokenised filter string\n            for (const i of parts) {\n                if (i.word) {\n                    // Check fields for matches\n                    for (const f of fields) {\n                        const field = field_list[f];\n                        const index = field.value.indexOf(i.word);\n                        field.index = index < field.index ? index : field.index;\n                        field.matches = (field.value.match(i.regex) || []).length;\n                        field.value = field.value.replace(i.regex, ' ');\n                    }\n                    // Update token match count\n                    for (const f of fields) {\n                        const field = field_list[f];\n                        if (field.matches >= i.count) {\n                            match_count++;\n                            // Update field matches\n                            let changed = 0;\n                            const tokens = (item[`match_${f}`] || item[f] || '').split(' ');\n                            for (const k of tokens) {\n                                if (changed >= i.count) {\n                                    break;\n                                }\n                                if (k.toLowerCase().indexOf(i.word) >= 0 && k.indexOf('`') < 0) {\n                                    tokens[tokens.indexOf(k)] = k.replace(i.regex, '`$&`');\n                                    changed++;\n                                }\n                            }\n                            item[`match_${f}`] = tokens.join(' ');\n                            break;\n                        }\n                    }\n                }\n            }\n            // Get field with the most relevent match\n            for (const f of fields) {\n                const field = field_list[f];\n                if (field.index < item.match_index && field.index >= 0) {\n                    item.match_index = field.index;\n                    item.match = f;\n                }\n            }\n            return item.match_index >= 0 && item.match && match_count >= parts.length;\n        });\n    } else {\n        results = item_list;\n    }\n    // Sort by order of relevence then name\n    results.sort((a, b) => {\n        const diff = a.match_index - b.match_index;\n        return diff === 0 ? a.name.localeCompare(b.name) : diff;\n    });\n    return results;\n}\n\n/**\n * Convert a match string from `filterList` to renderable HTML\n * @param str Match string to change\n */\nexport function matchToHighlight(str: string): string {\n    if (str) {\n        str = str.replace(/\\`[a-zA-Z0-9\\@\\.\\_]*\\`/g, '<span class=\"highlight\">$&</span>');\n        str = str.replace(/\\`/g, '');\n    }\n    return str;\n}\n\n/**\n * Convert time string to ms from UTC epoch for today\n * @param time Time string in the format `HH:mm`\n */\nexport function timeToDate(time: string): number {\n    const parts = (time || '').split(':');\n    const date = dayjs()\n        .hour(+parts[0])\n        .minute(+parts[1])\n        .startOf('m');\n    return date.valueOf();\n}\n\n/**\n * Merge two YAML objects together\n * @param dest Destination object to merge\n * @param source Source object to merge\n */\nexport function mergeYAMLSettings(dest: string = '', source: string = ''): string {\n    const dest_obj = yaml.safeLoad(dest) || {};\n    const source_obj = yaml.safeLoad(source) || {};\n    const merged_obj = merge(dest_obj, source_obj);\n    return yaml.safeDump(merged_obj, { indent: 4 });\n}\n\n/** Get time format string for locale */\nexport function timeFormatString(): string {\n    return is24HourTime() ? 'HH:mm' : 'h:mm A';\n}\n\n/** Whether locale string is displayed in 24 hour time */\nexport function is24HourTime(): boolean {\n    const date = new Date();\n    const localeString = date.toLocaleTimeString();\n    return localeString.indexOf('AM') < 0 && localeString.indexOf('PM') < 0;\n}\n\n/**\n * Calculate the position counter for the given number e.g `1st`, `2nd`, `3rd`, `4th`...\n * @param num Number to caculate position for\n */\nexport function numberToPosition(num: number): string {\n    const mod_ten = num % 10;\n    if (num > 10 && num < 20) {\n        return `${num}th`;\n    } else if (mod_ten === 1) {\n        return `${num}st`;\n    } else if (mod_ten === 2) {\n        return `${num}nd`;\n    } else if (mod_ten === 3) {\n        return `${num}rd`;\n    }\n    return `${num}th`;\n}\n\n/**\n * Copy the given value to the OS Clipboard\n * @param value String to copy to the clipboard\n */\nexport function copyToClipboard(value: string) {\n    const el = document.createElement('textarea'); // Create a <textarea> element\n    el.value = value; // Set its value to the string that you want copied\n    el.setAttribute('readonly', ''); // Make it readonly to be tamper-proof\n    el.style.position = 'absolute';\n    el.style.left = '-9999px'; // Move outside the screen to make it invisible\n    document.body.appendChild(el); // Append the <textarea> element to the HTML document\n    // Check if there is any content selected previously\n    const selected =\n        document.getSelection().rangeCount > 0\n            ? document.getSelection().getRangeAt(0) // Store selection if found\n            : false; // Mark as false to know no selection existed before\n    // Select the <textarea> content\n    el.select();\n    // Copy - only works as a result of a user action (e.g. click events)\n    document.execCommand('copy');\n    document.body.removeChild(el); // Remove the <textarea> element\n    if (selected) {\n        // If a selection existed before copying\n        // Unselect everything on the HTML document\n        document.getSelection().removeAllRanges();\n        // Restore the original selection\n        document.getSelection().addRange(selected);\n    }\n}\n\n/**\n * Grab point details from mouse or touch event\n * @param event Event to grab details from\n */\nexport function eventToPoint(event: MouseEvent | TouchEvent): Point {\n    if (!event) {\n        return { x: -1, y: -1 };\n    }\n    if (event instanceof MouseEvent) {\n        return { x: event.clientX, y: event.clientY };\n    } else {\n        return event.touches && event.touches.length > 0\n            ? { x: event.touches[0].clientX, y: event.touches[0].clientY }\n            : { x: -1, y: -1 };\n    }\n}\n","import { Validators, AbstractControl } from '@angular/forms';\n\nexport const validateIpAddress = ctrl =>\n    /^(25[0-5]|2[0-4][0-9]|1?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|1?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|1?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|1?[0-9][0-9]?)$/g.test(\n        ctrl.value || '1.1.1.1'\n    )\n        ? null\n        : { pattern: true };\n\nexport const validateURI = Validators.pattern(\n    /^([a-z][a-z0-9+.-]+):(\\/\\/([^@]+@)?([a-z0-9.\\-_~]+)(:\\d+)?)?((?:[a-z0-9-._~]|%[a-f0-9]|[!$&'()*+,;=:@])+(?:\\/(?:[a-z0-9-._~]|%[a-f0-9]|[!$&'()*+,;=:@])*)*|(?:\\/(?:[a-z0-9-._~]|%[a-f0-9]|[!$&'()*+,;=:@])+)*)?(\\?(?:[a-z0-9-._~]|%[a-f0-9]|[!$&'()*+,;=:@]|[/?])+)?(\\#(?:[a-z0-9-._~]|%[a-f0-9]|[!$&'()*+,;=:@]|[/?])+)?$/gi\n);\n\nexport const validateURL = Validators.pattern(\n    /^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\.-]+)+[\\w\\-\\._~:/?#[\\]@!\\$&'\\(\\)\\*\\+,;=.]+$/g\n);\n\nexport function validateJSONString(control: AbstractControl) {\n    if (!control || !control.value) {\n        return null;\n    }\n    try {\n        const json = JSON.parse(control.value);\n    } catch (e) {\n        return { json: true };\n    }\n    return null;\n}\n","import {\n    Component,\n    OnChanges,\n    Input,\n    ViewChild,\n    ElementRef,\n    SimpleChanges,\n    EventEmitter,\n    Output\n} from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { Router, NavigationEnd } from '@angular/router';\nimport { trigger, transition, style, animate, query, stagger } from '@angular/animations';\nimport {\n    EngineResource,\n    EngineSystem,\n    EngineModule,\n    EngineZone,\n    HashMap\n} from '@placeos/ts-client';\nimport { debounceTime, distinctUntilChanged, switchMap, catchError, map } from 'rxjs/operators';\nimport { Subject, Observable, of } from 'rxjs';\n\nimport { BaseDirective } from '../../../shared/globals/base.directive';\nimport { ApplicationService } from '../../../services/app.service';\nimport { unique } from 'src/app/shared/utilities/general.utilities';\nimport { ItemCreateUpdateModalComponent } from 'src/app/overlays/item-modal/item-modal.component';\n\n@Component({\n    selector: 'global-search',\n    templateUrl: './global-search.template.html',\n    styleUrls: ['./global-search.styles.scss'],\n    animations: [\n        trigger('listAnimation', [\n            transition('* => *', [\n                // each time the binding value changes\n                query(':enter', [\n                    style({ transform: 'translateY(100%)', opacity: 0 }),\n                    stagger(50, [\n                        animate('.2s', style({ transform: 'translateY(0%)', opacity: 1 }))\n                    ])\n                ])\n            ])\n        ])\n    ]\n})\nexport class GlobalSearchComponent extends BaseDirective implements OnChanges {\n    /** Search query string */\n    @Input() public search: string;\n    /** Search query string */\n    @Output() public searchChange = new EventEmitter<string>();\n    /** Minimum number of characters needed to start a server query */\n    @Input('minLength') public min_length = 2;\n    /** Mapping of item types to routes */\n    public route_map: any = {\n        system: 'Systems',\n        device: 'Modules',\n        user: 'Users',\n        trigger: 'Triggers',\n        zone: 'Zones'\n    };\n    /** Whether search data is being loaded */\n    public loading: boolean;\n    /** Current display value of the search input field  */\n    public search_str: string;\n    /** Observable for the list of items from an API search */\n    public search_results$: Observable<EngineResource<any>[]>;\n    /** List of item */\n    public results: EngineResource<any>[];\n    /** Current page offset to get the next list of items */\n    public offset = 0;\n\n    /** Subject holding the value of the search */\n    private search$ = new Subject<string>();\n\n    @ViewChild('item_list', { static: true }) private list_el: ElementRef;\n\n    /** Whether dark mode is enabled */\n    public get dark_mode(): boolean {\n        return this._service.Users.dark_mode;\n    }\n\n    constructor(\n        private _service: ApplicationService,\n        private _dialog: MatDialog,\n        private _router: Router\n    ) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        // Listen for input changes\n        this.search_results$ = this.search$.pipe(\n            debounceTime(400),\n            distinctUntilChanged(),\n            switchMap(query_string => {\n                this.loading = true;\n                this.offset = 20;\n                return !this.min_length || query_string.length >= this.min_length\n                    ? this.queryEndpoints(query_string)\n                    : Promise.resolve([]);\n            }),\n            catchError(() => of([])),\n            map((list: EngineResource<any>[][]) => {\n                this.loading = false;\n                return [].concat.apply([], list);\n            })\n        );\n        // Process API results\n        this.subscription(\n            'search_results',\n            this.search_results$.subscribe(list => {\n                this.results = list;\n                this.results.forEach((item: HashMap) => (item.type = this.itemType(item as any)));\n            })\n        );\n        this.subscription(\n            'navigate_end',\n            this._router.events.subscribe(event => {\n                if (event instanceof NavigationEnd) {\n                    this.afterNavigate();\n                }\n            })\n        );\n    }\n\n    public ngOnChanges(change: SimpleChanges): void {\n        if (change.search) {\n            this.timeout('search', () => this.search$.next(this.search), 100);\n        }\n    }\n\n    /**\n     * Load the next page of items for each endpoint\n     */\n    public loadMoreItems() {\n        this.loading = true;\n        this.queryEndpoints(this.search, this.offset).then(\n            (results_list: EngineResource<any>[][]) => {\n                for (const list of results_list) {\n                    this.results = unique(this.results.concat(list), 'id');\n                }\n                this.results.forEach((item: HashMap) => (item.type = this.itemType(item as any)));\n                this.offset += 20;\n                this.loading = false;\n                this.timeout('load_more', () => this.atBottom(), 2000);\n            }\n        );\n    }\n\n    /**\n     * Get the type of item\n     * @param item Item the get the type of\n     */\n    public itemType(item: EngineResource<any>): 'systems' | 'modules' | 'zones' {\n        if (item instanceof EngineSystem) return 'systems';\n        if (item instanceof EngineModule) return 'modules';\n        if (item instanceof EngineZone) return 'zones';\n        return 'zones';\n    }\n\n    /**\n     * Open the modal to edit item\n     * @param item Item to edit\n     */\n    public edit(item: EngineResource<any>) {\n        if (item) {\n            this._dialog.open(ItemCreateUpdateModalComponent, {\n                height: 'auto',\n                width: 'auto',\n                maxHeight: 'calc(100vh - 2em)',\n                maxWidth: 'calc(100vw - 2em)',\n                data: {\n                    item,\n                    service: (item as any)._service\n                }\n            });\n        }\n    }\n\n    /**\n     * Handle navigation events while open\n     */\n    public afterNavigate() {\n        this.search = '';\n        this.searchChange.emit(this.search);\n    }\n\n    /**\n     * Query the multiple API endpoints\n     * @param query_str Filter string\n     * @param offset Returned page offset\n     */\n    private queryEndpoints(query_str: string, offset: number = 0) {\n        return Promise.all([\n            this._service.Systems.query({ q: query_str || '', offset, cache: 60 * 1000 }),\n            this._service.Zones.query({ q: query_str || '', offset, cache: 60 * 1000 }),\n            this._service.Modules.query({ q: query_str || '', offset, cache: 60 * 1000 })\n        ]);\n    }\n\n    /**\n     * Check whether the user has scrolled to the bottom of the viewport\n     */\n    public atBottom() {\n        if (!this.list_el) {\n            return this.timeout('bottom', () => this.atBottom());\n        }\n        const el = this.list_el.nativeElement;\n        if (el && el.scrollHeight - el.scrollTop === el.clientHeight) {\n            this.loadMoreItems();\n        }\n    }\n}\n","<div class=\"container\" [class.dark-mode]=\"dark_mode\" #item_list [@listAnimation]=\"results ? results.length : 0\" (scroll)=\"atBottom()\">\n    <ng-container *ngIf=\"!loading\" >\n        <div class=\"item\" #list_item *ngFor=\"let item of (results || [])\" [title]=\"item.name\">\n            <a class=\"name\" [routerLink]=\"['/' + item.type, item.id]\">{{item.name}}</a>\n            <a class=\"details\" [routerLink]=\"['/' + item.type, item.id]\">\n                <div [class]=\"'chip ' + item.type\">{{item.type}}</div>\n                <div class=\"id\">{{item.id}}</div>\n            </a>\n            <div class=\"options\">\n                <button mat-icon-button (touchrelease)=\"edit(item)\">\n                    <app-icon [icon]=\"{ class: 'backoffice-edit' }\"></app-icon>\n                </button>\n                <a mat-icon-button [routerLink]=\"['/' + item.type, item.id]\">\n                    <app-icon [icon]=\"{ class: 'backoffice-eye' }\"></app-icon>\n                </a>\n            </div>\n        </div>\n    </ng-container>\n    <div class=\"info-block\" center *ngIf=\"loading\">\n        <div class=\"icon\">\n            <a-spinner circle-ring color=\"#F44336\"></a-spinner>\n        </div>\n        <div class=\"text\">Searching...</div>\n    </div>\n    <div class=\"info-block\" center *ngIf=\"!loading && (!results || results.length <= 0)\">\n        <div class=\"icon\">\n            <i class=\"backoffice-cross\"></i>\n        </div>\n        <div class=\"text\">No matches found</div>\n    </div>\n    <div class=\"more\" *ngIf=\"loading\">\n        <a-spinner double-circle-ring color=\"#F44336\"></a-spinner>\n    </div>\n</div>\n","\nimport { TopbarHeaderComponent } from './topbar-header/topbar-header.component';\nimport { SidebarMenuComponent } from './sidebar-menu/sidebar-menu.component';\nimport { GlobalSearchComponent } from './global-search/global-search.component';\n\nexport const SHELL_COMPONENTS: any[] = [\n    TopbarHeaderComponent,\n    SidebarMenuComponent,\n    GlobalSearchComponent\n];\n","import { Component, OnInit, Input, Output, EventEmitter, SimpleChanges } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ComposerService } from '@placeos/composer';\nimport { first } from 'rxjs/operators';\n\nimport { BaseDirective } from '../../../shared/globals/base.directive';\nimport { ApplicationService } from '../../../services/app.service';\nimport { ApplicationInternalLink } from 'src/app/shared/utilities/settings.interfaces';\n\n@Component({\n    selector: 'sidebar-menu',\n    templateUrl: './sidebar-menu.template.html',\n    styleUrls: ['./sidebar-menu.styles.scss']\n})\nexport class SidebarMenuComponent extends BaseDirective implements OnInit {\n    /** Whether the sidebar menu should be shown */\n    @Input() public show: boolean;\n    /** Emitter for changes to the sidebar show state */\n    @Output() public showChange = new EventEmitter<boolean>();\n    /** List of available menu items for the application */\n    public menu_items: ApplicationInternalLink[];\n    /** Route of the shown tooltip */\n    public tooltip: string;\n\n    constructor(\n        private _service: ApplicationService,\n        private _composer: ComposerService,\n        private _router: Router\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this._service.initialised.pipe(first(_ => _)).subscribe(() => this.init());\n    }\n\n    public init() {\n        this.menu_items = this._service.setting('app.general.menu');\n        const user = this._service.Users.user.getValue();\n        /** Only allow metrics if a URL has be set */\n        if (!this._composer.auth.authority.metrics) {\n            this.menu_items = this.menu_items.filter(\n                item => item.route && item.route.indexOf('metrics') < 0\n            );\n            if (this._router.url.indexOf('metrics') >= 0) {\n                this._router.navigate([]);\n            }\n        }\n        /** Filter out items with insufficient permissions */\n        this.menu_items = this.menu_items.filter(\n            item => !item.needs_role || !!(user as any)[item.needs_role]\n        );\n        this.subscription(\n            'up',\n            this._service.Hotkeys.listen(['Control', 'Shift', 'ArrowUp'], () => this.changeSelected(-1))\n        );\n        this.subscription(\n            'down',\n            this._service.Hotkeys.listen(['Control', 'Shift', 'ArrowDown'], () => this.changeSelected(1))\n        );\n    }\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        if (changes.show) {\n            this.clearTimeout('close');\n        }\n    }\n\n    /**\n     * Delayed close of the sidebar menu. Mobile Only\n     */\n    public close() {\n        this.timeout(\n            'close',\n            () => {\n                this.show = false;\n                this.showChange.emit(this.show);\n            },\n            100\n        );\n    }\n\n    /**\n     * Cancel delayed close\n     */\n    public cancelClose() {\n        this.timeout('cancel_close', () => this.clearTimeout('close'), 10);\n    }\n\n    private changeSelected(offset: number = 1) {\n        const index = this.menu_items.findIndex(item => this._router.url.indexOf(item.route) >= 0);\n        const new_index = index + offset;\n        if (this.menu_items[new_index]) {\n            this._router.navigate([this.menu_items[new_index].route]);\n        }\n    }\n}\n","<div class=\"container\" *ngIf=\"menu_items\" [class.show]=\"show\" (mouseleave)=\"tooltip = 'false'\" (tapped)=\"cancelClose()\" (window:click)=\"close()\">\n    <ng-container *ngFor=\"let item of menu_items\">\n        <div\n            class=\"item\"\n            [title]=\"item.name\"\n            [matTooltip]=\"item.name\"\n            matTooltipPosition=\"right\"\n        >\n            <a *ngIf=\"item.link\" [href]=\"item.link\">\n                <app-icon [icon]=\"item?.icon\"></app-icon>\n                <div class=\"text\" *ngIf=\"!item?.hide_name\">{{ item?.name }}</div>\n                <div class=\"bar\"></div>\n            </a>\n            <a *ngIf=\"!item.link\" [routerLink]=\"[item.route]\" routerLinkActive=\"active\">\n                <app-icon [icon]=\"item?.icon\"></app-icon>\n                <div class=\"text\" *ngIf=\"!item?.hide_name\">{{ item?.name }}</div>\n                <div class=\"bar\"></div>\n            </a>\n        </div>\n    </ng-container>\n</div>\n","import { Component, OnInit, EventEmitter, Output, Input } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { EngineSystem, EngineZone } from '@placeos/ts-client';\n\nimport { BaseDirective } from '../../../shared/globals/base.directive';\nimport { ApplicationService } from '../../../services/app.service';\nimport { ApplicationLink, ApplicationIcon, ApplicationActionLink } from 'src/app/shared/utilities/settings.interfaces';\nimport { ItemCreateUpdateModalComponent } from 'src/app/overlays/item-modal/item-modal.component';\n\nimport * as dayjs from 'dayjs';\n\n@Component({\n    selector: 'topbar-header',\n    templateUrl: './topbar-header.template.html',\n    styleUrls: ['./topbar-header.styles.scss']\n})\nexport class TopbarHeaderComponent extends BaseDirective implements OnInit {\n    /** Whether the sidebar menu should be shown */\n    @Input('showMenu') public show_menu: boolean;\n    /** Emitter for changes to the sidebar menu show state */\n    @Output('showMenuChange') public show_menu_change = new EventEmitter<boolean>();\n    /** Current global search string */\n    @Input() public filter: string;\n    /** Emitter for changes to the search input */\n    @Output() public filterChange = new EventEmitter();\n    /** List of user actions */\n    public options: ApplicationLink[];\n    /** Whether user tooltip should be shown */\n    public show: boolean;\n\n    /** Whether dark mode is enabled */\n    public get dark_mode(): boolean {\n        return this._service.Users.dark_mode;\n    }\n    public set dark_mode(state: boolean) {\n        this._service.Users.dark_mode = state;\n    }\n\n    public get is_fools_day(): boolean {\n        return dayjs().format('D MMM') === '1 Apr' && !localStorage.getItem('I\\'M NO FOOL!!!');\n    }\n\n    public extra_action_list: ApplicationActionLink[] = [\n        {\n            name: 'New System',\n            icon: { type: 'icon', class: 'backoffice-plus' },\n            callback: () =>\n                this.new(new EngineSystem(this._service.Systems, {}), this._service.Systems)\n        },\n        {\n            name: 'New Zone',\n            icon: { type: 'icon', class: 'backoffice-plus' },\n            callback: () =>\n                this.new(new EngineZone(this._service.Zones, {}), this._service.Zones)\n        }\n    ];\n\n    /** Application logo */\n    public get logo(): ApplicationIcon {\n        return this._service.setting('app.logo_light');\n    }\n\n    /** Whether global search is enabled */\n    public get has_search(): boolean {\n        return this._service.setting('app.general.global_search');\n    }\n\n    /** Active user */\n    public get user(): any {\n        return this._service.Users.user.getValue();\n    }\n\n    /** Current environment of the application */\n    public get env(): string {\n        return this._service.setting('env');\n    }\n\n    constructor(private _service: ApplicationService, private _dialog: MatDialog) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.options = [\n            {\n                route: '/profile',\n                name: 'Profile',\n                icon: { type: 'icon', class: 'backoffice-user' }\n            },\n            { link: '/logout', name: 'Logout', icon: { type: 'icon', class: 'backoffice-log-out' } }\n        ];\n    }\n\n    public notAFool() {\n        localStorage.setItem('I\\'M NO FOOL!!!', 'true');\n    }\n\n    /**\n     * Open the modal to create a new engine resource\n     */\n    protected new(item: any, service: any) {\n        this._dialog.open(ItemCreateUpdateModalComponent, {\n            height: 'auto',\n            width: 'auto',\n            maxHeight: 'calc(100vh - 2em)',\n            maxWidth: 'calc(100vw - 2em)',\n            data: {\n                item,\n                service\n            }\n        });\n    }\n\n    /** Toggle the show state of the sidebar menu */\n    public toggleMenu() {\n        this.show_menu = !this.show_menu;\n        this.show_menu_change.emit(this.show_menu);\n    }\n\n    /**\n     * Emit changes to the global search filter\n     */\n    public postFilter() {\n        this.filterChange.emit(this.filter);\n    }\n}\n","<div class=\"container\">\n    <div class=\"topbar\">\n        <button mat-icon-button class=\"mobile-only\" (tapped)=\"toggleMenu()\">\n            <app-icon [icon]=\"{ class: 'backoffice-' + (show_menu ? 'cross' : 'menu') }\"></app-icon>\n        </button>\n        <div class=\"block\">\n            <div *ngIf=\"logo\" class=\"logo\">\n                <a [routerLink]=\"['/']\" *ngIf=\"!is_fools_day; else fools_day\">\n                    Place<span>OS</span>\n                </a>\n\n            </div>\n        </div>\n        <div class=\"uat\" *ngIf=\"env !== 'prod'\">\n            {{ env }}\n        </div>\n        <div class=\"search\">\n            <searchbar\n                *ngIf=\"has_search\"\n                [(filter)]=\"filter\"\n                (filterChange)=\"postFilter()\"\n            ></searchbar>\n        </div>\n        <div class=\"block end\">\n            <button mat-icon-button class=\"more-actions not-mobile\" [matMenuTriggerFor]=\"more_actions\">\n                <app-icon [icon]=\"{ class: 'material-icons', content: 'more_vert' }\"></app-icon>\n            </button>\n            <!-- TODO Add user details display -->\n            <button mat-icon-button class=\"avatar\" [title]=\"user?.name\" [matMenuTriggerFor]=\"menu\">\n                <div\n                    class=\"img\"\n                    [style.background-image]=\"('url(' + (user?.image || 'https://www.gravatar.com/avatar/' + user?.gravatar_hash) + ')') | safe:'style'\"\n                ></div>\n            </button>\n        </div>\n    </div>\n</div>\n<mat-menu #menu=\"matMenu\">\n    <a mat-menu-item>\n        <div class=\"avatar\" [routerLink]=\"['/profile']\" routerLinkActive=\"active\">\n            <div\n                class=\"img\"\n                [style.background-image]=\"('url(' + (user?.image || 'https://www.gravatar.com/avatar/' + user?.gravatar_hash) + ')') | safe:'style'\"\n            ></div>\n        </div>\n        <div class=\"text\">{{user?.name || 'Guest'}}</div>\n    </a>\n    <ng-container *ngFor=\"let item of options\">\n        <a *ngIf=\"item.link\" mat-menu-item [href]=\"item.link\">\n            <app-icon [icon]=\"item.icon\"></app-icon>\n            <div class=\"text\">{{item.name}}</div>\n        </a>\n        <a *ngIf=\"item.route\" mat-menu-item [routerLink]=\"[item.route]\" routerLinkActive=\"active\">\n            <app-icon [icon]=\"item.icon\"></app-icon>\n            <div class=\"text\">{{item.name}}</div>\n        </a>\n    </ng-container>\n    <div class=\"item\" mat-menu-item role=\"menuitemcheckbox\">\n        <app-icon [icon]=\"{ class: 'backoffice-moon' }\"></app-icon>\n        <div class=\"text\">Dark Mode</div>\n        <div class=\"toggle\"(click) = \"$event.stopPropagation()\">\n            <mat-slide-toggle [(ngModel)]=\"dark_mode\"></mat-slide-toggle>\n        </div>\n    </div>\n</mat-menu>\n<mat-menu #more_actions=\"matMenu\">\n    <button mat-menu-item *ngFor=\"let action of extra_action_list\" (tapped)=\"action.callback()\">\n        <app-icon [icon]=\"action.icon\"></app-icon>\n        <div class=\"text\">{{action.name}}</div>\n    </button>\n</mat-menu>\n<ng-template #fools_day>\n    <a href=\"http://www.nyan.cat/\" (click)=\"notAFool()\">April <span>Fools</span></a>\n</ng-template>\n","\nimport { AppShellComponent } from './shell.component';\nimport { SHELL_COMPONENTS } from './components';\n\nexport const APP_COMPONENTS: any[] = [\n    AppShellComponent,\n    ...SHELL_COMPONENTS\n];\n\nexport const APP_ENTRY_COMPONENTS: any[] = [\n\n];\n","/**\n * @Author: Alex Sorafumo\n * @Date:   17/10/2016 4:10 PM\n * @Email:  alex@yuion.net\n * @Filename: simple.component.ts\n * @Last modified by:   Alex Sorafumo\n * @Last modified time: 01/02/2017 1:37 PM\n */\n\nimport { Component, OnInit } from '@angular/core';\nimport { EngineUser } from '@placeos/ts-client';\nimport { first } from 'rxjs/operators';\n\nimport { ApplicationLink } from '../shared/utilities/settings.interfaces';\nimport { ApplicationService } from '../services/app.service';\nimport { BaseDirective } from '../shared/globals/base.directive';\n\nimport * as dayjs from 'dayjs';\n\n@Component({\n    selector: 'app-shell',\n    styleUrls: ['./shell.styles.scss'],\n    templateUrl: './shell.template.html'\n})\nexport class AppShellComponent extends BaseDirective implements OnInit {\n    /** Whether the application is loading */\n    public loading: boolean;\n    /** Display string for the current year */\n    public year: string;\n    /** Currently active user */\n    public user: EngineUser;\n    /** Global search filter string */\n    public filter: string;\n    /** Whether sidebar menu should be shown */\n    public show: boolean;\n\n    /** Active environment */\n    public get env(): string {\n        return this._service.setting('env') || '';\n    }\n\n    /** List of core tiles to show on the sidebar menu */\n    public get tiles(): ApplicationLink[] {\n        return this._service.setting('app.tiles') || [];\n    }\n\n    /** Whether dark mode is enabled */\n    public get dark_mode(): boolean {\n        return this._service.Users.dark_mode;\n    }\n\n    public get is_fools_day(): boolean {\n        return dayjs().format('D MMM') === '1 Apr' && !localStorage.getItem('I\\'M NO FOOL!!!');\n    }\n\n    constructor(private _service: ApplicationService) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.year = dayjs().format('YYYY');\n        this.subscription(\n            'user',\n            this._service.Users.user.subscribe(user => (this.user = user))\n        );\n        this.loading = true;\n        this._service.initialised.pipe(first(_ => _)).subscribe(() => this.init());\n    }\n\n    public init() {\n        this.loading = false;\n        this._service.Users.current().then(user => (this.user = user));\n    }\n\n    /** Navigate to the root page */\n    public home() {\n        this._service.navigate('');\n    }\n}\n","<div class=\"container\" [class.uat]=\"env !== 'prod'\" [class.dark-mode]=\"dark_mode\" [class.joke]=\"is_fools_day\" *ngIf=\"user && !loading\">\n    <div class=\"header\">\n        <topbar-header [(showMenu)]=\"show\" [(filter)]=\"filter\"></topbar-header>\n    </div>\n    <div class=\"body\" [class.filtered]=\"filter\">\n        <div class=\"sidebar-menu\">\n            <sidebar-menu [(show)]=\"show\"></sidebar-menu>\n        </div>\n        <div class=\"content\">\n            <router-outlet></router-outlet>\n        </div>\n    </div>\n    <div class=\"search-results\" *ngIf=\"filter\">\n        <global-search [(search)]=\"filter\"></global-search>\n    </div>\n    <app-debug-output></app-debug-output>\n</div>\n<div class=\"container loader\" [class.uat]=\"env !== 'prod'\" *ngIf=\"loading\">\n    <div class=\"info-block\">\n        <div class=\"icon\">\n            <a-spinner circle-ring color=\"#fff\"></a-spinner>\n        </div>\n        <div class=\"text\">Loading application data...</div>\n    </div>\n</div>\n<div class=\"container login\" [class.uat]=\"env !== 'prod'\" *ngIf=\"!user\">\n    <login-display></login-display>\n</div>\n","export const environment = {\n  production: true\n};\n","// IMPORTANT: THIS FILE IS AUTO GENERATED! DO NOT MANUALLY EDIT OR CHECKIN!\n/* tslint:disable */\nexport const VERSION = {\n    \"dirty\": false,\n    \"raw\": \"4193265\",\n    \"hash\": \"4193265\",\n    \"distance\": null,\n    \"tag\": null,\n    \"semver\": null,\n    \"suffix\": \"4193265\",\n    \"semverString\": null,\n    \"version\": \"2.0.2\",\n    \"core_version\": \"1.0.0\",\n    \"time\": 1587367621322\n};\n/* tslint:enable */\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"]}