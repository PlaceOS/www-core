(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{RyY7:function(n,e,t){"use strict";t.r(e);var i=t("ofXK"),o=t("3Pt+"),a=t("tyNb"),r=t("CcG0"),c=t("5f3J"),s=t("fXoL"),d=t("47y3");const b=function(){return{name:"Engine Admin"}},l=function(){return{class:"backoffice-info"}},g=function(n){return{id:"about",name:"About",icon:n}},m=function(){return{class:"backoffice-database"}},h=function(n){return{id:"database",name:"Database",icon:n}},f=function(n,e){return[n,e]};let p=(()=>{class n extends c.a{}return n.\u0275fac=function(e){return u(e||n)},n.\u0275cmp=s.Kb({type:n,selectors:[["app-engine"]],features:[s.zb],decls:3,vars:13,consts:[[1,"container"],["name","test","route","engine",3,"item","has_change","tabs"]],template:function(n,e){1&n&&(s.Wb(0,"div",0),s.Wb(1,"main"),s.Rb(2,"item-display",1),s.Vb(),s.Vb()),2&n&&(s.Cb(2),s.oc("item",s.pc(3,b))("has_change",!1)("tabs",s.rc(10,f,s.qc(5,g,s.pc(4,l)),s.qc(8,h,s.pc(7,m)))))},directives:[d.a],styles:[".container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;height:100%;width:100%}@media only screen and (orientation:portrait) and (max-width:450px){.container[_ngcontent-%COMP%]{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}}@media only screen and (orientation:landscape) and (max-width:800px){.container[_ngcontent-%COMP%]{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}}@media only screen and (orientation:portrait) and (max-width:450px){.container.show[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{height:100%}}@media only screen and (orientation:landscape) and (max-width:800px){.container.show[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{height:100%}}@media only screen and (orientation:portrait) and (max-width:450px){.container.show[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{height:0%}}@media only screen and (orientation:landscape) and (max-width:800px){.container.show[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{height:0%}}.sidebar[_ngcontent-%COMP%]{height:100%;width:20em}@media only screen and (orientation:portrait) and (max-width:450px){.sidebar[_ngcontent-%COMP%]{height:3em;min-height:3em;width:100%;-webkit-transition:height .3s;transition:height .3s}}@media only screen and (orientation:landscape) and (max-width:800px){.sidebar[_ngcontent-%COMP%]{height:3em;min-height:3em;width:100%;-webkit-transition:height .3s;transition:height .3s}}main[_ngcontent-%COMP%]{position:relative;height:100%;overflow:hidden;-webkit-box-flex:1;flex:1;background-color:#f0f0f0}@media only screen and (orientation:portrait) and (max-width:450px){main[_ngcontent-%COMP%]{-webkit-transition:height .3s;transition:height .3s;width:100%}}@media only screen and (orientation:landscape) and (max-width:800px){main[_ngcontent-%COMP%]{-webkit-transition:height .3s;transition:height .3s;width:100%}}.about[_ngcontent-%COMP%]{padding:1.25em;font-size:1.2em}.user[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;margin-bottom:1em}.user[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.user[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%], .user[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]{font-size:.8em;color:rgba(0,0,0,.54);margin-top:.25em}.avatar[_ngcontent-%COMP%]{height:4em;width:4em;min-width:4em;border-radius:100%;background-color:#f8f8f8;border:1px solid #ccc;background-position:50%;background-size:cover;background-repeat:no-repeat;margin-right:1.5em}.field[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;flex-wrap:wrap;margin:.5em 0}.field[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:12em;min-width:10em;font-size:.8em;font-weight:400;margin:.5em 0}.field[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{-webkit-box-flex:3;flex:3;min-width:16em}.field[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1;margin:.5em 0}"]}),n})();const u=s.Yb(p);var x=t("mrSG"),w=t("VBRG");let _=(()=>{class n extends w.a{constructor(n){super(),this._composer=n}reindex(n=!0){return Object(x.b)(this,void 0,void 0,(function*(){return this._composer.http.post(`${this._composer.auth.api_endpoint}/reindex${n?"?backfill=true":""}`,null).toPromise()}))}backfill(){return Object(x.b)(this,void 0,void 0,(function*(){return this._composer.http.post(`${this._composer.auth.api_endpoint}/backfill`,null).toPromise()}))}}return n.\u0275fac=function(e){return new(e||n)(s.ac(r.c))},n.\u0275prov=s.Mb({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var k=t("OaWH"),C=t("bTqV"),v=t("m6yr"),M=t("Xa2L");function O(n,e){1&n&&(s.Ub(0),s.Ic(1,"Re-index"),s.Tb())}function P(n,e){1&n&&(s.Ub(0),s.Ic(1,"Backfill"),s.Tb())}function y(n,e){1&n&&(s.Wb(0,"div",4),s.Rb(1,"mat-spinner",5),s.Vb())}let V=(()=>{class n{constructor(n,e){this._service=n,this._engine_service=e}reindex(){this.reindexing=!0,this._engine_service.reindex().then(()=>this.reindexing=!1,n=>{this.reindexing=!1,this._service.notifyError(`Error reindexing database. Error: ${n.message|n}`)})}backfill(){this.backfilling=!0,this._engine_service.backfill().then(()=>this.backfilling=!1,n=>{this.backfilling=!1,this._service.notifyError(`Error reindexing database. Error: ${n.message|n}`)})}}return n.\u0275fac=function(e){return new(e||n)(s.Qb(k.a),s.Qb(_))},n.\u0275cmp=s.Kb({type:n,selectors:[["app-database-details"]],decls:8,vars:6,consts:[[1,""],["mat-button","",3,"disabled","tapped"],[4,"ngIf","ngIfElse"],["spinner",""],[1,"spinner"],["diameter","32"]],template:function(n,e){if(1&n&&(s.Wb(0,"div",0),s.Wb(1,"button",1),s.ec("tapped",(function(){return e.reindex()})),s.Gc(2,O,2,0,"ng-container",2),s.Vb(),s.Vb(),s.Wb(3,"div",0),s.Wb(4,"button",1),s.ec("tapped",(function(){return e.backfill()})),s.Gc(5,P,2,0,"ng-container",2),s.Vb(),s.Vb(),s.Gc(6,y,2,0,"ng-template",null,3,s.Hc)),2&n){const n=s.vc(7);s.Cb(1),s.oc("disabled",e.reindexing),s.Cb(1),s.oc("ngIf",!e.reindexing)("ngIfElse",n),s.Cb(2),s.oc("disabled",e.backfilling),s.Cb(1),s.oc("ngIf",!e.backfilling)("ngIfElse",n)}},directives:[C.b,v.b,i.m,M.b],styles:["[_nghost-%COMP%]{padding:1em}button[_ngcontent-%COMP%]{min-width:10em;margin:.25em}.spinner[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;width:100%;margin:.25em 0}"]}),n})();var I=t("lUOg"),W=t("4z9b"),E=t("0IaG");let z=(()=>{class n extends c.a{constructor(n,e){super(),this._service=n,this._dialog=e}get user(){return this._service.Users.current()}get backoffice_version(){return I.c}get backoffice_build(){return I.a.format("DD MMM YYYY [at] h:mma")}changelog(n){this._dialog.open(W.a,{data:{changelog:n}})}}return n.\u0275fac=function(e){return new(e||n)(s.Qb(k.a),s.Qb(E.b))},n.\u0275cmp=s.Kb({type:n,selectors:[["app-engine-details"]],features:[s.zb],decls:10,vars:2,consts:[[1,"field"],["for","version"],[1,"value"]],template:function(n,e){1&n&&(s.Wb(0,"div",0),s.Wb(1,"label",1),s.Ic(2,"Backoffice Version:"),s.Vb(),s.Wb(3,"div",2),s.Ic(4),s.Vb(),s.Vb(),s.Wb(5,"div",0),s.Wb(6,"label",1),s.Ic(7,"Backoffice Build:"),s.Vb(),s.Wb(8,"div",2),s.Ic(9),s.Vb(),s.Vb()),2&n&&(s.Cb(4),s.Jc(e.backoffice_version),s.Cb(5),s.Jc(e.backoffice_build))},styles:["[_nghost-%COMP%]{padding:1em}.field[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;font-size:1.25em;margin:0 0 .5em}label[_ngcontent-%COMP%]{font-size:.8em;font-weight:600;width:10em;margin-bottom:.25em}"]}),n})();const G=[{path:"",component:p,canActivate:[t("QZVP").a],children:[{path:"about",component:z},{path:"database",component:V},{path:"**",redirectTo:"about"}]},{path:"**",redirectTo:""}];var Y=t("PCNd");t.d(e,"AppEngineModule",(function(){return B}));let B=(()=>{class n{}return n.\u0275mod=s.Ob({type:n}),n.\u0275inj=s.Nb({factory:function(e){return new(e||n)},imports:[[i.c,o.g,r.b,a.g.forChild(G),Y.a]]}),n})()}}]);