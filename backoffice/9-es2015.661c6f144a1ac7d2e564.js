(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"9SBB":function(e,t,n){"use strict";n.r(t);var i=n("fXoL"),c=n("ofXK"),o=n("3Pt+"),s=n("tyNb"),r=n("CcG0"),a=n("mrSG"),d=n("UN3I"),l=n("OaWH"),h=n("C/ya"),m=n("g+Po"),g=n("D/9M"),f=n("LcAk"),p=n("BAfr"),u=n("m6yr"),v=n("47y3"),b=n("5f3J"),_=n("q/DJ");const y=[1,"container"],C=[1,"details"],w=[1,"field"],M=[1,"value"],O=[3,"href"],P=(()=>{class e extends b.a{constructor(e,t){super(),this.service=e,this._dialog=t,this.model={}}ngOnInit(){}select(e){this.model.selected_system=e}}return e.ngComponentDef=i.Rb({type:e,selectors:[["repository-about"]],factory:function(t){return new(t||e)(i.Xb(l.a),i.Xb(f.b))},inputs:{item:"item"},features:[i.Fb],consts:24,vars:8,template:function(e,t){1&e&&(i.ec(0,"div",y),i.ec(1,"section",C),i.ec(2,"div",w),i.ec(3,"label"),i.Tc(4,"Type:"),i.cc(),i.ec(5,"div",M),i.Tc(6),i.cc(),i.cc(),i.ec(7,"div",w),i.ec(8,"label"),i.Tc(9,"Folder name:"),i.cc(),i.ec(10,"div",M),i.Tc(11),i.cc(),i.cc(),i.ec(12,"div",w),i.ec(13,"label"),i.Tc(14,"Repository URI:"),i.cc(),i.ec(15,"div",M),i.ec(16,"a",O),i.qc(17,"safe"),i.Tc(18),i.cc(),i.cc(),i.cc(),i.ec(19,"div",w),i.ec(20,"label"),i.Tc(21,"Description:"),i.cc(),i.ec(22,"div",M),i.Tc(23),i.cc(),i.cc(),i.cc(),i.cc()),2&e&&(i.Ic(6),i.Vc("",t.item.type?"Interface":"Driver"," Repository"),i.Ic(11),i.Uc(t.item.folder_name||"No folder set"),i.Ic(16),i.vc("href",i.sc(17,5,t.item.uri,"url"),i.Hc),i.Ic(18),i.Uc(t.item.uri||"No URI set"),i.Ic(23),i.Uc(t.item.description||"No description"))},pipes:[_.b],styles:[".container[_ngcontent-%COMP%]{padding:1em}header[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:700;font-size:1.1em}section[_ngcontent-%COMP%]{padding:.5em .25em}.no-item[_ngcontent-%COMP%]{font-size:.75em}.field[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:.75em 0}label[_ngcontent-%COMP%]{font-size:.8em;font-weight:500;margin-bottom:.4em}"]}),e})();var x=n("ARKa");const I=[1,"container"],R=[1,"settings"],D=[4,"ngIf"],T=["class","info-block",4,"ngIf"],k=[1,"flex"],F=[4,"ngFor","ngForOf"],X=[1,"small",3,"innerHTML"];function N(e,t){if(1&e&&(i.ec(0,"tr"),i.Yb(1,"td",X),i.qc(2,"driverFormat"),i.cc()),2&e){const e=t.$implicit;i.Ic(1),i.vc("innerHTML",i.rc(2,1,e),i.Fc)}}function U(e,t){if(1&e&&(i.ec(0,"table"),i.ec(1,"thead"),i.ec(2,"td",k),i.Tc(3,"Name"),i.cc(),i.cc(),i.ec(4,"tbody"),i.Rc(5,N,3,3,"tr",F),i.cc(),i.cc()),2&e){const e=i.pc();i.Ic(5),i.vc("ngForOf",e.driver_list)}}const A=[1,"info-block"],H=[1,"text"];function z(e,t){1&e&&(i.ec(0,"div",A),i.ec(1,"div",H),i.Tc(2,"No drivers for repository"),i.cc(),i.cc())}const B=(()=>{class e extends b.a{constructor(e){super(),this.service=e,this.driver_list=[]}ngOnChanges(e){e.item&&this.load()}load(e=0){this.service.Repositories.listDrivers(this.item.id,{offset:e}).then(e=>{this.driver_list=e||[]},()=>null)}}return e.ngComponentDef=i.Rb({type:e,selectors:[["repository-drivers"]],factory:function(t){return new(t||e)(i.Xb(l.a))},inputs:{item:"item"},features:[i.Fb,i.Gb()],consts:4,vars:2,template:function(e,t){1&e&&(i.ec(0,"div",I),i.ec(1,"div",R),i.Rc(2,U,6,1,"table",D),i.Rc(3,z,3,0,"div",T),i.cc(),i.cc()),2&e&&(i.Ic(2),i.vc("ngIf",t.driver_list&&t.driver_list.length>0),i.Ic(3),i.vc("ngIf",!t.driver_list||t.driver_list.length<=0))},directives:[c.n,c.m],pipes:[x.a],styles:[".container[_ngcontent-%COMP%]{padding:1em}.list[_ngcontent-%COMP%]{margin-top:.5em}tbody[_ngcontent-%COMP%]{font-size:.9em}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap}div[_ngcontent-%COMP%]   .small[_ngcontent-%COMP%]{width:2em}div[_ngcontent-%COMP%]   .duo[_ngcontent-%COMP%]{width:4em}div[_ngcontent-%COMP%]   .duo[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{display:inline-flex}.select[_ngcontent-%COMP%]{display:flex;align-items:center}.select[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1}"]}),e})(),E=[1,"container"],J=[1,"sidebar"],L=["heading","Repositories",3,"module","close","searchChange","event"],S=[3,"touchrelease"],j=["name","repository",3,"item","loading","active","tabs","event"],q=["about",""],G=["drivers",""],V=[3,"item"];function W(e,t){if(1&e&&i.Yb(0,"repository-about",V),2&e){const e=i.pc();i.vc("item",e.item)}}function Y(e,t){if(1&e&&i.Yb(0,"repository-drivers",V),2&e){const e=i.pc();i.vc("item",e.item)}}const K={class:"backoffice-info-with-circle"},$=function(e){return{id:"about",name:"About",template:e,icon:K}},Q={class:"backoffice-documents"},Z=function(e,t){return{id:"drives",name:"Drivers",template:e,count:t,icon:Q}},ee=function(e,t){return[e,t]},te=(()=>{class e extends h.a{constructor(e,t,n,i){super(e,t,n),this._service=e,this._route=t,this._router=n,this._dialog=i,this.service=this._service.Repositories}loadValues(){this._service.Repositories.listDrivers(this.item.id,{offset:0}).then(e=>this.driver_count=e.length)}new(){this._dialog.open(g.a,{height:"auto",width:"auto",maxHeight:"calc(100vh - 2em)",maxWidth:"calc(100vw - 2em)",data:{item:new d.j(this._service.Repositories,{}),service:this._service.Repositories}})}edit(){this.item&&this._dialog.open(g.a,{height:"auto",width:"auto",maxHeight:"calc(100vh - 2em)",maxWidth:"calc(100vw - 2em)",data:{item:this.item,service:this._service.Repositories}})}delete(){if(this.item){const e=this._dialog.open(m.b,Object.assign({},m.a,{data:{title:"Delete repository",content:"<p>Are you sure you want delete this repository?</p><p>Deleting this repository will <strong>immediately</strong> remove it from all associated systems and zones</p>",icon:{type:"icon",class:"backoffice-trash"}}}));this.subscription("delete_confirm",e.componentInstance.event.subscribe(t=>a.b(this,void 0,void 0,function*(){"done"===t.reason&&(e.componentInstance.loading="Deleting repository...",yield this.item.delete().catch(t=>{throw e.componentInstance.loading=null,this._service.notifyError(`Error deleting repository. Error: ${t.message||t}`),t}),this._router.navigate(["/repositories"]),e.close(),this.unsub("delete_confirm"))})))}}}return e.ngComponentDef=i.Rb({type:e,selectors:[["app-repositories"]],factory:function(t){return new(t||e)(i.Xb(l.a),i.Xb(s.a),i.Xb(s.c),i.Xb(f.b))},features:[i.Fb],consts:9,vars:15,template:function(e,t){if(1&e&&(i.ec(0,"div",E),i.Pc(),i.ec(1,"div",J),i.ec(2,"sidebar",L),i.kc("searchChange",function(e){return t.search(e)}),i.kc("event",function(e){return t.sidebarEvent(e)}),i.cc(),i.cc(),i.ec(3,"main",S),i.kc("touchrelease",function(e){return t.show_sidebar=!1}),i.ec(4,"item-display",j),i.kc("event",function(e){return t.itemEvent(e)}),i.Rc(5,W,1,1,"ng-template",null,q,i.Sc),i.Rc(7,Y,1,1,"ng-template",null,G,i.Sc),i.cc(),i.cc(),i.cc()),2&e){const e=i.Bc(6),n=i.Bc(8);i.Mb("show",t.show_sidebar),i.Qc(),i.Ic(2),i.vc("module",t.module)("close",t.show_sidebar),i.Ic(4),i.vc("item",t.item)("loading",t.loading_item)("active",t.tab)("tabs",i.xc(12,ee,i.wc(7,$,e),i.xc(9,Z,n,t.driver_count)))}},directives:[p.a,u.b,v.a,P,B],styles:[".container[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%;width:100%}.sidebar[_ngcontent-%COMP%]{height:100%;width:20em}@media only screen and (orientation:portrait) and (max-width:450px){.container[_ngcontent-%COMP%]{flex-direction:column}.container.show[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{height:100%}.container.show[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{height:0%}.sidebar[_ngcontent-%COMP%]{height:3em;min-height:3em;width:100%;transition:height .3s}main[_ngcontent-%COMP%]{transition:height .3s;width:100%}}@media only screen and (orientation:landscape) and (max-width:800px){.container[_ngcontent-%COMP%]{flex-direction:column}.container.show[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{height:100%}.container.show[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{height:0%}.sidebar[_ngcontent-%COMP%]{height:3em;min-height:3em;width:100%;transition:height .3s}main[_ngcontent-%COMP%]{transition:height .3s;width:100%}}main[_ngcontent-%COMP%]{position:relative;height:100%;overflow:hidden;flex:1;background-color:#f0f0f0}"]}),e})(),ne=[{path:"",component:te,children:[]},{path:":id",component:te,children:[]},{path:"**",redirectTo:""}];var ie=n("PCNd");n.d(t,"AppRepositoriesModule",function(){return ce});const ce=(()=>{class e{}return e.ngModuleDef=i.Vb({type:e}),e.ngInjectorDef=i.Ub({factory:function(t){return new(t||e)},imports:[[c.c,o.g,r.b,s.g.forChild(ne),ie.a]]}),e})();s.g.forChild(ne)}}]);